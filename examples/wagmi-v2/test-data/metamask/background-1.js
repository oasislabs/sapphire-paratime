LavaPack.loadBundle([[141,{"@metamask/transaction-controller":2624,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:24,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=24;const r=function(e){const t=e;if(!t.TransactionController)return t;const{transactions:r}=t.TransactionController;return t.TransactionController.transactions=r.map(((e,t)=>(e.status===s.TransactionStatus.unapproved&&e.txParams&&e.txParams.from&&(e.txParams.from=e.txParams.from.toLowerCase()),e))),t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/024.js"}],[142,{"../lib/util":117,"@metamask/transaction-controller":2624,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller"),i=e("../lib/util");r.default={version:25,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=25;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==s.TransactionStatus.unapproved||(e.txParams=function(e){const t={from:e=>(0,i.addHexPrefix)(e).toLowerCase(),to:()=>(0,i.addHexPrefix)(e.to).toLowerCase(),nonce:e=>(0,i.addHexPrefix)(e),value:e=>(0,i.addHexPrefix)(e),data:e=>(0,i.addHexPrefix)(e),gas:e=>(0,i.addHexPrefix)(e),gasPrice:e=>(0,i.addHexPrefix)(e)},r={};return Object.keys(t).forEach((n=>{e[n]&&(r[n]=t[n](e[n]))})),r}(e.txParams)),e)))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/025.js"}],[1424,{"./util":1432},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CaseInsensitiveMap=void 0;const n=e("./util");class s extends Map{static fromObject(e){return new s(Object.entries(e))}toObject(){return Object.fromEntries(this.entries())}get(e){return super.get(e.toLowerCase())}getOrThrow(e,t="Key"){return this.get(e)??(0,n.throwError)(`${t} '${e}' not found`)}has(e){return super.has(e.toLowerCase())}set(e,t){return super.set(e.toLowerCase(),t)}delete(e){return super.delete(e.toLowerCase())}}r.CaseInsensitiveMap=s}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/CaseInsensitiveMap.js"}],[1425,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DeferredPromise=void 0;r.DeferredPromise=class{constructor(){if(this.resolve=undefined,this.reject=undefined,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),!this.resolve||!this.reject)throw new Error("Promise constructor failed")}}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/DeferredPromise.js"}],[1426,{"@metamask/keyring-api":1594},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},l=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringSnapControllerClient=void 0;const u=e("@metamask/keyring-api");class d{constructor(e,t,r,o){n.set(this,void 0),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),c(this,i,e,"f"),c(this,n,t,"f"),c(this,s,r,"f"),c(this,a,o,"f")}async send(e){return l(this,i,"f").handleRequest({snapId:l(this,n,"f"),origin:l(this,s,"f"),handler:l(this,a,"f"),request:e})}}n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap;class h extends u.KeyringClient{constructor({controller:e,snapId:t="undefined",origin:r="metamask",handler:n="onKeyringRequest"}){super(new d(e,t,r,n)),o.set(this,void 0),c(this,o,e,"f")}withSnapId(e){return new h({controller:l(this,o,"f"),snapId:e})}getController(){return l(this,o,"f")}}r.KeyringSnapControllerClient=h,o=new WeakMap}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/KeyringSnapControllerClient.js"}],[1427,{"./CaseInsensitiveMap":1424},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapIdMap=r.InvalidSnapIdError=void 0;const a=e("./CaseInsensitiveMap");class o extends Error{constructor(e,t){super(`Snap "${e}" is not allowed to set "${t}"`),this.name="InvalidSnapIdError",this.snapId=e,this.key=t}}r.InvalidSnapIdError=o;class c{constructor(e){n.set(this,void 0),s(this,n,new a.CaseInsensitiveMap(e),"f")}toObject(){return i(this,n,"f").toObject()}static fromObject(e){return new c(Object.entries(e))}get(e,t){const r=i(this,n,"f").get(t);return r?.snapId===e?r:undefined}has(e,t){return this.get(e,t)!==undefined}delete(e,t){return this.has(e,t)&&i(this,n,"f").delete(t)}set(e,t){if(i(this,n,"f").has(e)&&!this.has(t.snapId,e))throw new o(t.snapId,e);return i(this,n,"f").set(e,t),this}values(){return i(this,n,"f").values()}get size(){return i(this,n,"f").size}}r.SnapIdMap=c,n=new WeakMap}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapIdMap.js"}],[1428,{"./DeferredPromise":1425,"./KeyringSnapControllerClient":1426,"./SnapIdMap":1427,"./logger":1430,"./types":1431,"./util":1432,"@ethereumjs/tx":438,"@metamask/eth-sig-util":1397,"@metamask/keyring-api":1594,"@metamask/utils":2717,events:3786,superstruct:4808,uuid:1433},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,l,u,d,h,f,p,m,g,y,v,w,_,b,k,T=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},S=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapKeyring=r.SNAP_KEYRING_TYPE=void 0;const E=e("@ethereumjs/tx"),C=e("@metamask/eth-sig-util"),M=e("@metamask/keyring-api"),j=e("@metamask/utils"),P=e("events"),I=e("superstruct"),A=e("uuid"),O=e("./DeferredPromise"),x=e("./KeyringSnapControllerClient"),N=e("./logger"),R=e("./SnapIdMap"),B=e("./types"),L=e("./util");r.SNAP_KEYRING_TYPE="Snap Keyring";class D extends P.EventEmitter{constructor(e,t){super(),n.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),this.type=D.type,T(this,s,new x.KeyringSnapControllerClient({controller:e}),"f"),T(this,a,new R.SnapIdMap,"f"),T(this,i,new R.SnapIdMap,"f"),T(this,o,t,"f")}async handleKeyringSnapMessage(e,t){switch((0,I.assert)(t,B.SnapMessageStruct),t.method){case M.KeyringEvent.AccountCreated:return S(this,n,"m",c).call(this,e,t);case M.KeyringEvent.AccountUpdated:return S(this,n,"m",l).call(this,e,t);case M.KeyringEvent.AccountDeleted:return S(this,n,"m",u).call(this,e,t);case M.KeyringEvent.RequestApproved:return S(this,n,"m",d).call(this,e,t);case M.KeyringEvent.RequestRejected:return S(this,n,"m",h).call(this,e,t);default:throw new Error(`Method not supported: ${t.method}`)}}async serialize(){return{accounts:S(this,i,"f").toObject()}}async deserialize(e){e!==undefined&&T(this,i,R.SnapIdMap.fromObject(e.accounts),"f")}async getAccounts(){return(0,L.unique)([...S(this,i,"f").values()].map((({account:e})=>e.address.toLowerCase())))}async getAccountsBySnapId(e){return(0,L.unique)([...S(this,i,"f").values()].filter((({snapId:t})=>t===e)).map((({account:e})=>e.address.toLowerCase())))}async signTransaction(e,t,r={}){const s=t.common.chainId(),i=(0,L.toJson)({...t.toJSON(),from:e,type:`0x${t.type.toString(16)}`,chainId:(0,j.bigIntToHex)(s)}),a=await S(this,n,"m",f).call(this,{address:e,method:M.EthMethod.SignTransaction,params:[i],chainId:(0,j.toCaipChainId)(j.KnownCaipNamespace.Eip155,`${s}`)}),o=(0,I.mask)(a,(0,I.object)({r:(0,I.string)(),s:(0,I.string)(),v:(0,I.string)()}));return E.TransactionFactory.fromTxData({...i,r:o.r,s:o.s,v:o.v})}async signTypedData(e,t,r={version:C.SignTypedDataVersion.V1}){const s={[C.SignTypedDataVersion.V1]:M.EthMethod.SignTypedDataV1,[C.SignTypedDataVersion.V3]:M.EthMethod.SignTypedDataV3,[C.SignTypedDataVersion.V4]:M.EthMethod.SignTypedDataV4}[r.version]||M.EthMethod.SignTypedDataV1,i=t.domain?.chainId;return(0,L.strictMask)(await S(this,n,"m",f).call(this,{address:e,method:s,params:(0,L.toJson)([e,t]),...i===undefined?{}:{chainId:(0,j.toCaipChainId)(j.KnownCaipNamespace.Eip155,`${i}`)}}),M.EthBytesStruct)}async signMessage(e,t){return(0,L.strictMask)(await S(this,n,"m",f).call(this,{address:e,method:M.EthMethod.Sign,params:(0,L.toJson)([e,t])}),M.EthBytesStruct)}async signPersonalMessage(e,t){return(0,L.strictMask)(await S(this,n,"m",f).call(this,{address:e,method:M.EthMethod.PersonalSign,params:(0,L.toJson)([t,e])}),M.EthBytesStruct)}async prepareUserOperation(e,t,r){return(0,L.strictMask)(await S(this,n,"m",f).call(this,{address:e,method:M.EthMethod.PrepareUserOperation,params:(0,L.toJson)(t),expectSync:!0,chainId:(0,j.toCaipChainId)(j.KnownCaipNamespace.Eip155,r.chainId)}),M.EthBaseUserOperationStruct)}async patchUserOperation(e,t,r){return(0,L.strictMask)(await S(this,n,"m",f).call(this,{address:e,method:M.EthMethod.PatchUserOperation,params:(0,L.toJson)([t]),expectSync:!0,chainId:(0,j.toCaipChainId)(j.KnownCaipNamespace.Eip155,r.chainId)}),M.EthUserOperationPatchStruct)}async signUserOperation(e,t,r){return(0,L.strictMask)(await S(this,n,"m",f).call(this,{address:e,method:M.EthMethod.SignUserOperation,params:(0,L.toJson)([t]),chainId:(0,j.toCaipChainId)(j.KnownCaipNamespace.Eip155,r.chainId)}),M.EthBytesStruct)}exportAccount(e){throw new Error("Exporting accounts from snaps is not supported.")}async removeAccount(e){const{account:t,snapId:r}=S(this,n,"m",_).call(this,e);S(this,i,"f").delete(r,t.id);try{await S(this,s,"f").withSnapId(r).deleteAccount(t.id)}catch(t){console.error(`Account '${e}' may not have been removed from snap '${r}':`,t)}}getAccountByAddress(e){return this.listAccounts().find((({address:t})=>(0,L.equalsIgnoreCase)(t,e)))}listAccounts(){return[...S(this,i,"f").values()].map((({account:e,snapId:t})=>{const r=S(this,n,"m",b).call(this,t);return{...e,address:e.address.toLowerCase(),metadata:{name:"",importTime:0,keyring:{type:this.type},...r!==undefined&&{snap:r}}}}))}}r.SnapKeyring=D,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,n=new WeakSet,c=async function(e,t){(0,I.assert)(t,M.AccountCreatedEventStruct);const{account:r,accountNameSuggestion:n,displayConfirmation:s}=t.params;if(await S(this,o,"f").addressExists(r.address.toLowerCase()))throw new Error(`Account address '${r.address}' already exists`);if(S(this,i,"f").has(e,r.id))throw new Error(`Account '${r.id}' already exists`);return await S(this,o,"f").addAccount(r.address.toLowerCase(),e,(async t=>{t&&(S(this,i,"f").set(r.id,{account:r,snapId:e}),await S(this,o,"f").saveState())}),n,s),null},l=async function(e,t){(0,I.assert)(t,M.AccountUpdatedEventStruct);const{account:r}=t.params,{account:n}=S(this,i,"f").get(e,r.id)??(0,L.throwError)(`Account '${r.id}' not found`);if(!(0,L.equalsIgnoreCase)(n.address,r.address))throw new Error(`Cannot change address of account '${r.id}'`);return S(this,i,"f").set(r.id,{account:r,snapId:e}),await S(this,o,"f").saveState(),null},u=async function(e,t){(0,I.assert)(t,M.AccountDeletedEventStruct);const{id:r}=t.params,n=S(this,i,"f").get(e,r);if(n===undefined)return null;const{account:{address:s}}=n;return await S(this,o,"f").removeAccount(s.toLowerCase(),e,(async e=>{e&&await S(this,o,"f").saveState()})),null},d=async function(e,t){(0,I.assert)(t,M.RequestApprovedEventStruct);const{id:r,result:n}=t.params,{promise:s}=S(this,a,"f").get(e,r)??(0,L.throwError)(`Request '${r}' not found`);return S(this,a,"f").delete(e,r),s.resolve(n),null},h=async function(e,t){(0,I.assert)(t,M.RequestRejectedEventStruct);const{id:r}=t.params,{promise:n}=S(this,a,"f").get(e,r)??(0,L.throwError)(`Request '${r}' not found`);return S(this,a,"f").delete(e,r),n.reject(new Error("Request rejected by user or snap.")),null},f=async function({address:e,method:t,params:r,chainId:s="",expectSync:i=!1}){const{account:a,snapId:o}=S(this,n,"m",_).call(this,e);if(!S(this,n,"m",p).call(this,a,t))throw new Error(`Method '${t}' not supported for account ${a.address}`);const c=(0,A.v4)(),l=S(this,n,"m",m).call(this,c,o),u=await S(this,n,"m",g).call(this,{snapId:o,requestId:c,account:a,method:t,params:r,chainId:s});if(i&&u.pending)throw new Error(`Request '${c}' to snap '${o}' is pending and expectSync is true.`);return u.pending?((u.redirect?.message||u.redirect?.url)&&await S(this,n,"m",v).call(this,u.redirect,o),l.promise):S(this,n,"m",y).call(this,u,c,o)},p=function(e,t){return e.methods.includes(t)},m=function(e,t){const r=new O.DeferredPromise;return S(this,a,"f").set(e,{promise:r,snapId:t}),r},g=async function({snapId:e,requestId:t,account:r,method:n,params:i,chainId:o}){try{const a={id:t,scope:o,account:r.id,request:{method:n,...i!==undefined&&{params:i}}};return(0,N.projectLogger)("Submit Snap request: ",a),await S(this,s,"f").withSnapId(e).submitRequest(a)}catch(r){throw(0,N.projectLogger)("Snap Request failed: ",{requestId:t}),S(this,a,"f").delete(e,t),r}},y=function(e,t,r){return S(this,a,"f").delete(r,t),e.result},v=async function(e,t){const{message:r="",url:s=""}=e;s&&S(this,n,"m",w).call(this,s,t),await S(this,o,"f").redirectUser(t,s,r)},w=function(e,t){const{origin:r}=new URL(e),i=S(this,s,"f").getController().get(t);if(!i)throw new Error(`Snap '${t}' not found.`);if(!S(this,n,"m",k).call(this,i).includes(r))throw new Error(`Redirect URL domain '${r}' is not an allowed origin by snap '${t}'`)},_=function(e){return[...S(this,i,"f").values()].find((({account:t})=>(0,L.equalsIgnoreCase)(t.address,e)))??(0,L.throwError)(`Account '${e}' not found`)},b=function(e){const t=S(this,s,"f").getController().get(e);return t?{id:e,name:t.manifest.proposedName,enabled:t.enabled}:undefined},k=function(e){return e.manifest.initialPermissions["endowment:keyring"]?.allowedOrigins??[]},D.type=r.SNAP_KEYRING_TYPE}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapKeyring.js"}],[1429,{"./KeyringSnapControllerClient":1426,"./SnapKeyring":1428,"./types":1431},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./types"),r),s(e("./SnapKeyring"),r),s(e("./KeyringSnapControllerClient"),r)}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/index.js"}],[143,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:26,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=26;try{const e=t.data;t.data=function(e){if(!e.KeyringController||!e.PreferencesController)return e;if(!e.KeyringController.walletNicknames)return e;return e.PreferencesController.identities=Object.keys(e.KeyringController.walletNicknames).reduce(((t,r)=>(t[r]={name:e.KeyringController.walletNicknames[r],address:r},t)),{}),delete e.KeyringController.walletNicknames,e}(e)}catch(e){return console.warn(`MetaMask Migration #26${e.stack}`),Promise.reject(e)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/026.js"}],[1430,{"@metamask/utils":2717},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("eth-snap-keyring")}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/logger.js"}],[1431,{"@metamask/utils":2717,superstruct:4808},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapMessageStruct=void 0;const n=e("@metamask/utils"),s=e("superstruct");r.SnapMessageStruct=(0,s.object)({method:(0,s.string)(),params:(0,s.optional)((0,s.union)([(0,s.array)(n.JsonStruct),(0,s.record)((0,s.string)(),n.JsonStruct)]))})}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/types.js"}],[1432,{superstruct:4808},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.equalsIgnoreCase=r.throwError=r.ensureDefined=r.toJson=r.unique=r.strictMask=void 0;const n=e("superstruct");r.strictMask=function(e,t,r){return(0,n.assert)(e,t,r),e},r.unique=function(e){return[...new Set(e)]},r.toJson=function(e){return JSON.parse(JSON.stringify(e))},r.ensureDefined=function(e){if(e===undefined)throw new Error("Argument is undefined")},r.throwError=function(e){throw new Error(e)},r.equalsIgnoreCase=function(e,t){return e.toLowerCase()===t.toLowerCase()}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/util.js"}],[1433,{"./nil.js":1436,"./parse.js":1437,"./stringify.js":1441,"./v1.js":1442,"./v3.js":1443,"./v4.js":1445,"./v5.js":1446,"./validate.js":1447,"./version.js":1448},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return c.default}});var n=h(e("./v1.js")),s=h(e("./v3.js")),i=h(e("./v4.js")),a=h(e("./v5.js")),o=h(e("./nil.js")),c=h(e("./version.js")),l=h(e("./validate.js")),u=h(e("./stringify.js")),d=h(e("./parse.js"));function h(e){return e&&e.__esModule?e:{default:e}}}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/index.js"}],[1434,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return 14+(e+64>>>9<<4)+1}function s(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function i(e,t,r,n,i,a){return s((o=s(s(t,e),s(n,a)))<<(c=i)|o>>>32-c,r);var o,c}function a(e,t,r,n,s,a,o){return i(t&r|~t&n,e,t,s,a,o)}function o(e,t,r,n,s,a,o){return i(t&n|r&~n,e,t,s,a,o)}function c(e,t,r,n,s,a,o){return i(t^r^n,e,t,s,a,o)}function l(e,t,r,n,s,a,o){return i(r^(t|~n),e,t,s,a,o)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let s=0;s<r;s+=8){const r=e[s>>5]>>>s%32&255,i=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,i=-271733879,u=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const n=r,h=i,f=u,p=d;r=a(r,i,u,d,e[t],7,-680876936),d=a(d,r,i,u,e[t+1],12,-389564586),u=a(u,d,r,i,e[t+2],17,606105819),i=a(i,u,d,r,e[t+3],22,-1044525330),r=a(r,i,u,d,e[t+4],7,-176418897),d=a(d,r,i,u,e[t+5],12,1200080426),u=a(u,d,r,i,e[t+6],17,-1473231341),i=a(i,u,d,r,e[t+7],22,-45705983),r=a(r,i,u,d,e[t+8],7,1770035416),d=a(d,r,i,u,e[t+9],12,-1958414417),u=a(u,d,r,i,e[t+10],17,-42063),i=a(i,u,d,r,e[t+11],22,-1990404162),r=a(r,i,u,d,e[t+12],7,1804603682),d=a(d,r,i,u,e[t+13],12,-40341101),u=a(u,d,r,i,e[t+14],17,-1502002290),i=a(i,u,d,r,e[t+15],22,1236535329),r=o(r,i,u,d,e[t+1],5,-165796510),d=o(d,r,i,u,e[t+6],9,-1069501632),u=o(u,d,r,i,e[t+11],14,643717713),i=o(i,u,d,r,e[t],20,-373897302),r=o(r,i,u,d,e[t+5],5,-701558691),d=o(d,r,i,u,e[t+10],9,38016083),u=o(u,d,r,i,e[t+15],14,-660478335),i=o(i,u,d,r,e[t+4],20,-405537848),r=o(r,i,u,d,e[t+9],5,568446438),d=o(d,r,i,u,e[t+14],9,-1019803690),u=o(u,d,r,i,e[t+3],14,-187363961),i=o(i,u,d,r,e[t+8],20,1163531501),r=o(r,i,u,d,e[t+13],5,-1444681467),d=o(d,r,i,u,e[t+2],9,-51403784),u=o(u,d,r,i,e[t+7],14,1735328473),i=o(i,u,d,r,e[t+12],20,-1926607734),r=c(r,i,u,d,e[t+5],4,-378558),d=c(d,r,i,u,e[t+8],11,-2022574463),u=c(u,d,r,i,e[t+11],16,1839030562),i=c(i,u,d,r,e[t+14],23,-35309556),r=c(r,i,u,d,e[t+1],4,-1530992060),d=c(d,r,i,u,e[t+4],11,1272893353),u=c(u,d,r,i,e[t+7],16,-155497632),i=c(i,u,d,r,e[t+10],23,-1094730640),r=c(r,i,u,d,e[t+13],4,681279174),d=c(d,r,i,u,e[t],11,-358537222),u=c(u,d,r,i,e[t+3],16,-722521979),i=c(i,u,d,r,e[t+6],23,76029189),r=c(r,i,u,d,e[t+9],4,-640364487),d=c(d,r,i,u,e[t+12],11,-421815835),u=c(u,d,r,i,e[t+15],16,530742520),i=c(i,u,d,r,e[t+2],23,-995338651),r=l(r,i,u,d,e[t],6,-198630844),d=l(d,r,i,u,e[t+7],10,1126891415),u=l(u,d,r,i,e[t+14],15,-1416354905),i=l(i,u,d,r,e[t+5],21,-57434055),r=l(r,i,u,d,e[t+12],6,1700485571),d=l(d,r,i,u,e[t+3],10,-1894986606),u=l(u,d,r,i,e[t+10],15,-1051523),i=l(i,u,d,r,e[t+1],21,-2054922799),r=l(r,i,u,d,e[t+8],6,1873313359),d=l(d,r,i,u,e[t+15],10,-30611744),u=l(u,d,r,i,e[t+6],15,-1560198380),i=l(i,u,d,r,e[t+13],21,1309151649),r=l(r,i,u,d,e[t+4],6,-145523070),d=l(d,r,i,u,e[t+11],10,-1120210379),u=l(u,d,r,i,e[t+2],15,718787259),i=l(i,u,d,r,e[t+9],21,-343485551),r=s(r,n),i=s(i,h),u=s(u,f),d=s(d,p)}return[r,i,u,d]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};r.default=u}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/md5-browser.js"}],[1435,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};r.default=n}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/native-browser.js"}],[1436,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/nil.js"}],[1437,{"./validate.js":1447},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/parse.js"}],[1438,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/regex.js"}],[1439,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(s)};const s=new Uint8Array(16)}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/rng-browser.js"}],[144,{"@metamask/transaction-controller":2624,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:27,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=27;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.filter((e=>e.status!==s.TransactionStatus.rejected))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/027.js"}],[1440,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function s(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,a=Math.ceil(i/16),o=new Array(a);for(let t=0;t<a;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];o[t]=r}o[a-1][14]=8*(e.length-1)/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=o[e][t];for(let e=16;e<80;++e)i[e]=s(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let a=r[0],c=r[1],l=r[2],u=r[3],d=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),o=s(a,5)+n(r,c,l,u)+d+t[r]+i[e]>>>0;d=u,u=l,l=s(c,30)>>>0,c=a,a=o}r[0]=r[0]+a>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+u>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/sha1-browser.js"}],[1441,{"./validate.js":1447},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=a;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function a(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}var o=function(e,t=0){const r=a(e,t);if(!(0,s.default)(r))throw TypeError("Stringified UUID is invalid");return r};r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/stringify.js"}],[1442,{"./rng.js":1439,"./stringify.js":1441},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./rng.js"))&&n.__esModule?n:{default:n},i=e("./stringify.js");let a,o,c=0,l=0;var u=function(e,t,r){let n=t&&r||0;const u=t||new Array(16);let d=(e=e||{}).node||a,h=e.clockseq!==undefined?e.clockseq:o;if(null==d||null==h){const t=e.random||(e.rng||s.default)();null==d&&(d=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=o=16383&(t[6]<<8|t[7]))}let f=e.msecs!==undefined?e.msecs:Date.now(),p=e.nsecs!==undefined?e.nsecs:l+1;const m=f-c+(p-l)/1e4;if(m<0&&e.clockseq===undefined&&(h=h+1&16383),(m<0||f>c)&&e.nsecs===undefined&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=p,o=h,f+=122192928e5;const g=(1e4*(268435455&f)+p)%4294967296;u[n++]=g>>>24&255,u[n++]=g>>>16&255,u[n++]=g>>>8&255,u[n++]=255&g;const y=f/4294967296*1e4&268435455;u[n++]=y>>>8&255,u[n++]=255&y,u[n++]=y>>>24&15|16,u[n++]=y>>>16&255,u[n++]=h>>>8|128,u[n++]=255&h;for(let e=0;e<6;++e)u[n+e]=d[e];return t||(0,i.unsafeStringify)(u)};r.default=u}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v1.js"}],[1443,{"./md5.js":1434,"./v35.js":1444},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),s=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v3",48,s.default);r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v3.js"}],[1444,{"./parse.js":1437,"./stringify.js":1441},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,t,r){function n(e,n,a,o){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,i.default)(n)),16!==(null===(c=n)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(n),l.set(e,n.length),l=r(l),l[6]=15&l[6]|t,l[8]=63&l[8]|128,a){o=o||0;for(let e=0;e<16;++e)a[o+e]=l[e];return a}return(0,s.unsafeStringify)(l)}try{n.name=e}catch(e){}return n.DNS=a,n.URL=o,n};var n,s=e("./stringify.js"),i=(n=e("./parse.js"))&&n.__esModule?n:{default:n};const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=a;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v35.js"}],[1445,{"./native.js":1435,"./rng.js":1439,"./stringify.js":1441},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("./native.js")),s=a(e("./rng.js")),i=e("./stringify.js");function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const a=(e=e||{}).random||(e.rng||s.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=a[e];return t}return(0,i.unsafeStringify)(a)};r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v4.js"}],[1446,{"./sha1.js":1440,"./v35.js":1444},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),s=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v5",80,s.default);r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v5.js"}],[1447,{"./regex.js":1438},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./regex.js"))&&n.__esModule?n:{default:n};var i=function(e){return"string"==typeof e&&s.default.test(e)};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/validate.js"}],[1448,{"./validate.js":1447},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/version.js"}],[145,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:28,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=28;const r=function(e){const t=e;if(t.PreferencesController&&t.PreferencesController.tokens&&t.PreferencesController.identities){const{identities:e,tokens:r}=t.PreferencesController;t.PreferencesController.accountTokens={},Object.keys(e).forEach((e=>{t.PreferencesController.accountTokens[e]={mainnet:r}})),t.PreferencesController.tokens=[]}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/028.js"}],[1453,{"./trezor-bridge":1454,"./trezor-connect-bridge":1455,"./trezor-keyring":1456},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./trezor-keyring"),r),s(e("./trezor-bridge"),r),s(e("./trezor-connect-bridge"),r)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/index.js"}],[1454,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-bridge.js"}],[1455,{"@trezor/connect-web":3e3},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorConnectBridge=void 0;const a=i(e("@trezor/connect-web"));r.TrezorConnectBridge=class{constructor(){this.trezorConnectInitiated=!1}async init(e){a.default.on(a.DEVICE_EVENT,(e=>{var t;e.type===a.DEVICE.CONNECT&&(this.model=null===(t=e.payload.features)||void 0===t?void 0:t.model)})),this.trezorConnectInitiated||(await a.default.init(e),this.trezorConnectInitiated=!0)}dispose(){return a.default.dispose(),Promise.resolve()}getPublicKey(e){return a.default.getPublicKey(e)}ethereumSignTransaction(e){return a.default.ethereumSignTransaction(e)}ethereumSignMessage(e){return a.default.ethereumSignMessage(e)}ethereumSignTypedData(e){return a.default.ethereumSignTypedData(e)}}}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-connect-bridge.js"}],[1456,{"@ethereumjs/tx":438,"@ethereumjs/util":450,"@trezor/connect-plugin-ethereum":2992,buffer:3497,events:3786,hdkey:4084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n,s,i,a,o,c,l=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&l(t,e,r);return u(t,e),t},h=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorKeyring=r.TREZOR_CONNECT_MANIFEST=void 0;const p=e("events"),m=d(e("@ethereumjs/util")),g=f(e("hdkey")),y=e("@ethereumjs/tx"),v=e("@trezor/connect-plugin-ethereum"),w="m/44'/60'/0'/0",_={[w]:!0,"m/44'/60'/0'":!0,"m/44'/1'/0'/0":!0},b="Trezor Hardware",k=1e3;async function T(e){return new Promise((t=>setTimeout(t,e)))}function S(e){return"function"==typeof e.getChainId}r.TREZOR_CONNECT_MANIFEST={email:"support@metamask.io",appUrl:"https://metamask.io"};class E extends p.EventEmitter{constructor({bridge:e}){if(super(),n.add(this),this.type=b,this.accounts=[],this.hdk=new g.default,this.hdPath=w,this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={},!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}getModel(){return this.bridge.model}init(){return this.bridge.init({manifest:r.TREZOR_CONNECT_MANIFEST,lazyLoad:!0})}async destroy(){return this.bridge.dispose()}async serialize(){return Promise.resolve({hdPath:this.hdPath,accounts:this.accounts,page:this.page,paths:this.paths,perPage:this.perPage,unlockedAccount:this.unlockedAccount})}async deserialize(e={}){var t,r,n,s;return this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:w,this.accounts=null!==(r=e.accounts)&&void 0!==r?r:[],this.page=null!==(n=e.page)&&void 0!==n?n:0,this.perPage=null!==(s=e.perPage)&&void 0!==s?s:5,Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}async unlock(){return this.isUnlocked()?Promise.resolve("already unlocked"):new Promise(((e,r)=>{this.bridge.getPublicKey({path:this.hdPath,coin:"ETH"}).then((n=>{var s;n.success?(this.hdk.publicKey=t.from(n.payload.publicKey,"hex"),this.hdk.chainCode=t.from(n.payload.chainCode,"hex"),e("just unlocked")):r(new Error((null===(s=n.payload)||void 0===s?void 0:s.error)||"Unknown error"))})).catch((e=>{r(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}setAccountToUnlock(e){this.unlockedAccount=parseInt(String(e),10)}async addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((r=>{const s=this.unlockedAccount,i=s+e;for(let e=s;e<i;e++){const t=h(this,n,"m",o).call(this,"m",e);this.accounts.includes(t)||(this.accounts=[...this.accounts,t]),this.page=0}t(this.accounts)})).catch((e=>{r(e)}))}))}async getFirstPage(){return this.page=0,h(this,n,"m",s).call(this,1)}async getNextPage(){return h(this,n,"m",s).call(this,1)}async getPreviousPage(){return h(this,n,"m",s).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){return S(r)?h(this,n,"m",i).call(this,e,r.getChainId(),r,(e=>(r.v=t.from(e.v,"hex"),r.r=t.from(e.r,"hex"),r.s=t.from(e.s,"hex"),r))):h(this,n,"m",i).call(this,e,Number(r.common.chainId()),r,(e=>{const t=r.toJSON();return t.type=r.type,t.v=m.addHexPrefix(e.v),t.r=m.addHexPrefix(e.r),t.s=m.addHexPrefix(e.s),y.TransactionFactory.fromTxData(t,{common:r.common,freeze:Object.isFrozen(r)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){return new Promise(((r,s)=>{this.unlock().then((i=>{setTimeout((()=>{this.bridge.ethereumSignMessage({path:h(this,n,"m",c).call(this,e),message:m.stripHexPrefix(t),hex:!0}).then((t=>{var n;if(t.success){t.payload.address!==m.toChecksumAddress(e)&&s(new Error("signature doesnt match the right address"));const n=`0x${t.payload.signature}`;r(n)}else s(new Error((null===(n=t.payload)||void 0===n?void 0:n.error)||"Unknown error"))})).catch((e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}),"just unlocked"===i?k:0)})).catch((e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}async signTypedData(e,t,{version:r}){var s,i;const a=(0,v.transformTypedData)(t,"V4"===r),{types:o,message:l={},domain:u={},primaryType:d,domain_separator_hash:f,message_hash:p}=a,g=await this.unlock();await T("just unlocked"===g?k:0);const y=await this.bridge.ethereumSignTypedData({path:h(this,n,"m",c).call(this,e),data:{types:Object.assign(Object.assign({},o),{EIP712Domain:null!==(s=o.EIP712Domain)&&void 0!==s?s:[]}),message:l,domain:u,primaryType:d},metamask_v4_compat:!0,domain_separator_hash:f,message_hash:null!=p?p:""});if(y.success){if(m.toChecksumAddress(e)!==y.payload.address)throw new Error("signature doesnt match the right address");return y.payload.signature}throw new Error((null===(i=y.payload)||void 0===i?void 0:i.error)||"Unknown error")}async exportAccount(){return Promise.reject(new Error("Not supported on this device"))}forgetDevice(){this.accounts=[],this.hdk=new g.default,this.page=0,this.unlockedAccount=0,this.paths={}}setHdPath(e){if(!_[e])throw new Error(`The setHdPath method does not support setting HD Path to ${e}`);this.hdPath!==e&&(this.hdk=new g.default,this.accounts=[],this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={}),this.hdPath=e}}r.TrezorKeyring=E,n=new WeakSet,s=async function(e){return this.page+=e,this.page<=0&&(this.page=1),new Promise(((e,t)=>{this.unlock().then((t=>{const r=(this.page-1)*this.perPage,s=r+this.perPage,i=[];for(let e=r;e<s;e++){const t=h(this,n,"m",o).call(this,"m",e);i.push({address:t,balance:null,index:e}),this.paths[m.toChecksumAddress(t)]=e}e(i)})).catch((e=>{t(e)}))}))},i=async function(e,t,r,s){var i,o;let l;l=S(r)?{to:h(this,n,"m",a).call(this,r.to),value:h(this,n,"m",a).call(this,r.value),data:h(this,n,"m",a).call(this,r.data),chainId:t,nonce:h(this,n,"m",a).call(this,r.nonce),gasLimit:h(this,n,"m",a).call(this,r.gasLimit),gasPrice:h(this,n,"m",a).call(this,r.gasPrice)}:Object.assign(Object.assign({},r.toJSON()),{chainId:t,to:h(this,n,"m",a).call(this,m.toBuffer(r.to))});try{const t=await this.unlock();await T("just unlocked"===t?k:0);const r=await this.bridge.ethereumSignTransaction({path:h(this,n,"m",c).call(this,e),transaction:l});if(r.success){const t=s(r.payload),n=m.toChecksumAddress(m.addHexPrefix(t.getSenderAddress().toString("hex")));if(n!==m.toChecksumAddress(e))throw new Error("signature doesn't match the right address");return t}throw new Error((null===(i=r.payload)||void 0===i?void 0:i.error)||"Unknown error")}catch(e){throw new Error(null!==(o=null==e?void 0:e.toString())&&void 0!==o?o:"Unknown error")}},a=function(e){return m.bufferToHex(e).toString()},o=function(e,t){const r=this.hdk.derive(`${e}/${t}`),n=m.publicToAddress(r.publicKey,!0).toString("hex");return m.toChecksumAddress(`0x${n}`)},c=function(e){const t=m.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===h(this,n,"m",o).call(this,"m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${r}`},E.type=b}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-keyring.js"}],[146,{"./fail-tx":260,"@metamask/transaction-controller":2624},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("@metamask/transaction-controller"),i=(n=e("./fail-tx"))&&n.__esModule?n:{default:n};r.default={version:29,migrate:(0,i.default)(29,"Stuck in approved state for too long.",(e=>{const t=e.status===s.TransactionStatus.approved,r=e.submittedTime,n=Date.now();return t&&n-r>432e5}))}}}},{package:"$root$",file:"app/scripts/migrations/029.js"}],[147,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:30,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=30;const r=function(e){const t=e;if(e.PreferencesController){const{frequentRpcListDetail:e}=t.PreferencesController;e&&(e.forEach(((t,r)=>{Boolean(t.chainId)&&Number.isNaN(parseInt(t.chainId))&&delete e[r].chainId})),t.PreferencesController.frequentRpcListDetail=e)}e.NetworkController&&(t.NetworkController.network&&Number.isNaN(parseInt(t.NetworkController.network))&&delete t.NetworkController.network,t.NetworkController.provider&&t.NetworkController.provider.chainId&&Number.isNaN(parseInt(t.NetworkController.provider.chainId))&&delete t.NetworkController.provider.chainId);return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/030.js"}],[148,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:31,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=31;const r=function(e){const{KeyringController:t,PreferencesController:r}=e;if(t&&r){const{vault:e}=t;r.completedOnboarding=Boolean(e)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/031.js"}],[149,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:32,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=32;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const{betaUI:e}=t.featureFlags||{};t.completedUiMigration=e}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/032.js"}],[150,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:33,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=33;const r=function(e){const t=e;e.NoticeController&&delete t.NoticeController;return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/033.js"}],[151,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:34,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=34;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};e.privacyMode||void 0!==t.migratedPrivacyMode||(t.migratedPrivacyMode=!0,e.privacyMode=!0)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/034.js"}],[1510,{"@metamask/safe-event-emitter":2014,"@metamask/utils":1523,"readable-stream":4706},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@metamask/safe-event-emitter"),i=(n=s)&&n.__esModule?n:{default:n},a=e("@metamask/utils"),o=e("readable-stream");r.createStreamMiddleware=function(e={}){const t={},r=new(0,o.Duplex)({objectMode:!0,read:()=>{},write:function(r,i,o){let c=null;try{!a.hasProperty.call(void 0,r,"id")?function(r){e?.retryOnMessage&&r.method===e.retryOnMessage&&Object.values(t).forEach((({req:e,retryCount:r=0})=>{if(!e.id)return;if(r>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${e.id}"`);const n=t[e.id];n&&(n.retryCount=r+1),s(e)}));n.emit("notification",r)}(r):function(e){const{id:r}=e;if(null===r)return;const n=t[r];if(!n)return void console.warn(`StreamMiddleware - Unknown response id "${r}"`);delete t[r],Object.assign(n.res,e),setTimeout(n.end)}(r)}catch(e){c=e}o(c)}}),n=new(0,i.default);return{events:n,middleware:(e,r,n,i)=>{t[e.id]={req:e,res:r,next:n,end:i},s(e)},stream:r};function s(e){r.push(e)}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/chunk-CUV6EOT3.js"}],[1511,{"readable-stream":4706},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("readable-stream");r.createEngineStream=function(e){if(!e?.engine)throw new Error("Missing engine parameter!");const{engine:t}=e,r=new(0,n.Duplex)({objectMode:!0,read:()=>{},write:function(e,n,s){t.handle(e,((e,t)=>{r.push(t)})),s()}});return t.on&&t.on("notification",(e=>{r.push(e)})),r}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/chunk-IDTAZSDC.js"}],[1512,{"./chunk-CUV6EOT3.js":1510,"./chunk-IDTAZSDC.js":1511},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-IDTAZSDC.js"),s=e("./chunk-CUV6EOT3.js");r.createEngineStream=n.createEngineStream,r.createStreamMiddleware=s.createStreamMiddleware}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/index.js"}],[1513,{"./errors.cjs":1521,"@metamask/superstruct":2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/assert.cjs"}],[1514,{"./assert.cjs":1513,"@metamask/superstruct":2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,n.pattern)(e,o)}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/base64.cjs"}],[1515,{"./assert.cjs":1513,"./hex.cjs":1522,"@scure/base":2775,buffer:3497},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const l=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(u(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=l(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function f(e){d(e);const t=h(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),i=t-(t<o?a:c),l=s-(s<o?a:c);n[e]=16*i+l}return n}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function y(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function v(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):y(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=u,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=f,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=f(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),n.base64.encode(e)},r.hexToBytes=p,r.bigIntToBytes=m,r.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},r.valueToBytes=v,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=v(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/bytes.cjs"}],[1516,{"@metamask/superstruct":2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function s(e){return(0,n.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155",e.Wallet="wallet"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,n.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=s,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,n.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,n.is)(e,r.CaipAccountAddressStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/caip-types.cjs"}],[1517,{"./base64.cjs":1514,"@metamask/superstruct":2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),s=e("./base64.cjs");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/checksum.cjs"}],[1518,{"./assert.cjs":1513,"./bytes.cjs":1515,"./hex.cjs":1522,"@metamask/superstruct":2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),a.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),o,Number),l=(0,n.coerce)((0,n.bigint)(),o,BigInt),u=((0,n.union)([a.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(a.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/coercers.cjs"}],[1519,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class o{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=o;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/collections.cjs"}],[152,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:35,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=35,t.data=function(e){e.PreferencesController&&e.PreferencesController.seedWords!==undefined&&delete e.PreferencesController.seedWords;return e}(t.data),t}}}}},{package:"$root$",file:"app/scripts/migrations/035.js"}],[1520,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[1521,{"./misc.cjs":1527,"pony-cause":4431},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const n=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=a,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,s.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/errors.cjs"}],[1522,{"./assert.cjs":1513,"./bytes.cjs":1515,"@metamask/superstruct":2599,"@noble/hashes/sha3":2757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,n.is)(e,r.HexStruct)}function c(e){return(0,n.is)(e,r.StrictHexStruct)}function l(e){(0,i.assert)((0,n.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=o[t];return(0,i.assert)((0,n.is)(r,(0,n.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function u(e){return!!(0,n.is)(e,r.HexChecksumAddressStruct)&&l(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=o,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,n.is)(e,r.HexAddressStruct)||u(e)},r.getChecksumAddress=l,r.isValidChecksumAddress=u,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/hex.cjs"}],[1523,{"./assert.cjs":1513,"./base64.cjs":1514,"./bytes.cjs":1515,"./caip-types.cjs":1516,"./checksum.cjs":1517,"./coercers.cjs":1518,"./collections.cjs":1519,"./encryption-types.cjs":1520,"./errors.cjs":1521,"./hex.cjs":1522,"./json.cjs":1524,"./keyring.cjs":1525,"./logging.cjs":1526,"./misc.cjs":1527,"./number.cjs":1528,"./opaque.cjs":1529,"./promise.cjs":1530,"./time.cjs":1531,"./transaction-types.cjs":1532,"./versions.cjs":1533},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert.cjs"),r),s(e("./base64.cjs"),r),s(e("./bytes.cjs"),r),s(e("./caip-types.cjs"),r),s(e("./checksum.cjs"),r),s(e("./coercers.cjs"),r),s(e("./collections.cjs"),r),s(e("./encryption-types.cjs"),r),s(e("./errors.cjs"),r),s(e("./hex.cjs"),r),s(e("./json.cjs"),r),s(e("./keyring.cjs"),r),s(e("./logging.cjs"),r),s(e("./misc.cjs"),r),s(e("./number.cjs"),r),s(e("./opaque.cjs"),r),s(e("./promise.cjs"),r),s(e("./time.cjs"),r),s(e("./transaction-types.cjs"),r),s(e("./versions.cjs"),r)}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/index.cjs"}],[1524,{"./assert.cjs":1513,"./misc.cjs":1527,"@metamask/superstruct":2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function o(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}r.object=e=>(0,n.object)(e),r.exactOptional=o;function c(e){return(0,n.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,n.integer)(),message:(0,n.string)(),data:o(r.JsonStruct),stack:o((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/json.cjs"}],[1525,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/keyring.cjs"}],[1526,{debug:3642},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/logging.cjs"}],[1527,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/misc.cjs"}],[1528,{"./assert.cjs":1513,"./hex.cjs":1522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert.cjs"),s=e("./hex.cjs");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/number.cjs"}],[1529,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/opaque.cjs"}],[153,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:36,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=36;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};void 0!==e.privacyMode&&delete e.privacyMode}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/036.js"}],[1530,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/promise.cjs"}],[1531,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/time.cjs"}],[1532,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[1533,{"./assert.cjs":1513,"@metamask/superstruct":2599,semver:4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream>@metamask/utils",file:"node_modules/@metamask/json-rpc-middleware-stream/node_modules/@metamask/utils/dist/versions.cjs"}],[154,{"@metamask/controller-utils":1231,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/controller-utils");r.default={version:37,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=37;const r=t.data;return t.data=function(e){if(e.AddressBookController){const t=e.AddressBookController.addressBook,r=new Set,n={};Object.values(t).forEach((e=>{r.add(e.chainId)}));for(const e of r.values()){n[e]={};for(const r in t)t[r].chainId===e&&(t[r].isEns=!1,(0,s.normalizeEnsName)(t[r].name)&&(t[r].isEns=!0),n[e][r]=t[r])}e.AddressBookController.addressBook=n}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/037.js"}],[155,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:38,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=38;const r=t.data;return t.data=function(e){const{ABTestController:t={}}=e,{abTests:r={}}=t;if(r.fullScreenVsPopup)return e;return{...e,ABTestController:{...t,abTests:{...r,fullScreenVsPopup:"control"}}}}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/038.js"}],[156,{"../../../shared/modules/hexstring-utils":5e3,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/modules/hexstring-utils");const i="0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359",a="DAI",o="SAI";function c(e={}){return e&&"object"==typeof e&&e.symbol===a&&(0,s.toChecksumHexAddress)(e.address)===i}r.default={version:39,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=39;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.tokens||[];if(Array.isArray(e))for(const t of e)c(t)&&(t.symbol=o);const r=t.accountTokens||{};if(r&&"object"==typeof r)for(const e of Object.keys(r)){const t=r[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=t[e];if(Array.isArray(r))for(const e of r)c(e)&&(e.symbol=o)}}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/039.js"}],[157,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:40,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=40;const r=t.data;return t.data=function(e){return delete e.ProviderApprovalController,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/040.js"}],[158,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:41,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=41;const r=t.data;return t.data=function(e){e.PreferencesController&&e.PreferencesController.preferences&&(e.PreferencesController.preferences.autoLockTimeLimit=e.PreferencesController.preferences.autoLogoutTimeLimit,delete e.PreferencesController.preferences.autoLogoutTimeLimit);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/041.js"}],[159,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:42,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=42;const r=t.data;return t.data=function(e){e.AppStateController?e.AppStateController.connectedStatusPopoverHasBeenShown=!1:e.AppStateController={connectedStatusPopoverHasBeenShown:!1};return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/042.js"}],[16,{"../../../shared/constants/metametrics":4955,"../../../shared/modules/hexstring-utils":5e3,"@metamask/base-controller":1226,"@metamask/controller-utils":1231,"@metamask/message-manager":1697,"@metamask/utils":2717,buffer:3497,events:3786,loglevel:4300},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.isEIP1024EncryptedMessage=r.getDefaultState=r.default=void 0;var n=d(e("events")),s=d(e("loglevel")),i=e("@metamask/message-manager"),a=e("@metamask/base-controller"),o=e("@metamask/controller-utils"),c=e("@metamask/utils"),l=e("../../../shared/constants/metametrics"),u=e("../../../shared/modules/hexstring-utils");function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f={unapprovedDecryptMsgs:{persist:!1,anonymous:!1},unapprovedDecryptMsgCount:{persist:!1,anonymous:!1}},p=e=>!!((0,c.isObject)(e.data)&&(0,c.hasProperty)(e.data,"version")&&(0,c.hasProperty)(e.data,"nonce")&&(0,c.hasProperty)(e.data,"ephemPublicKey")&&(0,c.hasProperty)(e.data,"ciphertext"));r.isEIP1024EncryptedMessage=p;const m=()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0});r.getDefaultState=m;class g extends a.BaseController{constructor({getState:e,metricsEvent:t,messenger:r}){super({metadata:f,messenger:r,name:"DecryptMessageController",state:{unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}}),h(this,"hub",void 0),h(this,"_getState",void 0),h(this,"_metricsEvent",void 0),h(this,"_decryptMessageManager",void 0),this._getState=e,this._metricsEvent=t,this.hub=new n.default,this._decryptMessageManager=new i.DecryptMessageManager(undefined,undefined,undefined,["decrypted"]),this._decryptMessageManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._decryptMessageManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e)})),this._subscribeToMessageState(this._decryptMessageManager,((e,t,r)=>{e.unapprovedDecryptMsgs=t,e.unapprovedDecryptMsgCount=r}))}get unapprovedDecryptMsgCount(){return this._decryptMessageManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0})))}clearUnapproved(){this._decryptMessageManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}async newRequestDecryptMessage(e,t){return this._decryptMessageManager.addUnapprovedMessageAsync(e,t)}async decryptMessage(e){const t=e.metamaskId;try{const r=await this._decryptMessageManager.approveMessage(e);if(r.data=this._parseMessageData(r.data),!p(r))throw new Error("Invalid encrypted data.");const n=await this.messagingSystem.call("KeyringController:decryptMessage",r);this._decryptMessageManager.setMessageStatusAndResult(t,n,"decrypted"),this._acceptApproval(t)}catch(e){throw s.default.info("MetaMaskController - eth_decrypt failed.",e),this._cancelAbstractMessage(this._decryptMessageManager,t),e}return this._getState()}async decryptMessageInline(e){const t=e.metamaskId;if(e.data=this._parseMessageData(e.data),!p(e))throw new Error("Invalid encrypted data.");const r=await this.messagingSystem.call("KeyringController:decryptMessage",e);return this._decryptMessageManager.setResult(t,r),this._getState()}cancelDecryptMessage(e){return this._decryptMessageManager.rejectMessage(e),this._rejectApproval(e),this._getState()}rejectUnapproved(e){Object.keys(this._decryptMessageManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._decryptMessageManager,t,e)}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:l.MetaMetricsEventCategory.Messages,properties:{action:"Decrypt Message Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=this._migrateMessage(n);t[r]=s}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,r=e.origin||o.ORIGIN_METAMASK;try{this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:r,type:o.ApprovalType.EthDecrypt},!0)}catch(e){s.default.info("Error adding request to approval controller",e)}}_parseMessageData(e){const r=(0,u.stripHexPrefix)(e),n=t.from(r,"hex");return JSON.parse(n.toString("utf8"))}_rejectApproval(e){try{this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}catch(e){s.default.info("Error rejecting request to approval controller",e)}}}r.default=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/decrypt-message.ts"}],[160,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:43,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=43;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.PreferencesController)&&void 0!==t&&t.currentAccountTab&&delete e.PreferencesController.currentAccountTab;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/043.js"}],[161,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:44,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=44;const r=t.data;return t.data=function(e){var t;void 0!==(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.mkrMigrationReminderTimestamp)&&delete e.AppStateController.mkrMigrationReminderTimestamp;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/044.js"}],[162,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:45,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=45;const r=t.data;return t.data=function(e){var t;s.includes(null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.ipfsGateway)&&(e.PreferencesController.ipfsGateway="dweb.link");return e}(r),t}};const s=["ipfs.io","ipfs.dweb.link"]}}},{package:"$root$",file:"app/scripts/migrations/045.js"}],[163,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:46,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=46;const r=t.data;return t.data=function(e){void 0!==(null==e?void 0:e.ABTestController)&&delete e.ABTestController;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/046.js"}],[164,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:47,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=47;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;Array.isArray(r)&&r.forEach((e=>{"number"==typeof e.metamaskNetworkId&&(e.metamaskNetworkId=e.metamaskNetworkId.toString())}));return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/047.js"}],[165,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:48,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=48;const r=t.data;return t.data=function(e={}){var t,r,n,a,o,c,l,u;null===(t=e.NetworkController)||void 0===t||delete t.settings;const d=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{};if(("rpc"!==d.type||"string"==typeof d.chainId&&i.test(d.chainId))&&"localhost"!==d.type){if(null!==(n=e.NetworkController)&&void 0!==n&&n.provider){var h;if("rpcTarget"in e.NetworkController.provider){const t=e.NetworkController.provider.rpcTarget;e.NetworkController.provider.rpcUrl=t}null===(h=e.NetworkController)||void 0===h||null===(h=h.provider)||void 0===h||delete h.rpcTarget}}else e.NetworkController.provider={type:"rinkeby",rpcUrl:"",chainId:"0x4",nickname:"",rpcPrefs:{},ticker:"ETH"};e.PreferencesController||(e.PreferencesController={});e.PreferencesController.frequentRpcListDetail||(e.PreferencesController.frequentRpcListDetail=[]);e.PreferencesController.frequentRpcListDetail.unshift({rpcUrl:"http://localhost:8545",chainId:"0x539",ticker:"ETH",nickname:"Localhost 8545",rpcPrefs:{}}),null===(a=e.CachedBalancesController)||void 0===a||delete a.cachedBalances;const f=null===(o=e.TransactionController)||void 0===o?void 0:o.transactions;Array.isArray(f)&&f.forEach((e=>{const t=null==e?void 0:e.metamaskNetworkId;"string"==typeof t&&s.test(t)&&(e.metamaskNetworkId=parseInt(t,16).toString(10))}));const p=(null===(c=e.AddressBookController)||void 0===c?void 0:c.addressBook)||{};Object.keys(p).forEach((e=>{if(/^\d+$/iu.test(e)){const t=`0x${parseInt(e,10).toString(16)}`;!function(e,t){Object.values(e).forEach((e=>{e&&"object"==typeof e&&(e.chainId=t)}))}(p[e],t),p[t]?function(e,t,r){const n=e[t]||{},s={...e[r]};Object.keys(n).forEach((e=>{if(s[e]&&"object"==typeof s[e]){const t={};new Set([...Object.keys(s[e]),...Object.keys(n[e]||{})]).forEach((r=>{var i;t[r]=s[e][r]||(null===(i=n[e])||void 0===i?void 0:i[r])||""})),s[e]=t}else n[e]&&"object"==typeof n[e]&&(s[e]=n[e])})),e[r]=s}(p,e,t):p[t]=p[e],delete p[e]}})),null===(l=e.IncomingTransactionsController)||void 0===l||null===(l=l.incomingTxLastFetchedBlocksByNetwork)||void 0===l||delete l.localhost;const m=null===(u=e.PreferencesController)||void 0===u?void 0:u.accountTokens;m&&Object.keys(m).forEach((e=>{var t,r;const n=(null===(t=m[e])||void 0===t?void 0:t.localhost)||[];if(n.length>0){const t=m[e].rpc||[];t.length>0?m[e].rpc=function(e,t){const r=i(e),n=i(t),s=[];return new Set([...Object.keys(r),...Object.keys(n)]).forEach((e=>{s.push({...r[e],...n[e]})})),s;function i(e){return e.reduce(((e,t)=>(null!=t&&t.address&&"string"==typeof(null==t?void 0:t.address)&&(e[t.address]=t),e)),{})}}(n,t):m[e].rpc=n}null===(r=m[e])||void 0===r||delete r.localhost}));return e}(r),t}};const s=/^0x[0-9a-f]+$/iu,i=/^0x[1-9a-f]+[0-9a-f]*$/iu}}},{package:"$root$",file:"app/scripts/migrations/048.js"}],[166,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:49,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=49;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{metaMetricsId:t,participateInMetaMetrics:r,metaMetricsSendCount:n}=e.PreferencesController;e.MetaMetricsController=e.MetaMetricsController??{},t!==undefined&&(e.MetaMetricsController.metaMetricsId=t,delete e.PreferencesController.metaMetricsId),r!==undefined&&(e.MetaMetricsController.participateInMetaMetrics=r,delete e.PreferencesController.participateInMetaMetrics),n!==undefined&&(e.MetaMetricsController.metaMetricsSendCount=n,delete e.PreferencesController.metaMetricsSendCount)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/049.js"}],[167,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const s=["METASWAP_GAS_PRICE_ESTIMATES_LAST_RETRIEVED","METASWAP_GAS_PRICE_ESTIMATES","cachedFetch","BASIC_PRICE_ESTIMATES_LAST_RETRIEVED","BASIC_PRICE_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES"];r.default={version:50,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=50,s.forEach((e=>{var t;return null===(t=window.localStorage)||void 0===t?void 0:t.removeItem(e)})),t}}}}},{package:"$root$",file:"app/scripts/migrations/050.js"}],[1675,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e.GenericLog="GenericLog",e.EthSignLog="EthSignLog",e))(n||{});r.LogType=n}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-B6ES7RHK.js"}],[1676,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-JUURNM6C.js"}],[1677,{"./chunk-UJIPPGP6.js":1680,"@metamask/base-controller":1687,uuid:4873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i=e("./chunk-UJIPPGP6.js"),a=e("@metamask/base-controller"),o=e("uuid"),c="LoggingController",l={logs:{persist:!0,anonymous:!1}},u={logs:{}},d=class extends a.BaseController{constructor({messenger:e,state:t}){super({name:c,metadata:l,messenger:e,state:{...u,...t}}),i.__privateAdd.call(void 0,this,n),this.messagingSystem.registerActionHandler(`${c}:add`,(e=>this.add(e)))}add(e){const t={id:i.__privateMethod.call(void 0,this,n,s).call(this),timestamp:Date.now(),log:e};this.update((e=>{e.logs[t.id]=t}))}clear(){this.update((e=>{e.logs={}}))}};n=new WeakSet,s=function(){let e=o.v1.call(void 0);for(;e in this.state.logs;)e=o.v1.call(void 0);return e},r.LoggingController=d}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-LZJQW27Y.js"}],[1678,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e.PersonalSign="personal_sign",e.EthSignTypedData="eth_signTypedData",e.EthSignTypedDataV3="eth_signTypedData_v3",e.EthSignTypedDataV4="eth_signTypedData_v4",e))(n||{}),s=(e=>(e.Proposed="proposed",e.Rejected="rejected",e.Signed="signed",e))(s||{});r.SigningMethod=n,r.SigningStage=s}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-OL334B2K.js"}],[1679,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-PMCRFQY3.js"}],[168,{"../../../shared/constants/network":4959,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:51,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=51;const r=t.data;return t.data=function(e){var t,r;const{chainId:n,type:i}=(null==e||null===(t=e.NetworkController)||void 0===t?void 0:t.provider)||{},a=null===(r=s.BUILT_IN_NETWORKS[i])||void 0===r?void 0:r.chainId;a&&n!==a&&(e.NetworkController.provider.chainId=a);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/051.js"}],[1680,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateMethod=(e,t,r)=>(((e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)})(e,t,"access private method"),r)}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/chunk-UJIPPGP6.js"}],[1681,{"./chunk-B6ES7RHK.js":1675,"./chunk-JUURNM6C.js":1676,"./chunk-LZJQW27Y.js":1677,"./chunk-OL334B2K.js":1678,"./chunk-PMCRFQY3.js":1679,"./chunk-UJIPPGP6.js":1680},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-LZJQW27Y.js");e("./chunk-PMCRFQY3.js");var s=e("./chunk-OL334B2K.js");e("./chunk-JUURNM6C.js");var i=e("./chunk-B6ES7RHK.js");e("./chunk-UJIPPGP6.js"),r.LogType=i.LogType,r.LoggingController=n.LoggingController,r.SigningMethod=s.SigningMethod,r.SigningStage=s.SigningStage}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/index.js"}],[1682,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},s=n;r.BaseControllerV1=n,r.BaseControllerV1_default=s}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[1683,{"./chunk-UJFCPTF3.js":1685,"./chunk-Z4BLTVTB.js":1686},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,a).get(e),s=n(...t);s!==r&&(c.__privateGet.call(void 0,this,a).set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,s).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,s).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,s).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,s).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1684,{"./chunk-Z4BLTVTB.js":1686,immer:4098},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){s.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,s.__privateSet.call(void 0,this,n,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return s.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=i.produceWithPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);return s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[1685,{"./chunk-Z4BLTVTB.js":1686},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=f.__privateGet.call(void 0,this,a);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},l=new WeakSet,u=function(e){const t=f.__privateGet.call(void 0,this,i);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,s)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){f.__privateAdd.call(void 0,this,o),f.__privateAdd.call(void 0,this,l),f.__privateAdd.call(void 0,this,d),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,s,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,a,void 0),f.__privateSet.call(void 0,this,n,e),f.__privateSet.call(void 0,this,s,t),f.__privateSet.call(void 0,this,i,r),f.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,l,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,n).subscribe(e,t,r):f.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1686,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1687,{"./chunk-FTHCJ6HY.js":1682,"./chunk-G42723LG.js":1683,"./chunk-IURK6TKD.js":1684,"./chunk-UJFCPTF3.js":1685,"./chunk-Z4BLTVTB.js":1686},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-FTHCJ6HY.js"),s=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=s.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=s.getAnonymizedState,r.getPersistentState=s.getPersistentState}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/index.js"}],[169,{"../../../shared/constants/network":4959,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:52,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=52;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{accountTokens:t,accountHiddenTokens:r,frequentRpcListDetail:n}=e.PreferencesController,i={},a={};if(t&&Object.keys(t).length>0){for(const e of Object.keys(t)){i[e]={},t[e][s.NETWORK_TYPES.RPC]&&n.forEach((r=>{i[e][r.chainId]=t[e][s.NETWORK_TYPES.RPC]}));for(const r of Object.keys(t[e]))switch(r){case s.NETWORK_TYPES.MAINNET:i[e][s.CHAIN_IDS.MAINNET]=t[e][s.NETWORK_TYPES.MAINNET];break;case"ropsten":i[e]["0x3"]=t[e].ropsten;break;case"rinkeby":i[e]["0x4"]=t[e].rinkeby;break;case s.NETWORK_TYPES.GOERLI:i[e][s.CHAIN_IDS.GOERLI]=t[e][s.NETWORK_TYPES.GOERLI];break;case"kovan":i[e]["0x2a"]=t[e].kovan}}e.PreferencesController.accountTokens=i}if(r&&Object.keys(r).length>0){for(const e of Object.keys(r)){a[e]={},r[e][s.NETWORK_TYPES.RPC]&&n.forEach((t=>{a[e][t.chainId]=r[e][s.NETWORK_TYPES.RPC]}));for(const t of Object.keys(r[e]))switch(t){case s.NETWORK_TYPES.MAINNET:a[e][s.CHAIN_IDS.MAINNET]=r[e][s.NETWORK_TYPES.MAINNET];break;case"ropsten":a[e]["0x3"]=r[e].ropsten;break;case"rinkeby":a[e]["0x4"]=r[e].rinkeby;break;case s.NETWORK_TYPES.GOERLI:a[e][s.CHAIN_IDS.GOERLI]=r[e][s.NETWORK_TYPES.GOERLI];break;case"kovan":a[e]["0x2a"]=r[e].kovan}}e.PreferencesController.accountHiddenTokens=a}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/052.js"}],[1691,{"@metamask/base-controller":1703,events:3786},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractMessageManager=void 0;const i=e("@metamask/base-controller"),a=e("events");class o extends i.BaseControllerV1{constructor(e,t,r,n,s){super(e,t),this.hub=new a.EventEmitter,this.name="AbstractMessageManager",this.defaultState={unapprovedMessages:{},unapprovedMessagesCount:0},this.messages=[],this.securityProviderRequest=r,this.additionalFinishStatuses=null!=n?n:[],this.getCurrentChainId=s,this.initialize()}saveMessageList(e=!0){const t=this.getUnapprovedMessages(),r=this.getUnapprovedMessagesCount();this.update({unapprovedMessages:t,unapprovedMessagesCount:r}),e&&this.hub.emit("updateBadge")}setMessageStatus(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.status=t,this.updateMessage(r),this.hub.emit(`${e}:${t}`,r),("rejected"===t||"signed"===t||"errored"===t||this.additionalFinishStatuses.includes(t))&&this.hub.emit(`${e}:finished`,r)}updateMessage(e,t=!0){const r=this.messages.findIndex((t=>e.id===t.id));-1!==r&&(this.messages[r]=e),this.saveMessageList(t)}securityCheck(e){return n(this,void 0,void 0,(function*(){if(this.securityProviderRequest){const t=yield this.securityProviderRequest(e,e.type);return Object.assign(Object.assign({},e),{securityProviderResponse:t})}return e}))}getUnapprovedMessagesCount(){return Object.keys(this.getUnapprovedMessages()).length}getUnapprovedMessages(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}addMessage(e){return n(this,void 0,void 0,(function*(){const t=yield this.securityCheck(e);this.messages.push(t),this.saveMessageList()}))}getMessage(e){return this.messages.find((t=>t.id===e))}getAllMessages(){return this.messages}approveMessage(e){return this.setMessageStatusApproved(e.metamaskId),this.prepMessageForSigning(e)}setMessageStatusApproved(e){this.setMessageStatus(e,"approved")}setMessageStatusInProgress(e){this.setMessageStatus(e,"inProgress")}setMessageStatusSigned(e,t){this.setMessageStatusAndResult(e,t,"signed")}setMessageStatusAndResult(e,t,r){this.setResult(e,t),this.setMessageStatus(e,r)}setResult(e,t){const r=this.getMessage(e);r&&(r.rawSig=t,this.updateMessage(r,!1))}setMetadata(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.metadata=t,this.updateMessage(r,!1)}rejectMessage(e){this.setMessageStatus(e,"rejected")}waitForFinishStatus(e,t){return n(this,void 0,void 0,(function*(){const{metamaskId:r}=e,n=s(e,["metamaskId"]);return new Promise(((e,s)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"signed":return e(r.rawSig);case"rejected":return s(new Error(`MetaMask ${t} Signature: User denied message signature.`));case"errored":return s(new Error(`MetaMask ${t} Signature: ${r.error}`));default:return s(new Error(`MetaMask ${t} Signature: Unknown problem: ${JSON.stringify(n)}`))}}))}))}))}}r.AbstractMessageManager=o,r.default=o}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/AbstractMessageManager.js"}],[1692,{"./AbstractMessageManager":1691,"./utils":1698,uuid:4873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.DecryptMessageManager=void 0;const s=e("uuid"),i=e("./AbstractMessageManager"),a=e("./utils");class o extends i.AbstractMessageManager{constructor(){super(...arguments),this.name="DecryptMessageManager"}addUnapprovedMessageAsync(e,t){return n(this,void 0,void 0,(function*(){(0,a.validateDecryptedMessageData)(e);const r=yield this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"decrypted":return t(r.rawSig);case"rejected":return n(new Error("MetaMask DecryptMessage: User denied message decryption."));case"errored":return n(new Error("MetaMask DecryptMessage: This message cannot be decrypted."));default:return n(new Error(`MetaMask DecryptMessage: Unknown problem: ${JSON.stringify(e)}`))}}))}))}))}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){t&&(e.origin=t.origin),e.data=(0,a.normalizeMessageData)(e.data);const r=(0,s.v1)(),n={id:r,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_decrypt"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}r.DecryptMessageManager=o}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/DecryptMessageManager.js"}],[1693,{"./AbstractMessageManager":1691,"./utils":1698,uuid:4873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.EncryptionPublicKeyManager=void 0;const s=e("uuid"),i=e("./AbstractMessageManager"),a=e("./utils");class o extends i.AbstractMessageManager{constructor(){super(...arguments),this.name="EncryptionPublicKeyManager"}addUnapprovedMessageAsync(e,t){return n(this,void 0,void 0,(function*(){(0,a.validateEncryptionPublicKeyMessageData)(e);const r=yield this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"received":return t(r.rawSig);case"rejected":return n(new Error("MetaMask EncryptionPublicKey: User denied message EncryptionPublicKey."));default:return n(new Error(`MetaMask EncryptionPublicKey: Unknown problem: ${JSON.stringify(e)}`))}}))}))}))}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){t&&(e.origin=t.origin);const r=(0,s.v1)(),n={id:r,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_getEncryptionPublicKey"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve({from:e.data})}}r.EncryptionPublicKeyManager=o,r.default=o}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/EncryptionPublicKeyManager.js"}],[1694,{"./AbstractMessageManager":1691,"./utils":1698,uuid:4873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.MessageManager=void 0;const i=e("uuid"),a=e("./AbstractMessageManager"),o=e("./utils");class c extends a.AbstractMessageManager{constructor(){super(...arguments),this.name="MessageManager"}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){(0,o.validateSignMessageData)(e),t&&(e.origin=t.origin),e.data=(0,o.normalizeMessageData)(e.data);const r=(0,i.v1)(),n={id:r,messageParams:e,securityAlertResponse:null==t?void 0:t.securityAlertResponse,status:"unapproved",time:Date.now(),type:"eth_sign"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){const{metamaskId:t}=e,r=s(e,["metamaskId"]);return Promise.resolve(r)}}r.MessageManager=c,r.default=c}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/MessageManager.js"}],[1695,{"./AbstractMessageManager":1691,"./utils":1698,"@metamask/controller-utils":1705,uuid:4873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.PersonalMessageManager=void 0;const i=e("@metamask/controller-utils"),a=e("uuid"),o=e("./AbstractMessageManager"),c=e("./utils");class l extends o.AbstractMessageManager{constructor(){super(...arguments),this.name="PersonalMessageManager"}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){(0,c.validateSignMessageData)(e),t&&(e.origin=t.origin),e.data=(0,c.normalizeMessageData)(e.data);const r=(0,i.detectSIWE)(e),n=Object.assign(Object.assign({},e),{siwe:r}),s=(0,a.v1)(),o={id:s,messageParams:n,securityAlertResponse:null==t?void 0:t.securityAlertResponse,status:"unapproved",time:Date.now(),type:"personal_sign"};return yield this.addMessage(o),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},n),{metamaskId:s})),s}))}prepMessageForSigning(e){const{metamaskId:t}=e,r=s(e,["metamaskId"]);return Promise.resolve(r)}}r.PersonalMessageManager=l,r.default=l}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/PersonalMessageManager.js"}],[1696,{"./AbstractMessageManager":1691,"./utils":1698,uuid:4873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.TypedMessageManager=void 0;const i=e("uuid"),a=e("./AbstractMessageManager"),o=e("./utils");class c extends a.AbstractMessageManager{constructor(){super(...arguments),this.name="TypedMessageManager"}addUnapprovedMessage(e,t,r){var s;return n(this,void 0,void 0,(function*(){if("V1"===r&&(0,o.validateTypedSignMessageDataV1)(e),"V3"===r||"V4"===r){const t=null===(s=this.getCurrentChainId)||void 0===s?void 0:s.call(this);(0,o.validateTypedSignMessageDataV3V4)(e,t)}"string"==typeof e.data||"V3"!==r&&"V4"!==r||(e.data=JSON.stringify(e.data));const n=(0,i.v1)(),a=Object.assign(Object.assign({},e),{metamaskId:n,version:r});t&&(e.origin=t.origin);const c={id:n,messageParams:e,securityAlertResponse:null==t?void 0:t.securityAlertResponse,status:"unapproved",time:Date.now(),type:"eth_signTypedData"};return yield this.addMessage(c),this.hub.emit("unapprovedMessage",a),n}))}setMessageStatusErrored(e,t){const r=this.getMessage(e);r&&(r.error=t,this.updateMessage(r),this.setMessageStatus(e,"errored"))}prepMessageForSigning(e){const{metamaskId:t,version:r}=e,n=s(e,["metamaskId","version"]);return Promise.resolve(n)}}r.TypedMessageManager=c,r.default=c}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/TypedMessageManager.js"}],[1697,{"./AbstractMessageManager":1691,"./DecryptMessageManager":1692,"./EncryptionPublicKeyManager":1693,"./MessageManager":1694,"./PersonalMessageManager":1695,"./TypedMessageManager":1696},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./AbstractMessageManager"),r),s(e("./MessageManager"),r),s(e("./PersonalMessageManager"),r),s(e("./TypedMessageManager"),r),s(e("./EncryptionPublicKeyManager"),r),s(e("./DecryptMessageManager"),r)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/index.js"}],[1698,{"@metamask/controller-utils":1705,"@metamask/eth-sig-util":1397,"@metamask/utils":2717,buffer:3497,jsonschema:4147},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.validateDecryptedMessageData=r.validateEncryptionPublicKeyMessageData=r.validateTypedSignMessageDataV3V4=r.validateTypedSignMessageDataV1=r.validateSignMessageData=r.normalizeMessageData=void 0;const n=e("@metamask/controller-utils"),s=e("@metamask/eth-sig-util"),i=e("@metamask/utils"),a=e("jsonschema"),o=/^[0-9A-Fa-f]+$/gu;function c(e,t){if(!e||"string"!=typeof e||!(0,n.isValidHexAddress)(e))throw new Error(`Invalid "${t}" address: ${e} must be a valid string.`)}r.normalizeMessageData=function(e){try{const t=(0,i.remove0x)(e);if(t.match(o))return(0,i.add0x)(t)}catch(e){}return(0,i.bytesToHex)(t.from(e,"utf8"))},r.validateSignMessageData=function(e){const{from:t,data:r}=e;if(c(t,"from"),!r||"string"!=typeof r)throw new Error(`Invalid message "data": ${r} must be a valid string.`)},r.validateTypedSignMessageDataV1=function(e){if(c(e.from,"from"),!e.data||!Array.isArray(e.data))throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);try{(0,s.typedSignatureHash)(e.data)}catch(e){throw new Error("Expected EIP712 typed data.")}},r.validateTypedSignMessageDataV3V4=function(e,t){if(c(e.from,"from"),!e.data||Array.isArray(e.data)||"object"!=typeof e.data&&"string"!=typeof e.data)throw new Error('Invalid message "data": Must be a valid string or object.');let r;if("object"==typeof e.data)r=e.data;else try{r=JSON.parse(e.data)}catch(e){throw new Error("Data must be passed as a valid JSON string.")}if((0,a.validate)(r,s.TYPED_MESSAGE_SCHEMA).errors.length>0)throw new Error("Data must conform to EIP-712 schema. See https://git.io/fNtcx.");if(!t)throw new Error("Current chainId cannot be null or undefined.");let{chainId:n}=r.domain;if(n){"string"==typeof n&&(n=parseInt(n,n.startsWith("0x")?16:10));const e=parseInt(t,16);if(Number.isNaN(e))throw new Error(`Cannot sign messages for chainId "${n}", because MetaMask is switching networks.`);if(n!==e)throw new Error(`Provided chainId "${n}" must match the active chainId "${e}"`)}},r.validateEncryptionPublicKeyMessageData=function(e){const{from:t}=e;c(t,"from")},r.validateDecryptedMessageData=function(e){const{from:t}=e;c(t,"from")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/utils.js"}],[1699,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseControllerV1=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const[e,t]of Object.entries(this.internalConfig))t!==undefined&&(this[e]=t)}else for(const t of Object.keys(e))void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseControllerV1=n,r.default=n}}},{package:"@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/BaseControllerV1.js"}],[17,{"../../../shared/constants/app":4943,"../../../shared/constants/keyring":4952,"../../../shared/constants/metametrics":4955,"@metamask/base-controller":1226,"@metamask/message-manager":1697,events:3786,loglevel:4300},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(e("events")),s=u(e("loglevel")),i=e("@metamask/message-manager"),a=e("@metamask/base-controller"),o=e("../../../shared/constants/metametrics"),c=e("../../../shared/constants/keyring"),l=e("../../../shared/constants/app");function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h={unapprovedEncryptionPublicKeyMsgs:{persist:!1,anonymous:!1},unapprovedEncryptionPublicKeyMsgCount:{persist:!1,anonymous:!1}};class f extends a.BaseController{constructor({messenger:e,getEncryptionPublicKey:t,getAccountKeyringType:r,getState:s,metricsEvent:a}){super({name:"EncryptionPublicKeyController",metadata:h,messenger:e,state:{unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}}),d(this,"hub",void 0),d(this,"_getEncryptionPublicKey",void 0),d(this,"_getAccountKeyringType",void 0),d(this,"_getState",void 0),d(this,"_encryptionPublicKeyManager",void 0),d(this,"_metricsEvent",void 0),this._getEncryptionPublicKey=t,this._getAccountKeyringType=r,this._getState=s,this._metricsEvent=a,this.hub=new n.default,this._encryptionPublicKeyManager=new i.EncryptionPublicKeyManager(undefined,undefined,undefined,["received"]),this._encryptionPublicKeyManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._encryptionPublicKeyManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e,"eth_getEncryptionPublicKey")})),this._subscribeToMessageState(this._encryptionPublicKeyManager,((e,t,r)=>{e.unapprovedEncryptionPublicKeyMsgs=t,e.unapprovedEncryptionPublicKeyMsgCount=r}))}get unapprovedMsgCount(){return this._encryptionPublicKeyManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0})))}async newRequestEncryptionPublicKey(e,t){switch(await this._getAccountKeyringType(e)){case c.KeyringType.ledger:return new Promise(((e,t)=>{t(new Error("Ledger does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.trezor:return new Promise(((e,t)=>{t(new Error("Trezor does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.lattice:return new Promise(((e,t)=>{t(new Error("Lattice does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.qr:return Promise.reject(new Error("QR hardware does not support eth_getEncryptionPublicKey."));default:return this._encryptionPublicKeyManager.addUnapprovedMessageAsync({from:e},t)}}async encryptionPublicKey(e){s.default.info("MetaMaskController - encryptionPublicKey");const t=e.metamaskId;try{const r=await this._encryptionPublicKeyManager.approveMessage(e),n=await this._getEncryptionPublicKey(r.from);return this._encryptionPublicKeyManager.setMessageStatusAndResult(t,n,"received"),this._acceptApproval(t),this._getState()}catch(e){throw s.default.info("MetaMaskController - eth_getEncryptionPublicKey failed.",e),this._cancelAbstractMessage(this._encryptionPublicKeyManager,t),e}}cancelEncryptionPublicKey(e){return this._cancelAbstractMessage(this._encryptionPublicKeyManager,e)}rejectUnapproved(e){Object.keys(this._encryptionPublicKeyManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._encryptionPublicKeyManager,t,e)}))}clearUnapproved(){this._encryptionPublicKeyManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:o.MetaMetricsEventCategory.Messages,properties:{action:"Encryption public key Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=this._migrateMessage(n);t[r]=s}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t.from,origin:t.origin}}_requestApproval(e,t){const r=e.metamaskId,n=e.origin||l.ORIGIN_METAMASK;this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:n,type:t},!0).catch((()=>{}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_rejectApproval(e){this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}}r.default=f}}},{package:"$root$",file:"app/scripts/controllers/encryption-public-key.ts"}],[170,{"@metamask/transaction-controller":2624,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:53,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=53;const r=t.data;return t.data=function(e){var t,r;const n=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions,i=null==e||null===(r=e.IncomingTransactionsController)||void 0===r?void 0:r.incomingTransactions;Array.isArray(n)&&n.forEach((e=>{e&&(e.type!==s.TransactionType.retry&&e.type!==s.TransactionType.cancel&&(e.type=e.transactionCategory),delete e.transactionCategory)}));if(i){Object.entries(i).forEach((([t,r])=>{r&&(delete r.transactionCategory,e.IncomingTransactionsController.incomingTransactions[t]={...r,type:s.TransactionType.incoming})}))}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/053.js"}],[1700,{immer:4098},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const a=e("immer");(0,a.enablePatches)();function o(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:i}){n.set(this,void 0),this.messagingSystem=e,this.name=r,s(this,n,i,"f"),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return i(this,n,"f")}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,o]=a.produceWithPatches(i(this,n,"f"),e);return s(this,n,t,"f"),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:o}}applyPatches(e){const t=(0,a.applyPatches)(i(this,n,"f"),e);s(this,n,t,"f"),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},n=new WeakMap,r.getAnonymizedState=function(e,t){return o(e,t,"anonymous")},r.getPersistentState=function(e,t){return o(e,t,"persist")}}}},{package:"@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1701,{"./RestrictedControllerMessenger":1702},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=void 0;const c=e("./RestrictedControllerMessenger");r.ControllerMessenger=class{constructor(){n.set(this,new Map),s.set(this,new Map),i.set(this,new Map),a.set(this,new Map)}registerActionHandler(e,t){if(o(this,n,"f").has(e))throw new Error(`A handler for ${e} has already been registered`);o(this,n,"f").set(e,t)}unregisterActionHandler(e){o(this,n,"f").delete(e)}clearActions(){o(this,n,"f").clear()}call(e,...t){const r=o(this,n,"f").get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){o(this,i,"f").set(e,t)}publish(e,...t){const r=o(this,s,"f").get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=o(this,a,"f").get(e),s=n(...t);s!==r&&(o(this,a,"f").set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=o(this,s,"f").get(e);if(n||(n=new Map,o(this,s,"f").set(e,n)),n.set(t,r),r){const n=o(this,i,"f").get(e);if(n){const e=r(...n());o(this,a,"f").set(t,e)}}}unsubscribe(e,t){const r=o(this,s,"f").get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&o(this,a,"f").delete(t),r.delete(t)}clearEventSubscriptions(e){o(this,s,"f").delete(e)}clearSubscriptions(){o(this,s,"f").clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new c.RestrictedControllerMessenger({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}},n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap}}},{package:"@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1702,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,l,u,d=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},h=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.RestrictedControllerMessenger=void 0;r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){n.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),d(this,s,e,"f"),d(this,i,t,"f"),d(this,a,null!=r?r:null,"f"),d(this,o,null!=c?c:null,"f")}registerActionHandler(e,t){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").registerActionHandler(e,t)}unregisterActionHandler(e){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").unregisterActionHandler(e)}call(e,...t){if(!h(this,n,"m",l).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return h(this,s,"f").call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").publish(e,...t)}subscribe(e,t,r){if(!h(this,n,"m",c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?h(this,s,"f").subscribe(e,t,r):h(this,s,"f").subscribe(e,t)}unsubscribe(e,t){if(!h(this,n,"m",c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);h(this,s,"f").unsubscribe(e,t)}clearEventSubscriptions(e){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").clearEventSubscriptions(e)}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,n=new WeakSet,c=function(e){const t=h(this,o,"f");return h(this,n,"m",u).call(this,e)||null!==t&&t.includes(e)},l=function(e){const t=h(this,a,"f");return h(this,n,"m",u).call(this,e)||null!==t&&t.includes(e)},u=function(e){return e.startsWith(`${h(this,i,"f")}:`)}}}},{package:"@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/RestrictedControllerMessenger.js"}],[1703,{"./BaseControllerV1":1699,"./BaseControllerV2":1700,"./ControllerMessenger":1701,"./RestrictedControllerMessenger":1702},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=r.BaseControllerV1=void 0;var i=e("./BaseControllerV1");Object.defineProperty(r,"BaseControllerV1",{enumerable:!0,get:function(){return i.BaseControllerV1}});var a=e("./BaseControllerV2");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return a.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return a.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return a.getPersistentState}}),s(e("./ControllerMessenger"),r),s(e("./RestrictedControllerMessenger"),r)}}},{package:"@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/index.js"}],[1704,{"./types":1708},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/message-manager>@metamask/controller-utils",file:"node_modules/@metamask/message-manager/node_modules/@metamask/controller-utils/dist/constants.js"}],[1705,{"./constants":1704,"./siwe":1707,"./types":1708,"./util":1709},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./constants"),r),s(e("./util"),r),s(e("./types"),r),s(e("./siwe"),r)}}},{package:"@metamask/message-manager>@metamask/controller-utils",file:"node_modules/@metamask/message-manager/node_modules/@metamask/controller-utils/dist/index.js"}],[1706,{"@metamask/utils":2717},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/message-manager>@metamask/controller-utils",file:"node_modules/@metamask/message-manager/node_modules/@metamask/controller-utils/dist/logger.js"}],[1707,{"./logger":1706,"@metamask/utils":2717,"@spruceid/siwe-parser":2979,buffer:3497},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@metamask/utils"),s=e("@spruceid/siwe-parser"),i=e("./logger"),a=(0,i.createModuleLogger)(i.projectLogger,"detect-siwe");function o(e){try{const s="string"!=typeof(r=e)?r:(0,n.remove0x)(r),i=t.from(s,"hex");return 32===i.length?e:i.toString("utf8")}catch(t){return a(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:s}=e;if(!n||!(null===(t=null==s?void 0:s.parsedMessage)||void 0===t?void 0:t.domain))return!1;const i=new URL(n),a=(0,r.parseDomainParts)(s.parsedMessage.domain,i.protocol);return 0===a.hostname.localeCompare(i.hostname,undefined,{sensitivity:"accent"})&&(""!==a.port&&a.port!==i.port?""===i.port&&a.port===c[i.protocol]:""===a.username||a.username===i.username)}catch(e){return a(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new s.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager>@metamask/controller-utils",file:"node_modules/@metamask/message-manager/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1708,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/message-manager>@metamask/controller-utils",file:"node_modules/@metamask/message-manager/node_modules/@metamask/controller-utils/dist/types.js"}],[1709,{"./constants":1704,"@ethereumjs/util":450,"@metamask/ethjs-unit":1472,"@metamask/utils":2717,"bn.js":3449,buffer:3497,"eth-ens-namehash":3689,"fast-deep-equal":3814},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const i=e("@ethereumjs/util"),a=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),c=s(e("bn.js")),l=s(e("eth-ens-namehash")),u=s(e("fast-deep-equal")),d=e("./constants"),h=new Error("timeout");function f(e){return e?new c.default((0,o.remove0x)(e),16):new c.default(0)}function p(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function m(e,t){return n(this,void 0,void 0,(function*(){const r=yield p(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e,(0,o.isStrictHexString)(e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=d.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.add0x)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new c.default(t),s=new c.default(r);return e.mul(n).div(s)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new c.default(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,a.toWei)(r,"gwei");if(n.length<=9)return(0,a.toWei)(`${r}.${n}`,"gwei");const s=n.slice(9)[0];n=n.slice(0,9);let i=(0,a.toWei)(`${r}.${n}`,"gwei");return Number(s)>=5&&(i=i.add(new c.default(1))),i},r.weiHexToGweiDec=function(e){const t=new c.default((0,o.remove0x)(e),16);return(0,a.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=f,r.hexToText=function(e){try{const r=(0,o.remove0x)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return c.default.isBN(e)?e:new c.default(f(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${c.default.isBN(e)?e.toString(16):new c.default(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,o.add0x)(e);return(0,o.isHexString)(t)?(0,i.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.add0x)(e):e;return!!(0,o.isStrictHexString)(r)&&(0,i.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=p,r.handleFetch=m,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:s}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))]):yield m(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===h)))throw e;console.error(e)}(e,s)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=l.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,s)=>{const i=(e,t)=>{e?s(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,i):e.sendAsync({method:t,params:r},i)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isStrictHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager>@metamask/controller-utils",file:"node_modules/@metamask/message-manager/node_modules/@metamask/controller-utils/dist/util.js"}],[171,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");function s(e){return"number"==typeof e||"string"==typeof e&&e.match(/^(0x)?\d+$/u)}r.default={version:54,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=54;const r=function(e){const t=e;if(!t.PreferencesController)return t;const r=t.PreferencesController.tokens||[],n=r.filter((({decimals:e})=>s(e)));for(const e of n)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t.PreferencesController.tokens=n;const{accountTokens:i}=t.PreferencesController;if(i&&"object"==typeof i)for(const e of Object.keys(i)){const t=i[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=(t[e]||[]).filter((({decimals:e})=>s(e)));for(const e of r)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t[e]=r}}return t.PreferencesController.accountTokens=i,t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/054.js"}],[1710,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={snapId:"npm:@metamask/message-signing-snap",manifest:{version:"0.3.3",description:"Automatic message signing of MetaMask tagged messages",proposedName:"MetaMask Message Signing Snap",repository:{type:"git",url:"https://github.com/MetaMask/message-signing-snap.git"},source:{shasum:"ol44wik35znt/n3Z7GGyXjh+J0M00yDM7YZOYQegA7I=",location:{npm:{filePath:"dist/bundle.js",iconPath:"images/icon.svg",packageName:"@metamask/message-signing-snap",registry:"https://registry.npmjs.org/"}}},initialPermissions:{snap_getEntropy:{},"endowment:rpc":{dapps:!0,snaps:!1}},manifestVersion:"0.1"},files:[{path:"images/icon.svg",value:'<svg width="500" height="500" viewBox="0 0 500 500" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="500" height="500" fill="black"/>\n<g filter="url(#filter0_f_8_91)">\n<path d="M249.444 373.519C249.444 373.519 364.118 343.192 364.118 257.188L378.333 248.251L364.118 239.314L378.333 230.378L364.118 221.441V203.568V185.695V149.948V114.202L301.639 132.596C267.566 142.628 231.323 142.628 197.25 132.596L134.771 114.202V149.948V167.821V185.695V203.568V221.441L120.556 230.378L134.771 239.314L120.556 248.251L134.771 257.188C134.771 343.192 249.444 373.519 249.444 373.519Z" fill="#F1CA77"/>\n</g>\n<path d="M249.445 406.215C249.445 406.215 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 406.215 249.445 406.215Z" fill="#233447"/>\n<path d="M249.445 399.107C249.445 399.107 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 399.107 249.445 399.107Z" fill="#123AF0"/>\n<path d="M249.445 392C249.445 392 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 392 249.445 392Z" fill="#CD6116"/>\n<path d="M249.445 382.049C249.445 382.049 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 382.049 249.445 382.049Z" fill="#E4751F"/>\n<path d="M249.445 370.676C249.445 370.676 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 370.676 249.445 370.676Z" fill="#F6851B"/>\n<path d="M249.445 352.196C249.445 352.196 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888C290.105 147.184 208.784 147.184 134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 352.196 249.445 352.196Z" fill="url(#paint0_linear_8_91)"/>\n<defs>\n<filter id="filter0_f_8_91" x="94.9674" y="88.6133" width="308.954" height="310.494" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>\n<feGaussianBlur stdDeviation="12.7941" result="effect1_foregroundBlur_8_91"/>\n</filter>\n<linearGradient id="paint0_linear_8_91" x1="144.012" y1="132.09" x2="425.482" y2="446.967" gradientUnits="userSpaceOnUse">\n<stop stop-color="#F1CA77"/>\n<stop offset="1" stop-color="#F6851B"/>\n</linearGradient>\n</defs>\n</svg>\n'},{path:"dist/bundle.js",value:'(()=>{var e={526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,s=a(e),o=s[0],u=s[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,u)),d=0,f=u>0?o-4:o;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===u&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[d++]=255&t);1===u&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=16383,a=0,c=n-i;a<c;a+=o)s.push(u(e,a,a+o>c?c:a+o));1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,n){for(var i,s,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},287:(e,t,r)=>{"use strict";const n=r(526),i=r(251),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=u,t.IS=50;const o=2147483647;function a(e){if(e>o)throw new RangeError(\'The value "\'+e+\'" is invalid for option "size"\');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError(\'The "string" argument must be of type string. Received type number\');return f(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|y(e,t);let n=a(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return l(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return h(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw new TypeError(\'The "value" argument must not be of type number. Received type number\');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||G(e.length)?a(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError(\'"size" argument must be of type number\');if(e<0)throw new RangeError(\'The value "\'+e+\'" is invalid for option "size"\')}function f(e){return d(e),a(e<0?0:0|p(e))}function l(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){if(t<0||e.byteLength<t)throw new RangeError(\'"offset" is outside of buffer bounds\');if(e.byteLength<t+(r||0))throw new RangeError(\'"length" is outside of buffer bounds\');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function p(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function y(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError(\'The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type \'+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(e).length;default:if(i)return n?-1:H(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return S(this,t,r);case"base64":return I(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),G(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,i){let s,o=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===u)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+u>a&&(r=a-u),s=r;s>=0;s--){let r=!0;for(let n=0;n<u;n++)if(c(e,s+n)!==c(t,n)){r=!1;break}if(r)return s}return-1}function b(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=t.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(G(n))return o;e[r+o]=n}return o}function _(e,t,r,n){return W(H(t,e.length-r),e,r,n)}function E(e,t,r,n){return W(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return W(K(t),e,r,n)}function k(e,t,r,n){return W(function(e,t){let r,n,i;const s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function I(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,u;switch(o){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(s=u));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(s=u))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(e){const t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=O));return r}(n)}u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return d(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},u.allocUnsafe=function(e){return f(e)},u.allocUnsafeSlow=function(e){return f(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(J(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError(\'The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array\');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError(\'"list" argument must be an Array of Buffers\');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(J(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError(\'"list" argument must be an Array of Buffers\');t.copy(n,i)}i+=t.length}return n},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):m.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.IS;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(J(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError(\'The "target" argument must be one of type Buffer or Uint8Array. Received type \'+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0);const a=Math.min(s,o),c=this.slice(n,i),d=e.slice(t,r);for(let e=0;e<a;++e)if(c[e]!==d[e]){s=c[e],o=d[e];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return x(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function B(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function S(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function T(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=Y[e[n]];return i}function N(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function R(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function Z(e,t,r,n,i,s){if(!u.isBuffer(e))throw new TypeError(\'"buffer" argument must be a Buffer instance\');if(t>i||t<s)throw new RangeError(\'"value" argument is out of bounds\');if(r+n>e.length)throw new RangeError("Index out of range")}function C(e,t,r,n,i){F(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function j(e,t,r,n,i){F(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function U(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function P(e,t,r,n,s){return t=+t,r>>>=0,s||U(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,s){return t=+t,r>>>=0,s||U(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||D(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||D(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||D(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||D(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){Z(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){Z(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=X((function(e,t=0){return C(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=X((function(e,t=0){return j(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);Z(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);Z(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||Z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=X((function(e,t=0){return C(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=X((function(e,t=0){return j(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=u.isBuffer(e)?e:u.from(e,n),o=s.length;if(0===o)throw new TypeError(\'The value "\'+e+\'" is invalid for argument "value"\');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const $={};function M(e,t,r){$[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function z(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function F(e,t,r,n,i,s){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new $.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||D(t,e.length-(r+1))}(n,i,s)}function q(e,t){if("number"!=typeof e)throw new $.ERR_INVALID_ARG_TYPE(t,"number",e)}function D(e,t,r){if(Math.floor(e)!==e)throw q(e,r),new $.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new $.ERR_BUFFER_OUT_OF_BOUNDS;throw new $.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}M("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),M("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),M("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=z(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=z(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const V=/[^+/0-9A-Za-z-_]/g;function H(e,t){let r;t=t||1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function K(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function G(e){return e!=e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},463:e=>{e.exports=o,o.default=o,o.stable=d,o.stableStringify=d;var t="[...]",r="[Circular]",n=[],i=[];function s(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function o(e,t,r,o){var a;void 0===o&&(o=s()),u(e,"",0,[],void 0,0,o);try{a=0===i.length?JSON.stringify(e,t,r):JSON.stringify(e,l(t),r)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==n.length;){var c=n.pop();4===c.length?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return a}function a(e,t,r,s){var o=Object.getOwnPropertyDescriptor(s,r);void 0!==o.get?o.configurable?(Object.defineProperty(s,r,{value:e}),n.push([s,r,t,o])):i.push([t,r,e]):(s[r]=e,n.push([s,r,t]))}function u(e,n,i,s,o,c,d){var f;if(c+=1,"object"==typeof e&&null!==e){for(f=0;f<s.length;f++)if(s[f]===e)return void a(r,e,n,o);if(void 0!==d.depthLimit&&c>d.depthLimit)return void a(t,e,n,o);if(void 0!==d.edgesLimit&&i+1>d.edgesLimit)return void a(t,e,n,o);if(s.push(e),Array.isArray(e))for(f=0;f<e.length;f++)u(e[f],f,f,s,e,c,d);else{var l=Object.keys(e);for(f=0;f<l.length;f++){var h=l[f];u(e[h],h,f,s,e,c,d)}}s.pop()}}function c(e,t){return e<t?-1:e>t?1:0}function d(e,t,r,o){void 0===o&&(o=s());var a,u=f(e,"",0,[],void 0,0,o)||e;try{a=0===i.length?JSON.stringify(u,t,r):JSON.stringify(u,l(t),r)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==n.length;){var c=n.pop();4===c.length?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return a}function f(e,i,s,o,u,d,l){var h;if(d+=1,"object"==typeof e&&null!==e){for(h=0;h<o.length;h++)if(o[h]===e)return void a(r,e,i,u);try{if("function"==typeof e.toJSON)return}catch(e){return}if(void 0!==l.depthLimit&&d>l.depthLimit)return void a(t,e,i,u);if(void 0!==l.edgesLimit&&s+1>l.edgesLimit)return void a(t,e,i,u);if(o.push(e),Array.isArray(e))for(h=0;h<e.length;h++)f(e[h],h,h,o,e,d,l);else{var p={},y=Object.keys(e).sort(c);for(h=0;h<y.length;h++){var m=y[h];f(e[m],m,h,o,e,d,l),p[m]=e[m]}if(void 0===u)return p;n.push([u,i,e]),u[i]=p}o.pop()}}function l(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(i.length>0)for(var n=0;n<i.length;n++){var s=i[n];if(s[1]===t&&s[0]===r){r=s[2],i.splice(n,1);break}}return e.call(this,t,r)}}},251:(e,t)=>{t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,u=(1<<a)-1,c=u>>1,d=-7,f=r?i-1:0,l=r?-1:1,h=e[t+f];for(f+=l,s=h&(1<<-d)-1,h>>=-d,d+=a;d>0;s=256*s+e[t+f],f+=l,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=n;d>0;o=256*o+e[t+f],f+=l,d-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),s-=c}return(h?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,u,c=8*s-i-1,d=(1<<c)-1,f=d>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,p=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?l/u:l*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=d?(a=0,o=d):o+f>=1?(a=(t*u-1)*Math.pow(2,i),o+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+h]=255&a,h+=p,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[r+h]=255&o,h+=p,o/=256,c-=8);e[r+h-p]|=128*y}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{onRpcRequest:()=>Gn});var e={};r.r(e),r.d(e,{DO:()=>Ur,OG:()=>Jr,My:()=>Lr,bytesToNumberBE:()=>qr,lX:()=>Dr,Id:()=>Wr,fg:()=>Xr,qj:()=>Kr,hexToBytes:()=>Fr,aY:()=>jr,lq:()=>Vr,z:()=>Hr,Q5:()=>en});var t={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},i={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function s(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)}var o=(e,t)=>Object.hasOwnProperty.call(e,t);var a,u=((a=u||{})[a.Null=4]="Null",a[a.Comma=1]="Comma",a[a.Wrapper=1]="Wrapper",a[a.True=4]="True",a[a.False=5]="False",a[a.Quote=1]="Quote",a[a.Colon=1]="Colon",a[a.Date=24]="Date",a);Error;class c extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...s}=e,{path:o}=e,a=0===o.length?n:`At path: ${o.join(".")} -- ${n}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function d(e){return"object"==typeof e&&null!=e}function f(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function l(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:s}=t,{type:o}=r,{refinement:a,message:u=`Expected a value of type \\`${o}\\`${a?` with refinement \\`${a}\\``:""}, but received: \\`${f(n)}\\``}=e;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...e,message:u}}function*h(e,t,r,n){var i;d(i=e)&&"function"==typeof i[Symbol.iterator]||(e=[e]);for(const i of e){const e=l(i,t,r,n);e&&(yield e)}}function*p(e,t,r={}){const{path:n=[],branch:i=[e],coerce:s=!1,mask:o=!1}=r,a={path:n,branch:i};if(s&&(e=t.coercer(e,a),o&&"type"!==t.type&&d(t.schema)&&d(e)&&!Array.isArray(e)))for(const r in e)void 0===t.schema[r]&&delete e[r];let u="valid";for(const n of t.validator(e,a))n.explanation=r.message,u="not_valid",yield[n,void 0];for(let[c,f,l]of t.entries(e,a)){const t=p(f,l,{path:void 0===c?n:[...n,c],branch:void 0===c?i:[...i,f],coerce:s,mask:o,message:r.message});for(const r of t)r[0]?(u=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):s&&(f=r[1],void 0===c?e=f:e instanceof Map?e.set(c,f):e instanceof Set?e.add(f):d(e)&&(void 0!==f||c in e)&&(e[c]=f))}if("not_valid"!==u)for(const n of t.refiner(e,a))n.explanation=r.message,u="not_refined",yield[n,void 0];"valid"===u&&(yield[void 0,e])}class y{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:s=(e=>e),entries:o=function*(){}}=e;this.type=t,this.schema=r,this.entries=o,this.coercer=s,this.validator=n?(e,t)=>h(n(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>h(i(e,t),t,this,e):()=>[]}assert(e,t){return m(e,this,t)}create(e,t){return g(e,this,t)}is(e){return v(e,this)}mask(e,t){return function(e,t,r){const n=w(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}(e,this,t)}validate(e,t={}){return w(e,this,t)}}function m(e,t,r){const n=w(e,t,{message:r});if(n[0])throw n[0]}function g(e,t,r){const n=w(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function v(e,t){return!w(e,t)[0]}function w(e,t,r={}){const n=p(e,t,r),i=function(e){const{done:t,value:r}=e.next();return t?void 0:r}(n);if(i[0]){return[new c(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])})),void 0]}return[void 0,i[1]]}function b(e,t){return new y({type:e,schema:null,validator:t})}function _(e){let t;return new y({type:"lazy",schema:null,*entries(r,n){t??(t=e()),yield*t.entries(r,n)},validator:(r,n)=>(t??(t=e()),t.validator(r,n)),coercer:(r,n)=>(t??(t=e()),t.coercer(r,n)),refiner:(r,n)=>(t??(t=e()),t.refiner(r,n))})}function E(e){return new y({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${f(e)}`})}function x(e){const t=f(e),r=typeof e;return new y({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \\`${t}\\`, but received: ${f(r)}`})}function k(){return b("never",(()=>!1))}function I(){return b("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${f(e)}`))}function A(e){const t=e?Object.keys(e):[],r=k();return new y({type:"object",schema:e||null,*entries(n){if(e&&d(n)){const i=new Set(Object.keys(n));for(const r of t)i.delete(r),yield[r,n[r],e[r]];for(const e of i)yield[e,n[e],r]}},validator:e=>d(e)||`Expected an object, but received: ${f(e)}`,coercer:e=>d(e)?{...e}:e})}function O(e){return new y({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function B(e,t){return new y({type:"record",schema:null,*entries(r){if(d(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>d(e)||`Expected an object, but received: ${f(e)}`})}function S(){return b("string",(e=>"string"==typeof e||`Expected a string, but received: ${f(e)}`))}function T(e){const t=e.map((e=>e.type)).join(" | ");return new y({type:"union",schema:null,coercer(t){for(const r of e){const[e,n]=r.validate(t,{coerce:!0});if(!e)return n}return t},validator(r,n){const i=[];for(const t of e){const[...e]=p(r,t,n),[s]=e;if(!s[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \\`${t}\\`, but received: ${f(r)}`,...i]}})}function N(){return b("unknown",(()=>!0))}function R(e,t,r){return new y({...e,coercer:(n,i)=>v(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}function Z(e,t){return C(e,"pattern",(r=>t.test(r)||`Expected a ${e.type} matching \\`/${t.source}/\\` but received "${r}"`))}function C(e,t,r){return new y({...e,*refiner(n,i){yield*e.refiner(n,i);const s=h(r(n,i),i,e,n);for(const e of s)yield{...e,refinement:t}}})}function j(e){return function(e){return function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)&&"string"==typeof e.message?e.message:null==e?"":String(e)}(e).replace(/\\.$/u,"")}function U(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}var P=class extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}};var L=e=>A(e);function $({path:e,branch:t}){const r=e[e.length-1];return o(t[t.length-2],r)}function M(e){return new y({...e,type:`optional ${e.type}`,validator:(t,r)=>!$(r)||e.validator(t,r),refiner:(t,r)=>!$(r)||e.refiner(t,r)})}var z=T([x(null),b("boolean",(e=>"boolean"==typeof e)),b("finite number",(e=>v(e,I())&&Number.isFinite(e))),S(),E(_((()=>z))),B(S(),_((()=>z)))]),F=R(z,b("any",(()=>!0)),(e=>(function(e,t,r="Assertion failed",n=P){try{m(e,t)}catch(e){throw U(n,`${r}: ${j(e)}.`)}}(e,z),JSON.parse(JSON.stringify(e,((e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t}))))));function q(e){try{return function(e){g(e,F)}(e),!0}catch{return!1}}var D=x("2.0"),V=function(e){return new y({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}(T([I(),S()])),H=L({code:b("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${f(e)}`)),message:S(),data:M(F),stack:M(S())}),K=T([B(S(),F),E(F)]);L({id:V,jsonrpc:D,method:S(),params:M(K)}),L({jsonrpc:D,method:S(),params:M(K)});A({id:V,jsonrpc:D,result:O(N()),error:O(H)});var W=L({id:V,jsonrpc:D,result:F}),J=L({id:V,jsonrpc:D,error:H});T([W,J]);var G=t.internal,Y="Unspecified error message. This is a bug, please report it.",X=(Q(G),"Unspecified server error.");function Q(e,t=Y){if(function(e){return Number.isInteger(e)}(e)){const t=e.toString();if(o(i,t))return i[t].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return X}return t}function ee(e){return Array.isArray(e)?e.map((e=>q(e)?e:s(e)?te(e):null)):s(e)?te(e):q(e)?e:null}function te(e){return Object.getOwnPropertyNames(e).reduce(((t,r)=>{const n=e[r];return q(n)&&(t[r]=n),t}),{})}var re=r(463),ne=class extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error(\'"code" must be an integer.\');if(!t||"string"!=typeof t)throw new Error(\'"message" must be a non-empty string.\');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data,function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}}(this.data)&&(e.data.cause=ee(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return re(this.serialize(),ie,2)}};function ie(e,t){if("[Circular]"!==t)return t}var se,oe,ae=e=>ce(t.invalidParams,e),ue=e=>ce(t.methodNotFound,e);function ce(e,t){const[r,n]=de(t);return new ne(e,r??Q(e),n)}function de(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t??void 0,r]}}return[]}!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`\'${e}\'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(se||(se={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(oe||(oe={}));const fe=se.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),le=e=>{switch(typeof e){case"undefined":return fe.undefined;case"string":return fe.string;case"number":return isNaN(e)?fe.nan:fe.number;case"boolean":return fe.boolean;case"function":return fe.function;case"bigint":return fe.bigint;case"symbol":return fe.symbol;case"object":return Array.isArray(e)?fe.array:null===e?fe.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?fe.promise:"undefined"!=typeof Map&&e instanceof Map?fe.map:"undefined"!=typeof Set&&e instanceof Set?fe.set:"undefined"!=typeof Date&&e instanceof Date?fe.date:fe.object;default:return fe.unknown}},he=se.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class pe extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){const r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,se.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}pe.create=e=>new pe(e);const ye=(e,t)=>{let r;switch(e.code){case he.invalid_type:r=e.received===fe.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case he.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,se.jsonStringifyReplacer)}`;break;case he.unrecognized_keys:r=`Unrecognized key(s) in object: ${se.joinValues(e.keys,", ")}`;break;case he.invalid_union:r="Invalid input";break;case he.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${se.joinValues(e.options)}`;break;case he.invalid_enum_value:r=`Invalid enum value. Expected ${se.joinValues(e.options)}, received \'${e.received}\'`;break;case he.invalid_arguments:r="Invalid function arguments";break;case he.invalid_return_type:r="Invalid function return type";break;case he.invalid_date:r="Invalid date";break;case he.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:se.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case he.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case he.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case he.custom:r="Invalid input";break;case he.invalid_intersection_types:r="Intersection results could not be merged";break;case he.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case he.not_finite:r="Number must be finite";break;default:r=t.defaultError,se.assertNever(e)}return{message:r}};let me=ye;function ge(){return me}const ve=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],o={...i,path:s};let a="";const u=n.filter((e=>!!e)).slice().reverse();for(const e of u)a=e(o,{data:t,defaultError:a}).message;return{...i,path:s,message:i.message||a}};function we(e,t){const r=ve({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,ge(),ye].filter((e=>!!e))});e.common.issues.push(r)}class be{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return _e;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t)r.push({key:await e.key,value:await e.value});return be.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return _e;if("aborted"===i.status)return _e;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!n.alwaysSet||(r[t.value]=i.value)}return{status:e.value,value:r}}}const _e=Object.freeze({status:"aborted"}),Ee=e=>({status:"dirty",value:e}),xe=e=>({status:"valid",value:e}),ke=e=>"aborted"===e.status,Ie=e=>"dirty"===e.status,Ae=e=>"valid"===e.status,Oe=e=>"undefined"!=typeof Promise&&e instanceof Promise;var Be;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(Be||(Be={}));class Se{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Te=(e,t)=>{if(Ae(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new pe(e.common.issues);return this._error=t,this._error}}};function Ne(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(\'Can\\\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.\');if(t)return{errorMap:t,description:i};return{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=n?n:t.defaultError}:{message:null!=r?r:t.defaultError},description:i}}class Re{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return le(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:le(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new be,ctx:{common:e.parent.common,data:e.data,parsedType:le(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Oe(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:le(e)},i=this._parseSync({data:e,path:n.path,parent:n});return Te(n,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:le(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(Oe(n)?n:Promise.resolve(n));return Te(r,i)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,n)=>{const i=e(t),s=()=>n.addIssue({code:he.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(s(),!1))):!!i||(s(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1)))}_refinement(e){return new wt({schema:this,typeName:Nt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return bt.create(this,this._def)}nullable(){return _t.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return et.create(this,this._def)}promise(){return vt.create(this,this._def)}or(e){return nt.create([this,e],this._def)}and(e){return at.create(this,e,this._def)}transform(e){return new wt({...Ne(this._def),schema:this,typeName:Nt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Et({...Ne(this._def),innerType:this,defaultValue:t,typeName:Nt.ZodDefault})}brand(){return new At({typeName:Nt.ZodBranded,type:this,...Ne(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new xt({...Ne(this._def),innerType:this,catchValue:t,typeName:Nt.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Ot.create(this,e)}readonly(){return Bt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ze=/^c[^\\s-]{8,}$/i,Ce=/^[a-z][a-z0-9]*$/,je=/^[0-9A-HJKMNP-TV-Z]{26}$/,Ue=/^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i,Pe=/^(?!\\.)(?!.*\\.\\.)([A-Z0-9_+-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;let Le;const $e=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Me=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;class ze extends Re{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==fe.string){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.string,received:t.parsedType}),_e}const t=new be;let r;for(const o of this._def.checks)if("min"===o.kind)e.data.length<o.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:he.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if("max"===o.kind)e.data.length>o.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:he.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if("length"===o.kind){const n=e.data.length>o.value,i=e.data.length<o.value;(n||i)&&(r=this._getOrReturnCtx(e,r),n?we(r,{code:he.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):i&&we(r,{code:he.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),t.dirty())}else if("email"===o.kind)Pe.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"email",code:he.invalid_string,message:o.message}),t.dirty());else if("emoji"===o.kind)Le||(Le=new RegExp("^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$","u")),Le.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"emoji",code:he.invalid_string,message:o.message}),t.dirty());else if("uuid"===o.kind)Ue.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"uuid",code:he.invalid_string,message:o.message}),t.dirty());else if("cuid"===o.kind)Ze.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cuid",code:he.invalid_string,message:o.message}),t.dirty());else if("cuid2"===o.kind)Ce.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cuid2",code:he.invalid_string,message:o.message}),t.dirty());else if("ulid"===o.kind)je.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"ulid",code:he.invalid_string,message:o.message}),t.dirty());else if("url"===o.kind)try{new URL(e.data)}catch(n){r=this._getOrReturnCtx(e,r),we(r,{validation:"url",code:he.invalid_string,message:o.message}),t.dirty()}else if("regex"===o.kind){o.regex.lastIndex=0;o.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"regex",code:he.invalid_string,message:o.message}),t.dirty())}else if("trim"===o.kind)e.data=e.data.trim();else if("includes"===o.kind)e.data.includes(o.value,o.position)||(r=this._getOrReturnCtx(e,r),we(r,{code:he.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),t.dirty());else if("toLowerCase"===o.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===o.kind)e.data=e.data.toUpperCase();else if("startsWith"===o.kind)e.data.startsWith(o.value)||(r=this._getOrReturnCtx(e,r),we(r,{code:he.invalid_string,validation:{startsWith:o.value},message:o.message}),t.dirty());else if("endsWith"===o.kind)e.data.endsWith(o.value)||(r=this._getOrReturnCtx(e,r),we(r,{code:he.invalid_string,validation:{endsWith:o.value},message:o.message}),t.dirty());else if("datetime"===o.kind){((s=o).precision?s.offset?new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{${s.precision}}(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$`):new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{${s.precision}}Z$`):0===s.precision?s.offset?new RegExp("^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$"):new RegExp("^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}Z$"):s.offset?new RegExp("^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(\\\\.\\\\d+)?(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$"):new RegExp("^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(\\\\.\\\\d+)?Z$")).test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:he.invalid_string,validation:"datetime",message:o.message}),t.dirty())}else"ip"===o.kind?(n=e.data,("v4"!==(i=o.version)&&i||!$e.test(n))&&("v6"!==i&&i||!Me.test(n))&&(r=this._getOrReturnCtx(e,r),we(r,{validation:"ip",code:he.invalid_string,message:o.message}),t.dirty())):se.assertNever(o);var n,i,s;return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:he.invalid_string,...Be.errToObj(r)})}_addCheck(e){return new ze({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Be.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Be.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Be.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Be.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Be.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Be.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Be.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Be.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...Be.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Be.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...Be.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Be.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Be.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Be.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Be.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Be.errToObj(t)})}nonempty(e){return this.min(1,Be.errToObj(e))}trim(){return new ze({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ze({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ze({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Fe(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}ze.create=e=>{var t;return new ze({checks:[],typeName:Nt.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Ne(e)})};class qe extends Re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==fe.number){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.number,received:t.parsedType}),_e}let t;const r=new be;for(const n of this._def.checks)if("int"===n.kind)se.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),we(t,{code:he.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty());else if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),we(t,{code:he.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),we(t,{code:he.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else"multipleOf"===n.kind?0!==Fe(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),we(t,{code:he.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),we(t,{code:he.not_finite,message:n.message}),r.dirty()):se.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Be.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Be.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Be.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Be.toString(t))}setLimit(e,t,r,n){return new qe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Be.toString(n)}]})}_addCheck(e){return new qe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Be.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Be.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Be.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Be.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Be.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Be.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&se.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}qe.create=e=>new qe({checks:[],typeName:Nt.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...Ne(e)});class De extends Re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==fe.bigint){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.bigint,received:t.parsedType}),_e}let t;const r=new be;for(const n of this._def.checks)if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),we(t,{code:he.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),we(t,{code:he.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),we(t,{code:he.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):se.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Be.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Be.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Be.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Be.toString(t))}setLimit(e,t,r,n){return new De({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Be.toString(n)}]})}_addCheck(e){return new De({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Be.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Be.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}De.create=e=>{var t;return new De({checks:[],typeName:Nt.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Ne(e)})};class Ve extends Re{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==fe.boolean){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.boolean,received:t.parsedType}),_e}return xe(e.data)}}Ve.create=e=>new Ve({typeName:Nt.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...Ne(e)});class He extends Re{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==fe.date){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.date,received:t.parsedType}),_e}if(isNaN(e.data.getTime())){return we(this._getOrReturnCtx(e),{code:he.invalid_date}),_e}const t=new be;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:he.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:he.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):se.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new He({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Be.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Be.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}He.create=e=>new He({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Nt.ZodDate,...Ne(e)});class Ke extends Re{_parse(e){if(this._getType(e)!==fe.symbol){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.symbol,received:t.parsedType}),_e}return xe(e.data)}}Ke.create=e=>new Ke({typeName:Nt.ZodSymbol,...Ne(e)});class We extends Re{_parse(e){if(this._getType(e)!==fe.undefined){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.undefined,received:t.parsedType}),_e}return xe(e.data)}}We.create=e=>new We({typeName:Nt.ZodUndefined,...Ne(e)});class Je extends Re{_parse(e){if(this._getType(e)!==fe.null){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.null,received:t.parsedType}),_e}return xe(e.data)}}Je.create=e=>new Je({typeName:Nt.ZodNull,...Ne(e)});class Ge extends Re{constructor(){super(...arguments),this._any=!0}_parse(e){return xe(e.data)}}Ge.create=e=>new Ge({typeName:Nt.ZodAny,...Ne(e)});class Ye extends Re{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xe(e.data)}}Ye.create=e=>new Ye({typeName:Nt.ZodUnknown,...Ne(e)});class Xe extends Re{_parse(e){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.never,received:t.parsedType}),_e}}Xe.create=e=>new Xe({typeName:Nt.ZodNever,...Ne(e)});class Qe extends Re{_parse(e){if(this._getType(e)!==fe.undefined){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.void,received:t.parsedType}),_e}return xe(e.data)}}Qe.create=e=>new Qe({typeName:Nt.ZodVoid,...Ne(e)});class et extends Re{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==fe.array)return we(t,{code:he.invalid_type,expected:fe.array,received:t.parsedType}),_e;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(we(t,{code:e?he.too_big:he.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(we(t,{code:he.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(we(t,{code:he.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new Se(t,e,t.path,r))))).then((e=>be.mergeArray(r,e)));const i=[...t.data].map(((e,r)=>n.type._parseSync(new Se(t,e,t.path,r))));return be.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new et({...this._def,minLength:{value:e,message:Be.toString(t)}})}max(e,t){return new et({...this._def,maxLength:{value:e,message:Be.toString(t)}})}length(e,t){return new et({...this._def,exactLength:{value:e,message:Be.toString(t)}})}nonempty(e){return this.min(1,e)}}function tt(e){if(e instanceof rt){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=bt.create(tt(n))}return new rt({...e._def,shape:()=>t})}return e instanceof et?new et({...e._def,type:tt(e.element)}):e instanceof bt?bt.create(tt(e.unwrap())):e instanceof _t?_t.create(tt(e.unwrap())):e instanceof ut?ut.create(e.items.map((e=>tt(e)))):e}et.create=(e,t)=>new et({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Nt.ZodArray,...Ne(t)});class rt extends Re{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=se.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==fe.object){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.object,received:t.parsedType}),_e}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof Xe&&"strip"===this._def.unknownKeys))for(const e in r.data)i.includes(e)||s.push(e);const o=[];for(const e of i){const t=n[e],i=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new Se(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof Xe){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(we(r,{code:he.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const n=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new Se(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of o){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>be.mergeObjectSync(t,e))):be.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return Be.errToObj,new rt({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,s,o;const a=null!==(s=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=Be.errToObj(e).message)&&void 0!==o?o:a}:{message:a}}}:{}})}strip(){return new rt({...this._def,unknownKeys:"strip"})}passthrough(){return new rt({...this._def,unknownKeys:"passthrough"})}extend(e){return new rt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new rt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Nt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new rt({...this._def,catchall:e})}pick(e){const t={};return se.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new rt({...this._def,shape:()=>t})}omit(e){const t={};return se.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new rt({...this._def,shape:()=>t})}deepPartial(){return tt(this)}partial(e){const t={};return se.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new rt({...this._def,shape:()=>t})}required(e){const t={};return se.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof bt;)e=e._def.innerType;t[r]=e}})),new rt({...this._def,shape:()=>t})}keyof(){return yt(se.objectKeys(this.shape))}}rt.create=(e,t)=>new rt({shape:()=>e,unknownKeys:"strip",catchall:Xe.create(),typeName:Nt.ZodObject,...Ne(t)}),rt.strictCreate=(e,t)=>new rt({shape:()=>e,unknownKeys:"strict",catchall:Xe.create(),typeName:Nt.ZodObject,...Ne(t)}),rt.lazycreate=(e,t)=>new rt({shape:e,unknownKeys:"strip",catchall:Xe.create(),typeName:Nt.ZodObject,...Ne(t)});class nt extends Re{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new pe(e.ctx.common.issues)));return we(t,{code:he.invalid_union,unionErrors:r}),_e}));{let e;const n=[];for(const i of r){const r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map((e=>new pe(e)));return we(t,{code:he.invalid_union,unionErrors:i}),_e}}get options(){return this._def.options}}nt.create=(e,t)=>new nt({options:e,typeName:Nt.ZodUnion,...Ne(t)});const it=e=>e instanceof ht?it(e.schema):e instanceof wt?it(e.innerType()):e instanceof pt?[e.value]:e instanceof mt?e.options:e instanceof gt?Object.keys(e.enum):e instanceof Et?it(e._def.innerType):e instanceof We?[void 0]:e instanceof Je?[null]:null;class st extends Re{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==fe.object)return we(t,{code:he.invalid_type,expected:fe.object,received:t.parsedType}),_e;const r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(we(t,{code:he.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),_e)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const r of t){const t=it(r.shape[e]);if(!t)throw new Error(`A discriminator value for key \\`${e}\\` could not be extracted from all schema options`);for(const i of t){if(n.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new st({typeName:Nt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...Ne(r)})}}function ot(e,t){const r=le(e),n=le(t);if(e===t)return{valid:!0,data:e};if(r===fe.object&&n===fe.object){const r=se.objectKeys(t),n=se.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const r of n){const n=ot(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(r===fe.array&&n===fe.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=ot(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===fe.date&&n===fe.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class at extends Re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(ke(e)||ke(n))return _e;const i=ot(e.value,n.value);return i.valid?((Ie(e)||Ie(n))&&t.dirty(),{status:t.value,value:i.data}):(we(r,{code:he.invalid_intersection_types}),_e)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>n(e,t))):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}at.create=(e,t,r)=>new at({left:e,right:t,typeName:Nt.ZodIntersection,...Ne(r)});class ut extends Re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==fe.array)return we(r,{code:he.invalid_type,expected:fe.array,received:r.parsedType}),_e;if(r.data.length<this._def.items.length)return we(r,{code:he.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_e;!this._def.rest&&r.data.length>this._def.items.length&&(we(r,{code:he.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new Se(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(n).then((e=>be.mergeArray(t,e))):be.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new ut({...this._def,rest:e})}}ut.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ut({items:e,typeName:Nt.ZodTuple,rest:null,...Ne(t)})};class ct extends Re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==fe.object)return we(r,{code:he.invalid_type,expected:fe.object,received:r.parsedType}),_e;const n=[],i=this._def.keyType,s=this._def.valueType;for(const e in r.data)n.push({key:i._parse(new Se(r,e,r.path,e)),value:s._parse(new Se(r,r.data[e],r.path,e))});return r.common.async?be.mergeObjectAsync(t,n):be.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new ct(t instanceof Re?{keyType:e,valueType:t,typeName:Nt.ZodRecord,...Ne(r)}:{keyType:ze.create(),valueType:e,typeName:Nt.ZodRecord,...Ne(t)})}}class dt extends Re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==fe.map)return we(r,{code:he.invalid_type,expected:fe.map,received:r.parsedType}),_e;const n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map((([e,t],s)=>({key:n._parse(new Se(r,e,r.path,[s,"key"])),value:i._parse(new Se(r,t,r.path,[s,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of s){const n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return _e;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of s){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return _e;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}dt.create=(e,t,r)=>new dt({valueType:t,keyType:e,typeName:Nt.ZodMap,...Ne(r)});class ft extends Re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==fe.set)return we(r,{code:he.invalid_type,expected:fe.set,received:r.parsedType}),_e;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(we(r,{code:he.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(we(r,{code:he.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const r=new Set;for(const n of e){if("aborted"===n.status)return _e;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const o=[...r.data.values()].map(((e,t)=>i._parse(new Se(r,e,r.path,t))));return r.common.async?Promise.all(o).then((e=>s(e))):s(o)}min(e,t){return new ft({...this._def,minSize:{value:e,message:Be.toString(t)}})}max(e,t){return new ft({...this._def,maxSize:{value:e,message:Be.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ft.create=(e,t)=>new ft({valueType:e,minSize:null,maxSize:null,typeName:Nt.ZodSet,...Ne(t)});class lt extends Re{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==fe.function)return we(t,{code:he.invalid_type,expected:fe.function,received:t.parsedType}),_e;function r(e,r){return ve({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ge(),ye].filter((e=>!!e)),issueData:{code:he.invalid_arguments,argumentsError:r}})}function n(e,r){return ve({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ge(),ye].filter((e=>!!e)),issueData:{code:he.invalid_return_type,returnTypeError:r}})}const i={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof vt){const e=this;return xe((async function(...t){const o=new pe([]),a=await e._def.args.parseAsync(t,i).catch((e=>{throw o.addIssue(r(t,e)),o})),u=await Reflect.apply(s,this,a);return await e._def.returns._def.type.parseAsync(u,i).catch((e=>{throw o.addIssue(n(u,e)),o}))}))}{const e=this;return xe((function(...t){const o=e._def.args.safeParse(t,i);if(!o.success)throw new pe([r(t,o.error)]);const a=Reflect.apply(s,this,o.data),u=e._def.returns.safeParse(a,i);if(!u.success)throw new pe([n(a,u.error)]);return u.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new lt({...this._def,args:ut.create(e).rest(Ye.create())})}returns(e){return new lt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new lt({args:e||ut.create([]).rest(Ye.create()),returns:t||Ye.create(),typeName:Nt.ZodFunction,...Ne(r)})}}class ht extends Re{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ht.create=(e,t)=>new ht({getter:e,typeName:Nt.ZodLazy,...Ne(t)});class pt extends Re{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return we(t,{received:t.data,code:he.invalid_literal,expected:this._def.value}),_e}return{status:"valid",value:e.data}}get value(){return this._def.value}}function yt(e,t){return new mt({values:e,typeName:Nt.ZodEnum,...Ne(t)})}pt.create=(e,t)=>new pt({value:e,typeName:Nt.ZodLiteral,...Ne(t)});class mt extends Re{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return we(t,{expected:se.joinValues(r),received:t.parsedType,code:he.invalid_type}),_e}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return we(t,{received:t.data,code:he.invalid_enum_value,options:r}),_e}return xe(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return mt.create(e)}exclude(e){return mt.create(this.options.filter((t=>!e.includes(t))))}}mt.create=yt;class gt extends Re{_parse(e){const t=se.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==fe.string&&r.parsedType!==fe.number){const e=se.objectValues(t);return we(r,{expected:se.joinValues(e),received:r.parsedType,code:he.invalid_type}),_e}if(-1===t.indexOf(e.data)){const e=se.objectValues(t);return we(r,{received:r.data,code:he.invalid_enum_value,options:e}),_e}return xe(e.data)}get enum(){return this._def.values}}gt.create=(e,t)=>new gt({values:e,typeName:Nt.ZodNativeEnum,...Ne(t)});class vt extends Re{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==fe.promise&&!1===t.common.async)return we(t,{code:he.invalid_type,expected:fe.promise,received:t.parsedType}),_e;const r=t.parsedType===fe.promise?t.data:Promise.resolve(t.data);return xe(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}vt.create=(e,t)=>new vt({type:e,typeName:Nt.ZodPromise,...Ne(t)});class wt extends Re{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Nt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{we(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){const e=n.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?_e:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?_e:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ae(e))return e;const s=n.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>Ae(e)?Promise.resolve(n.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}se.assertNever(n)}}wt.create=(e,t,r)=>new wt({schema:e,typeName:Nt.ZodEffects,effect:t,...Ne(r)}),wt.createWithPreprocess=(e,t,r)=>new wt({schema:t,effect:{type:"preprocess",transform:e},typeName:Nt.ZodEffects,...Ne(r)});class bt extends Re{_parse(e){return this._getType(e)===fe.undefined?xe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bt.create=(e,t)=>new bt({innerType:e,typeName:Nt.ZodOptional,...Ne(t)});class _t extends Re{_parse(e){return this._getType(e)===fe.null?xe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_t.create=(e,t)=>new _t({innerType:e,typeName:Nt.ZodNullable,...Ne(t)});class Et extends Re{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===fe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Et.create=(e,t)=>new Et({innerType:e,typeName:Nt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Ne(t)});class xt extends Re{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Oe(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new pe(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new pe(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}xt.create=(e,t)=>new xt({innerType:e,typeName:Nt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Ne(t)});class kt extends Re{_parse(e){if(this._getType(e)!==fe.nan){const t=this._getOrReturnCtx(e);return we(t,{code:he.invalid_type,expected:fe.nan,received:t.parsedType}),_e}return{status:"valid",value:e.data}}}kt.create=e=>new kt({typeName:Nt.ZodNaN,...Ne(e)});const It=Symbol("zod_brand");class At extends Re{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ot extends Re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?_e:"dirty"===e.status?(t.dirty(),Ee(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?_e:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new Ot({in:e,out:t,typeName:Nt.ZodPipeline})}}class Bt extends Re{_parse(e){const t=this._def.innerType._parse(e);return Ae(t)&&(t.value=Object.freeze(t.value)),t}}Bt.create=(e,t)=>new Bt({innerType:e,typeName:Nt.ZodReadonly,...Ne(t)});const St=(e,t={},r)=>e?Ge.create().superRefine(((n,i)=>{var s,o;if(!e(n)){const e="function"==typeof t?t(n):"string"==typeof t?{message:t}:t,a=null===(o=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===o||o,u="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...u,fatal:a})}})):Ge.create(),Tt={object:rt.lazycreate};var Nt;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Nt||(Nt={}));const Rt=ze.create,Zt=qe.create,Ct=kt.create,jt=De.create,Ut=Ve.create,Pt=He.create,Lt=Ke.create,$t=We.create,Mt=Je.create,zt=Ge.create,Ft=Ye.create,qt=Xe.create,Dt=Qe.create,Vt=et.create,Ht=rt.create,Kt=rt.strictCreate,Wt=nt.create,Jt=st.create,Gt=at.create,Yt=ut.create,Xt=ct.create,Qt=dt.create,er=ft.create,tr=lt.create,rr=ht.create,nr=pt.create,ir=mt.create,sr=gt.create,or=vt.create,ar=wt.create,ur=bt.create,cr=_t.create,dr=wt.createWithPreprocess,fr=Ot.create,lr={string:e=>ze.create({...e,coerce:!0}),number:e=>qe.create({...e,coerce:!0}),boolean:e=>Ve.create({...e,coerce:!0}),bigint:e=>De.create({...e,coerce:!0}),date:e=>He.create({...e,coerce:!0})},hr=_e;var pr=Object.freeze({__proto__:null,defaultErrorMap:ye,setErrorMap:function(e){me=e},getErrorMap:ge,makeIssue:ve,EMPTY_PATH:[],addIssueToContext:we,ParseStatus:be,INVALID:_e,DIRTY:Ee,OK:xe,isAborted:ke,isDirty:Ie,isValid:Ae,isAsync:Oe,get util(){return se},get objectUtil(){return oe},ZodParsedType:fe,getParsedType:le,ZodType:Re,ZodString:ze,ZodNumber:qe,ZodBigInt:De,ZodBoolean:Ve,ZodDate:He,ZodSymbol:Ke,ZodUndefined:We,ZodNull:Je,ZodAny:Ge,ZodUnknown:Ye,ZodNever:Xe,ZodVoid:Qe,ZodArray:et,ZodObject:rt,ZodUnion:nt,ZodDiscriminatedUnion:st,ZodIntersection:at,ZodTuple:ut,ZodRecord:ct,ZodMap:dt,ZodSet:ft,ZodFunction:lt,ZodLazy:ht,ZodLiteral:pt,ZodEnum:mt,ZodNativeEnum:gt,ZodPromise:vt,ZodEffects:wt,ZodTransformer:wt,ZodOptional:bt,ZodNullable:_t,ZodDefault:Et,ZodCatch:xt,ZodNaN:kt,BRAND:It,ZodBranded:At,ZodPipeline:Ot,ZodReadonly:Bt,custom:St,Schema:Re,ZodSchema:Re,late:Tt,get ZodFirstPartyTypeKind(){return Nt},coerce:lr,any:zt,array:Vt,bigint:jt,boolean:Ut,date:Pt,discriminatedUnion:Jt,effect:ar,enum:ir,function:tr,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>St((t=>t instanceof e),t),intersection:Gt,lazy:rr,literal:nr,map:Qt,nan:Ct,nativeEnum:sr,never:qt,null:Mt,nullable:cr,number:Zt,object:Ht,oboolean:()=>Ut().optional(),onumber:()=>Zt().optional(),optional:ur,ostring:()=>Rt().optional(),pipeline:fr,preprocess:dr,promise:or,record:Xt,set:er,strictObject:Kt,string:Rt,symbol:Lt,transformer:ar,tuple:Yt,undefined:$t,union:Wt,unknown:Ft,void:Dt,NEVER:hr,ZodIssueCode:he,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:pe});function yr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function mr(e,...t){if(!((r=e)instanceof Uint8Array||null!=r&&"object"==typeof r&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function gr(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");yr(e.outputLen),yr(e.blockLen)}function vr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function wr(e,t){mr(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const br="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const _r=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Er=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function xr(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),mr(e),e}class kr{clone(){return this._cloneInto()}}function Ir(e=32){if(br&&"function"==typeof br.getRandomValues)return br.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const Ar=(e,t,r)=>e&t^e&r^t&r;class Or extends kr{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=_r(this.buffer)}update(e){vr(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=xr(e)).length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=_r(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){vr(this),wr(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),u=n?4:0,c=n?0:4;e.setUint32(t+u,o,n),e.setUint32(t+c,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=_r(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)o.setUint32(4*e,c[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const Br=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Sr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Tr=new Uint32Array(64);class Nr extends Or{constructor(){super(64,32,8,!1),this.A=0|Sr[0],this.B=0|Sr[1],this.C=0|Sr[2],this.D=0|Sr[3],this.E=0|Sr[4],this.F=0|Sr[5],this.G=0|Sr[6],this.H=0|Sr[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)Tr[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Tr[e-15],r=Tr[e-2],n=Er(t,7)^Er(t,18)^t>>>3,i=Er(r,17)^Er(r,19)^r>>>10;Tr[e]=i+Tr[e-7]+n+Tr[e-16]|0}let{A:r,B:n,C:i,D:s,E:o,F:a,G:u,H:c}=this;for(let e=0;e<64;e++){const t=c+(Er(o,6)^Er(o,11)^Er(o,25))+((d=o)&a^~d&u)+Br[e]+Tr[e]|0,f=(Er(r,2)^Er(r,13)^Er(r,22))+Ar(r,n,i)|0;c=u,u=a,a=o,o=s+t|0,s=i,i=n,n=r,r=t+f|0}var d;r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,i,s,o,a,u,c)}roundClean(){Tr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Rr=function(e){const t=t=>e().update(xr(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}((()=>new Nr)),Zr=(BigInt(0),BigInt(1)),Cr=BigInt(2);function jr(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function Ur(e){if(!jr(e))throw new Error("Uint8Array expected")}const Pr=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Lr(e){Ur(e);let t="";for(let r=0;r<e.length;r++)t+=Pr[e[r]];return t}function $r(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const Mr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function zr(e){return e>=Mr._0&&e<=Mr._9?e-Mr._0:e>=Mr._A&&e<=Mr._F?e-(Mr._A-10):e>=Mr._a&&e<=Mr._f?e-(Mr._a-10):void 0}function Fr(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=zr(e.charCodeAt(i)),s=zr(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error(\'hex string expected, got non-hex character "\'+t+\'" at index \'+i)}n[t]=16*r+s}return n}function qr(e){return $r(Lr(e))}function Dr(e){return Ur(e),$r(Lr(Uint8Array.from(e).reverse()))}function Vr(e,t){return Fr(e.toString(16).padStart(2*t,"0"))}function Hr(e,t){return Vr(e,t).reverse()}function Kr(e,t,r){let n;if("string"==typeof t)try{n=Fr(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else{if(!jr(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function Wr(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];Ur(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const Jr=e=>(Cr<<BigInt(e-1))-Zr,Gr=e=>new Uint8Array(e),Yr=e=>Uint8Array.from(e);function Xr(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=Gr(e),i=Gr(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...e)=>r(i,n,...e),u=(e=Gr())=>{i=a(Yr([0]),e),n=a(),0!==e.length&&(i=a(Yr([1]),e),n=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return Wr(...r)};return(e,t)=>{let r;for(o(),u(e);!(r=t(c()));)u();return o(),r}}const Qr={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||jr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function en(e,t,r={}){const n=(t,r,n)=>{const i=Qr[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const s=e[t];if(!(n&&void 0===s||i(s,e)))throw new Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}const tn=BigInt(0),rn=BigInt(1),nn=BigInt(2),sn=BigInt(3),on=BigInt(4),an=BigInt(5),un=BigInt(8);BigInt(9),BigInt(16);function cn(e,t){const r=e%t;return r>=tn?r:t+r}function dn(e,t,r){if(r<=tn||t<tn)throw new Error("Expected power/modulo > 0");if(r===rn)return tn;let n=rn;for(;t>tn;)t&rn&&(n=n*e%r),e=e*e%r,t>>=rn;return n}function fn(e,t,r){let n=e;for(;t-- >tn;)n*=n,n%=r;return n}function ln(e,t){if(e===tn||t<=tn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=cn(e,t),n=t,i=tn,s=rn,o=rn,a=tn;for(;r!==tn;){const e=n/r,t=n%r,u=i-o*e,c=s-a*e;n=r,r=t,i=o,s=a,o=u,a=c}if(n!==rn)throw new Error("invert: does not exist");return cn(i,t)}function hn(e){if(e%on===sn){const t=(e+rn)/on;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%un===an){const t=(e-an)/un;return function(e,r){const n=e.mul(r,nn),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,nn),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-rn)/nn;let r,n,i;for(r=e-rn,n=0;r%nn===tn;r/=nn,n++);for(i=nn;i<e&&dn(i,t,e)!==e-rn;i++);if(1===n){const t=(e+rn)/on;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const s=(r+rn)/nn;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,u=e.pow(e.mul(e.ONE,i),r),c=e.pow(o,s),d=e.pow(o,r);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(u,rn<<BigInt(a-t-1));u=e.sqr(r),c=e.mul(c,r),d=e.mul(d,u),a=t}return c}}(e)}const pn=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yn(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function mn(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function gn(e){const t=mn(e);return t+Math.ceil(t/2)}class vn extends kr{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,gr(e);const r=xr(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return vr(this),this.iHash.update(e),this}digestInto(e){vr(this),mr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const wn=(e,t,r)=>new vn(e,t).update(r).digest();wn.create=(e,t)=>new vn(e,t);const bn=BigInt(0),_n=BigInt(1);function En(e){return function(e){const t=pn.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});en(e,t)}(e.Fp),en(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...yn(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:xn,hexToBytes:kn}=e,In={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=In;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:xn(n),l:e.subarray(r+2)}},toSig(e){const{Err:t}=In,r="string"==typeof e?kn(e):e;Ur(r);let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=In._parseInt(r.subarray(2)),{d:o,l:a}=In._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),s=n.length/2,o=i.length/2,a=r(s),u=r(o);return`30${r(o+s+4)}02${u}${i}02${a}${n}`}},An=BigInt(0),On=BigInt(1),Bn=(BigInt(2),BigInt(3));BigInt(4);function Sn(e){const t=function(e){const t=En(e);en(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{const i=t.toAffine();return Wr(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){const{a:n,b:i}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){return"bigint"==typeof e&&An<e&&e<t.n}function a(e){if(!o(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:s}=t;if(r&&"bigint"!=typeof e){if(jr(e)&&(e=Lr(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*n,"0")}let o;try{o="bigint"==typeof e?e:qr(Kr("private key",e,n))}catch(t){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return i&&(o=cn(o,s)),a(o),o}const c=new Map;function d(e){if(!(e instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof f)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?f.ZERO:new f(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(f.fromAffine)}static fromHex(e){const t=f.fromAffine(i(Kr("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return f.BASE.multiply(u(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),o=s(e);if(!r.eql(i,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn\'t support isOdd")}equals(e){d(e);const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=e,u=r.eql(r.mul(t,a),r.mul(s,i)),c=r.eql(r.mul(n,a),r.mul(o,i));return u&&c}negate(){return new f(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,Bn),{px:s,py:o,pz:a}=this;let u=r.ZERO,c=r.ZERO,d=r.ZERO,l=r.mul(s,s),h=r.mul(o,o),p=r.mul(a,a),y=r.mul(s,o);return y=r.add(y,y),d=r.mul(s,a),d=r.add(d,d),u=r.mul(e,d),c=r.mul(i,p),c=r.add(u,c),u=r.sub(h,c),c=r.add(h,c),c=r.mul(u,c),u=r.mul(y,u),d=r.mul(i,d),p=r.mul(e,p),y=r.sub(l,p),y=r.mul(e,y),y=r.add(y,d),d=r.add(l,l),l=r.add(d,l),l=r.add(l,p),l=r.mul(l,y),c=r.add(c,l),p=r.mul(o,a),p=r.add(p,p),l=r.mul(p,y),u=r.sub(u,l),d=r.mul(p,h),d=r.add(d,d),d=r.add(d,d),new f(u,c,d)}add(e){d(e);const{px:n,py:i,pz:s}=this,{px:o,py:a,pz:u}=e;let c=r.ZERO,l=r.ZERO,h=r.ZERO;const p=t.a,y=r.mul(t.b,Bn);let m=r.mul(n,o),g=r.mul(i,a),v=r.mul(s,u),w=r.add(n,i),b=r.add(o,a);w=r.mul(w,b),b=r.add(m,g),w=r.sub(w,b),b=r.add(n,s);let _=r.add(o,u);return b=r.mul(b,_),_=r.add(m,v),b=r.sub(b,_),_=r.add(i,s),c=r.add(a,u),_=r.mul(_,c),c=r.add(g,v),_=r.sub(_,c),h=r.mul(p,b),c=r.mul(y,v),h=r.add(c,h),c=r.sub(g,h),h=r.add(g,h),l=r.mul(c,h),g=r.add(m,m),g=r.add(g,m),v=r.mul(p,v),b=r.mul(y,b),g=r.add(g,v),v=r.sub(m,v),v=r.mul(p,v),b=r.add(b,v),m=r.mul(g,b),l=r.add(l,m),m=r.mul(_,b),c=r.mul(w,c),c=r.sub(c,m),m=r.mul(w,g),h=r.mul(_,h),h=r.add(h,m),new f(c,l,h)}subtract(e){return this.add(e.negate())}is0(){return this.equals(f.ZERO)}wNAF(e){return h.wNAFCached(this,c,e,(e=>{const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(f.fromAffine)}))}multiplyUnsafe(e){const n=f.ZERO;if(e===An)return n;if(a(e),e===On)return this;const{endo:i}=t;if(!i)return h.unsafeLadder(this,e);let{k1neg:s,k1:o,k2neg:u,k2:c}=i.splitScalar(e),d=n,l=n,p=this;for(;o>An||c>An;)o&On&&(d=d.add(p)),c&On&&(l=l.add(p)),p=p.double(),o>>=On,c>>=On;return s&&(d=d.negate()),u&&(l=l.negate()),l=new f(r.mul(l.px,i.beta),l.py,l.pz),d.add(l)}multiply(e){a(e);let n,i,s=e;const{endo:o}=t;if(o){const{k1neg:e,k1:t,k2neg:a,k2:u}=o.splitScalar(s);let{p:c,f:d}=this.wNAF(t),{p:l,f:p}=this.wNAF(u);c=h.constTimeNegate(e,c),l=h.constTimeNegate(a,l),l=new f(r.mul(l.px,o.beta),l.py,l.pz),n=c.add(l),i=d.add(p)}else{const{p:e,f:t}=this.wNAF(s);n=e,i=t}return f.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){const n=f.BASE,i=(e,t)=>t!==An&&t!==On&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){const{px:t,py:n,pz:i}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(i));const o=r.mul(t,e),a=r.mul(n,e),u=r.mul(i,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===On)return!0;if(r)return r(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===On?this:r?r(f,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(f,this,e)}toHex(e=!0){return Lr(this.toRawBytes(e))}}f.BASE=new f(t.Gx,t.Gy,r.ONE),f.ZERO=new f(r.ZERO,r.ONE,r.ZERO);const l=t.nBitLength,h=function(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>bn;)r&_n&&(n=n.add(i)),i=i.double(),r>>=_n;return n},precomputeWindow(e,t){const{windows:r,windowSize:i}=n(t),s=[];let o=e,a=o;for(let e=0;e<r;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(t,i,s){const{windows:o,windowSize:a}=n(t);let u=e.ZERO,c=e.BASE;const d=BigInt(2**t-1),f=2**t,l=BigInt(t);for(let e=0;e<o;e++){const t=e*a;let n=Number(s&d);s>>=l,n>a&&(n-=f,s+=_n);const o=t,h=t+Math.abs(n)-1,p=e%2!=0,y=n<0;0===n?c=c.add(r(p,i[o])):u=u.add(r(y,i[h]))}return{p:u,f:c}},wNAFCached(e,t,r,n){const i=e._WINDOW_SIZE||1;let s=t.get(e);return s||(s=this.precomputeWindow(e,i),1!==i&&t.set(e,n(s))),this.wNAF(i,s,r)}}}(f,t.endo?Math.ceil(l/2):l);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:u,weierstrassEquation:s,isWithinCurveOrder:o}}function Tn(e){const t=function(e){const t=En(e);return en(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function o(e){return cn(e,n)}function a(e){return ln(e,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:d,isWithinCurveOrder:f}=Sn({...t,toBytes(e,t,n){const i=t.toAffine(),s=r.toBytes(i.x),o=Wr;return n?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],o=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===s&&4===n){return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}{const e=qr(o);if(!(An<(a=e)&&a<r.ORDER))throw new Error("Point is not on curve");const t=d(e);let i;try{i=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!==((i&On)===On)&&(i=r.neg(i)),{x:e,y:i}}var a}}),l=e=>Lr(Vr(e,t.nByteLength));function h(e){return e>n>>On}const p=(e,t,r)=>qr(e.slice(t,r));class y{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=Kr("compactSignature",e,2*r),new y(p(e,0,r),p(e,r,2*r))}static fromDER(e){const{r:t,s:r}=In.toSig(Kr("DER",e));return new y(t,r)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:s}=this,c=w(Kr("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const d=2===s||3===s?n+t.n:n;if(d>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const f=1&s?"03":"02",h=u.fromHex(f+l(d)),p=a(d),y=o(-c*p),m=o(i*p),g=u.BASE.multiplyAndAddUnsafe(h,y,m);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Fr(this.toDERHex())}toDERHex(){return In.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Fr(this.toCompactHex())}toCompactHex(){return l(this.r)+l(this.s)}}const m={isValidPrivateKey(e){try{return c(e),!0}catch(e){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const e=gn(t.n);return function(e,t,r=!1){const n=e.length,i=mn(t),s=gn(t);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const o=cn(r?qr(e):Dr(e),t-rn)+rn;return r?Hr(o,i):Vr(o,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=u.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function g(e){const t=jr(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===s:r?n===2*i||n===2*s:e instanceof u}const v=t.bits2int||function(e){const r=qr(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},w=t.bits2int_modN||function(e){return o(v(e))},b=Jr(t.nBitLength);function _(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(An<=e&&e<b))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Vr(e,t.nByteLength)}function E(e,n,i=x){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:d}=t;let{lowS:l,prehash:p,extraEntropy:m}=i;null==l&&(l=!0),e=Kr("msgHash",e),p&&(e=Kr("prehashed msgHash",s(e)));const g=w(e),b=c(n),E=[_(b),_(g)];if(null!=m&&!1!==m){const e=!0===m?d(r.BYTES):m;E.push(Kr("extraEntropy",e))}const k=Wr(...E),I=g;return{seed:k,k2sig:function(e){const t=v(e);if(!f(t))return;const r=a(t),n=u.BASE.multiply(t).toAffine(),i=o(n.x);if(i===An)return;const s=o(r*o(I+i*b));if(s===An)return;let c=(n.x===i?0:2)|Number(n.y&On),d=s;return l&&h(s)&&(d=function(e){return h(e)?o(-e):e}(s),c^=1),new y(i,d,c)}}}const x={lowS:t.lowS,prehash:!1},k={lowS:t.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return u.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(g(e))throw new Error("first arg must be private key");if(!g(t))throw new Error("second arg must be public key");return u.fromHex(t).multiply(c(e)).toRawBytes(r)},sign:function(e,r,n=x){const{seed:i,k2sig:s}=E(e,r,n),o=t;return Xr(o.hash.outputLen,o.nByteLength,o.hmac)(i,s)},verify:function(e,r,n,i=k){const s=e;if(r=Kr("msgHash",r),n=Kr("publicKey",n),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:d}=i;let f,l;try{if("string"==typeof s||jr(s))try{f=y.fromDER(s)}catch(e){if(!(e instanceof In.Err))throw e;f=y.fromCompact(s)}else{if("object"!=typeof s||"bigint"!=typeof s.r||"bigint"!=typeof s.s)throw new Error("PARSE");{const{r:e,s:t}=s;f=new y(e,t)}}l=u.fromHex(n)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&f.hasHighS())return!1;d&&(r=t.hash(r));const{r:h,s:p}=f,m=w(r),g=a(p),v=o(m*g),b=o(h*g),_=u.BASE.multiplyAndAddUnsafe(l,v,b)?.toAffine();return!!_&&o(_.x)===h},ProjectivePoint:u,Signature:y,utils:m}}function Nn(e){return{hash:e,hmac:(t,...r)=>wn(e,t,function(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];mr(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}(...r)),randomBytes:Ir}}const Rn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Zn=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Cn=BigInt(1),jn=BigInt(2),Un=(e,t)=>(e+t/jn)/t;function Pn(e){const t=Rn,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),c=e*e*e%t,d=c*c*e%t,f=fn(d,r,t)*d%t,l=fn(f,r,t)*d%t,h=fn(l,jn,t)*c%t,p=fn(h,i,t)*h%t,y=fn(p,s,t)*p%t,m=fn(y,a,t)*y%t,g=fn(m,u,t)*m%t,v=fn(g,a,t)*y%t,w=fn(v,r,t)*d%t,b=fn(w,o,t)*p%t,_=fn(b,n,t)*c%t,E=fn(_,jn,t);if(!Ln.eql(Ln.sqr(E),e))throw new Error("Cannot find square root");return E}const Ln=function(e,t,r=!1,n={}){if(e<=tn)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=yn(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=hn(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:Jr(i),ZERO:tn,ONE:rn,create:t=>cn(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return tn<=t&&t<e},is0:e=>e===tn,isOdd:e=>(e&rn)===rn,neg:t=>cn(-t,e),eql:(e,t)=>e===t,sqr:t=>cn(t*t,e),add:(t,r)=>cn(t+r,e),sub:(t,r)=>cn(t-r,e),mul:(t,r)=>cn(t*r,e),pow:(e,t)=>function(e,t,r){if(r<tn)throw new Error("Expected power > 0");if(r===tn)return e.ONE;if(r===rn)return t;let n=e.ONE,i=t;for(;r>tn;)r&rn&&(n=e.mul(n,i)),i=e.sqr(i),r>>=rn;return n}(a,e,t),div:(t,r)=>cn(t*ln(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ln(t,e),sqrt:n.sqrt||(e=>o(a,e)),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?Hr(e,s):Vr(e,s),fromBytes:e=>{if(e.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return r?Dr(e):qr(e)}});return Object.freeze(a)}(Rn,void 0,void 0,{sqrt:Pn}),$n=function(e,t){const r=t=>Tn({...e,...Nn(t)});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:Ln,n:Zn,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Zn,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Cn*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=Un(s*e,t),u=Un(-n*e,t);let c=cn(e-a*r-u*i,t),d=cn(-a*n-u*s,t);const f=c>o,l=d>o;if(f&&(c=t-c),l&&(d=t-d),c>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:c,k2neg:l,k2:d}}}},Rr);BigInt(0);$n.ProjectivePoint;r(287).hp;!function(){const e=[]}();Z(S(),/^(?:0x)?[0-9a-f]+$/iu),Z(S(),/^0x[0-9a-f]+$/iu),Z(S(),/^0x[0-9a-f]{40}$/u),Z(S(),/^0x[0-9a-fA-F]{40}$/u);function Mn(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}function zn(e,...t){if(!((r=e)instanceof Uint8Array||null!=r&&"object"==typeof r&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const Fn=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function qn(e){zn(e);let t="";for(let r=0;r<e.length;r++)t+=Fn[e[r]];return t}const Dn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Vn(e){return e>=Dn._0&&e<=Dn._9?e-Dn._0:e>=Dn._A&&e<=Dn._F?e-(Dn._A-10):e>=Dn._a&&e<=Dn._f?e-(Dn._a-10):void 0}function Hn(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=Vn(e.charCodeAt(i)),s=Vn(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error(\'hex string expected, got non-hex character "\'+t+\'" at index \'+i)}n[t]=16*r+s}return n}async function Kn(){const e=await async function(){return await snap.request({method:"snap_getEntropy",params:{version:1}})}();return Hn(Mn(e))}async function Wn(){const e=await Kn();return function(e){return`0x${qn(e)}`}($n.getPublicKey(e))}const Jn=pr.object({message:pr.string().startsWith("metamask:")});const Gn=async({request:e})=>{switch(e.method){case"getPublicKey":return Wn();case"signMessage":{const{params:t}=e;!function(e){try{Jn.parse(e)}catch{throw ae({message:"`signMessage`, must take a `message` parameter that must begin with `metamask:`"})}}(t);const{message:r}=t;return await async function(e){const t=await Kn(),r=Rr(e);return`0x${$n.sign(r,t).toCompactHex()}`}(r)}default:throw ue({data:{method:e.method}})}}})();var i=exports;for(var s in n)i[s]=n[s];n.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();'}],removable:!1}}}},{package:"@metamask/message-signing-snap",file:"node_modules/@metamask/message-signing-snap/dist/preinstalled-snap.json"}],[172,{"../../../shared/constants/network":4959,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:55,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=55;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.IncomingTransactionsController)&&void 0!==t&&t.incomingTxLastFetchedBlocksByNetwork&&(e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId=(0,n.mapKeys)(e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork,((e,t)=>{var r;return(null===(r=s.BUILT_IN_NETWORKS[t])||void 0===r?void 0:r.chainId)??i})),delete e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId[i],delete e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork);return e}(r),t}};const i="UNKNOWN";s.BUILT_IN_NETWORKS.rinkeby={networkId:"4",chainId:"0x4",ticker:"ETH"},s.BUILT_IN_NETWORKS.ropsten={networkId:"3",chainId:"0x3",ticker:"ETH"},s.BUILT_IN_NETWORKS.kovan={networkId:"42",chainId:"0x2a",ticker:"ETH"}}}},{package:"$root$",file:"app/scripts/migrations/055.js"}],[173,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:56,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=56;const{PreferencesController:r}=t.data;return Array.isArray(null==r?void 0:r.tokens)&&(r.tokens=r.tokens.filter((({address:e})=>e))),null!=r&&r.accountTokens&&"object"==typeof r.accountTokens&&Object.keys(r.accountTokens).forEach((e=>{Object.keys(r.accountTokens[e]).forEach((t=>{r.accountTokens[e][t]=r.accountTokens[e][t].filter((({address:e})=>e))}))})),null!=r&&r.assetImages&&"undefined"in r.assetImages&&delete r.assetImages.undefined,t}}}}},{package:"$root$",file:"app/scripts/migrations/056.js"}],[174,{"../../../shared/modules/random-id":5006,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("../../../shared/modules/random-id"))&&n.__esModule?n:{default:n};r.default={version:57,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=57;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.TransactionController)&&void 0!==t&&t.transactions&&Array.isArray(e.TransactionController.transactions)&&!e.TransactionController.transactions.some((e=>"object"!=typeof e||void 0===e.txParams))&&(e.TransactionController.transactions=(0,s.keyBy)(e.TransactionController.transactions,(e=>(void 0!==e.id&&null!==e.id||(e.id=(0,i.default)()),e.id))));return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/057.js"}],[175,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:58,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=58;const r=t.data;return t.data=function(e){var t;return null===(t=e.AppStateController)||void 0===t||delete t.swapsWelcomeMessageHasBeenShown,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/058.js"}],[176,{"@metamask/transaction-controller":2624,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:59,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=59;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r)){const t=(0,n.groupBy)(Object.values(r),(e=>{var t;return`${null===(t=e.txParams)||void 0===t?void 0:t.nonce}-${e.chainId??e.metamaskNetworkId}`})),i=(0,n.pickBy)(t,(e=>e.some((e=>e.type!==s.TransactionType.cancel&&e.type!==s.TransactionType.retry))));e.TransactionController.transactions=(0,n.keyBy)((0,n.concat)(...Object.values(i)),(e=>e.id))}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/059.js"}],[177,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const s="2020-08-31";r.default={version:60,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=60;const r=function(e){var t;const r=null==e||null===(t=e.NotificationController)||void 0===t?void 0:t.notifications;var i;(0,n.isPlainObject)(r)&&(null===(i=r[2])||void 0===i?void 0:i.date)===s&&delete e.NotificationController.notifications[2];return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/060.js"}],[178,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:61,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=61;const r=function(e){const t=(new Date).getTime();e.AppStateController?(e.AppStateController.recoveryPhraseReminderHasBeenShown=!1,e.AppStateController.recoveryPhraseReminderLastShown=t):e.AppStateController={recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:t};return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/061.js"}],[179,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:62,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=62;const r=function(e){if(e.MetaMetricsController){const{metaMetricsSendCount:t}=e.MetaMetricsController;t!==undefined&&delete e.MetaMetricsController.metaMetricsSendCount}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/062.js"}],[18,{"../../../shared/constants/alarms":4941,"../../../shared/constants/app":4943,"../../../shared/constants/metametrics":4955,"../../../shared/constants/time":4971,"../../../shared/constants/transaction":4973,"../../../shared/modules/mv3.utils":5003,"../lib/util":117,"@metamask/name-controller":1726,"@metamask/obs-store":1876,buffer:3497,"ethereumjs-util":3744,lodash:4294,uuid:4873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.overrideAnonymousEventNames=r.default=void 0;var n=e("lodash"),s=e("@metamask/obs-store"),i=e("ethereumjs-util"),a=e("uuid"),o=e("@metamask/name-controller"),c=e("../../../shared/constants/app"),l=e("../../../shared/constants/metametrics"),u=e("../../../shared/constants/time"),d=e("../../../shared/modules/mv3.utils"),h=e("../../../shared/constants/alarms"),f=e("../lib/util"),p=e("../../../shared/constants/transaction");function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const g=r.overrideAnonymousEventNames={[p.TransactionMetaMetricsEvent.added]:p.AnonymousTransactionMetaMetricsEvent.added,[p.TransactionMetaMetricsEvent.approved]:p.AnonymousTransactionMetaMetricsEvent.approved,[p.TransactionMetaMetricsEvent.finalized]:p.AnonymousTransactionMetaMetricsEvent.finalized,[p.TransactionMetaMetricsEvent.rejected]:p.AnonymousTransactionMetaMetricsEvent.rejected,[p.TransactionMetaMetricsEvent.submitted]:p.AnonymousTransactionMetaMetricsEvent.submitted},y=e=>{setTimeout((()=>{throw e}))},v=e=>{const t=[];return e.uniqueIdentifier&&t.push(e.uniqueIdentifier),e.actionId&&t.push(e.actionId),t.length&&e.isDuplicateAnonymizedEvent&&t.push("0x000"),t.length?t.join("-"):(0,f.generateRandomId)()},w={'You must pass either an "anonymousId" or a "userId".':!0};r.default=class{constructor({segment:e,preferencesStore:t,onNetworkDidChange:r,getCurrentChainId:i,version:a,environment:o,initState:c,extension:l,captureException:p=y}){m(this,"_getAllNFTsFlattened",(0,n.memoize)(((e={})=>Object.values(e).reduce(((e,t)=>e.concat(...Object.values(t))),[])))),m(this,"_isValidTraitArray",(e=>Array.isArray(e)&&(e.every((e=>"string"==typeof e))||e.every((e=>"boolean"==typeof e))||e.every((e=>"number"==typeof e))))),m(this,"_isValidTraitDate",(e=>"[object Date]"===Object.prototype.toString.call(e))),this._captureException=e=>{w[e.message]||p(e)};const g=t.getState();this.chainId=i(),this.locale=g.currentLocale.replace("_","-"),this.version="production"===o?a:`${a}-${o}`,this.extension=l,this.environment=o;const v=(0,n.omitBy)(null==c?void 0:c.fragments,"persist"),_=(null==c?void 0:c.segmentApiCalls)||{};this.store=new s.ObservableStore({participateInMetaMetrics:null,metaMetricsId:null,dataCollectionForMarketing:null,marketingCampaignCookieId:null,eventsBeforeMetricsOptIn:[],traits:{},previousUserTraits:{},...c,fragments:{...null==c?void 0:c.fragments},segmentApiCalls:{..._}}),t.subscribe((({currentLocale:e})=>{this.locale=e.replace("_","-")})),r((()=>{this.chainId=i()})),this.segment=e,Object.values(v).forEach((e=>{this.finalizeEventFragment(e.id,{abandoned:!0})})),d.isManifestV3&&Object.values(_).forEach((({eventType:e,payload:t})=>{try{this._submitSegmentAPICall(e,t)}catch(e){this._captureException(e)}})),d.isManifestV3?(this.extension.alarms.getAll().then((e=>{(0,f.checkAlarmExists)(e,h.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM)||this.extension.alarms.create(h.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM,{delayInMinutes:1,periodInMinutes:1})})),this.extension.alarms.onAlarm.addListener((e=>{e.name===h.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM&&this.finalizeAbandonedFragments()}))):setInterval((()=>{this.finalizeAbandonedFragments()}),30*u.SECOND)}finalizeAbandonedFragments(){Object.values(this.store.getState().fragments).forEach((e=>{e.timeout&&Date.now()-e.lastUpdated/1e3>e.timeout&&this.finalizeEventFragment(e.id,{abandoned:!0})}))}generateMetaMetricsId(){return(0,i.bufferToHex)((0,i.keccak)(t.from(String(Date.now())+String(Math.round(Math.random()*Number.MAX_SAFE_INTEGER)))))}createEventFragment(e){if(!e.successEvent||!e.category)throw new Error(`Must specify success event and category. Success event was: ${e.event}. Category was: ${e.category}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`);const{fragments:t}=this.store.getState(),r=e.uniqueIdentifier??(0,a.v4)(),n={id:r,...e,lastUpdated:Date.now()};return this.store.updateState({fragments:{...t,[r]:n}}),e.initialEvent&&this.trackEvent({event:n.initialEvent,category:n.category,properties:n.properties,sensitiveProperties:n.sensitiveProperties,page:n.page,referrer:n.referrer,revenue:n.revenue,value:n.value,currency:n.currency,environmentType:n.environmentType,actionId:e.actionId,uniqueIdentifier:e.uniqueIdentifier}),n}getEventFragmentById(e){const{fragments:t}=this.store.getState();return t[e]}updateEventFragment(e,t){const{fragments:r}=this.store.getState();if(!r[e])throw new Error(`Event fragment with id ${e} does not exist.`);this.store.updateState({fragments:{...r,[e]:(0,n.merge)(r[e],{...t,lastUpdated:Date.now()})}})}finalizeEventFragment(e,{abandoned:t=!1,page:r,referrer:n}={}){const s=this.store.getState().fragments[e];if(!s)throw new Error(`Funnel with id ${e} does not exist.`);const i=t?s.failureEvent:s.successEvent;this.trackEvent({event:i,category:s.category,properties:s.properties,sensitiveProperties:s.sensitiveProperties,page:r??s.page,referrer:s.referrer??n,revenue:s.revenue,value:s.value,currency:s.currency,environmentType:s.environmentType,actionId:s.actionId,uniqueIdentifier:s.uniqueIdentifier?`${s.uniqueIdentifier}-${t?"failure":"success"}`:undefined});const{fragments:a}=this.store.getState();delete a[e],this.store.updateState({fragments:a})}identify(e){const{metaMetricsId:t,participateInMetaMetrics:r}=this.state;if(!r||!t||!e)return;if("object"!=typeof e)return void console.warn("MetaMetricsController#identify: userTraits parameter must be an object. Received type: "+typeof e);const n=this._buildValidTraits(e);this._identify(n)}updateExtensionUninstallUrl(e,r){const n={};e&&(n.mmi=t.from(r).toString("base64"),n.env=this.environment,n.av=this.version);const s=new URLSearchParams(n);this.extension&&this.extension.runtime&&this.extension.runtime.setUninstallURL(`https://metamask.io/uninstalled?${s}`)}async setParticipateInMetaMetrics(e){const{metaMetricsId:t}=this.state,r=e&&!t?this.generateMetaMetricsId():t;return this.store.updateState({participateInMetaMetrics:e,metaMetricsId:r}),e?(this.trackEventsAfterMetricsOptIn(),this.clearEventsAfterMetricsOptIn()):this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),this.updateExtensionUninstallUrl(e,r),r}setDataCollectionForMarketing(e){const{metaMetricsId:t}=this.state;return this.store.updateState({dataCollectionForMarketing:e}),!e&&this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),t}setMarketingCampaignCookieId(e){this.store.updateState({marketingCampaignCookieId:e})}get state(){return this.store.getState()}trackPage({name:e,params:t,environmentType:r,page:n,referrer:s,actionId:i},a){try{if(!1===this.state.participateInMetaMetrics)return;if(null===this.state.participateInMetaMetrics&&(null==a||!a.isOptInPath))return;const{metaMetricsId:o}=this.state,c=o?"userId":"anonymousId",u=o??l.METAMETRICS_ANONYMOUS_ID;this._submitSegmentAPICall("page",{messageId:v({actionId:i}),[c]:u,name:e,properties:{params:t,locale:this.locale,chain_id:this.chainId,environment_type:r},context:this._buildContext(s,n)})}catch(e){this._captureException(e)}}trackEvent(e,t){this.validatePayload(e),this.submitEvent(e,t).catch((e=>this._captureException(e)))}async submitEvent(e,t){if(this.validatePayload(e),!(this.state.participateInMetaMetrics||null!=t&&t.isOptIn))return;const r=[];if(e.sensitiveProperties){if(!0===(null==t?void 0:t.excludeMetaMetricsId))throw new Error("sensitiveProperties was specified in an event payload that also set the excludeMetaMetricsId flag");const s=g[`${e.event}`],i={...e,event:s??e.event},a=(0,n.merge)(i.sensitiveProperties,i.properties);r.push(this._track(this._buildEventPayload({...i,properties:a,isDuplicateAnonymizedEvent:!0}),{...t,excludeMetaMetricsId:!0}))}r.push(this._track(this._buildEventPayload(e),t)),await Promise.all(r)}validatePayload(e){if(!e.event||!e.category)throw new Error(`Must specify event and category. Event was: ${e.event}. Category was: ${e.category}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`)}handleMetaMaskStateUpdate(e){const t=this._buildUserTraitsObject(e);t&&this.identify(t)}trackEventsAfterMetricsOptIn(){const{eventsBeforeMetricsOptIn:e}=this.store.getState();e.forEach((e=>{this.trackEvent(e)}))}clearEventsAfterMetricsOptIn(){this.store.updateState({eventsBeforeMetricsOptIn:[]})}addEventBeforeMetricsOptIn(e){const t=this.store.getState().eventsBeforeMetricsOptIn;this.store.updateState({eventsBeforeMetricsOptIn:[...t,e]})}updateTraits(e){const{traits:t}=this.store.getState();this.store.updateState({traits:{...t,...e}})}getMetaMetricsId(){let{metaMetricsId:e}=this.state;return e||(e=this.generateMetaMetricsId(),this.store.updateState({metaMetricsId:e})),e}_buildContext(e,t=l.METAMETRICS_BACKGROUND_PAGE_OBJECT){return{app:{name:"MetaMask Extension",version:this.version},userAgent:window.navigator.userAgent,page:t,referrer:e,marketingCampaignCookieId:this.state.marketingCampaignCookieId}}_buildEventPayload(e){const{event:t,properties:r,revenue:s,value:i,currency:a,category:o,page:l,referrer:u,environmentType:d=c.ENVIRONMENT_TYPE_BACKGROUND}=e;return{event:t,messageId:v(e),properties:{...(0,n.omit)(r,["revenue","locale","currency","value"]),revenue:s,value:i,currency:a,category:o,locale:this.locale,chain_id:(null==r?void 0:r.chain_id)??this.chainId,environment_type:d},context:this._buildContext(u,l)}}_buildUserTraitsObject(e){const{traits:t,previousUserTraits:r}=this.store.getState(),s={[l.MetaMetricsUserTrait.AddressBookEntries]:(0,n.sum)(Object.values(e.addressBook).map(n.size)),[l.MetaMetricsUserTrait.InstallDateExt]:t[l.MetaMetricsUserTrait.InstallDateExt]||"",[l.MetaMetricsUserTrait.LedgerConnectionType]:e.ledgerTransportType,[l.MetaMetricsUserTrait.NetworksAdded]:Object.values(e.networkConfigurations).map((e=>e.chainId)),[l.MetaMetricsUserTrait.NetworksWithoutTicker]:Object.values(e.networkConfigurations).filter((({ticker:e})=>!e)).map((({chainId:e})=>e)),[l.MetaMetricsUserTrait.NftAutodetectionEnabled]:e.useNftDetection,[l.MetaMetricsUserTrait.NumberOfAccounts]:Object.values(e.internalAccounts.accounts).length,[l.MetaMetricsUserTrait.NumberOfNftCollections]:this._getAllUniqueNFTAddressesLength(e.allNfts),[l.MetaMetricsUserTrait.NumberOfNfts]:this._getAllNFTsFlattened(e.allNfts).length,[l.MetaMetricsUserTrait.NumberOfTokens]:this._getNumberOfTokens(e),[l.MetaMetricsUserTrait.OpenseaApiEnabled]:e.openSeaEnabled,[l.MetaMetricsUserTrait.ThreeBoxEnabled]:!1,[l.MetaMetricsUserTrait.Theme]:e.theme||"default",[l.MetaMetricsUserTrait.TokenDetectionEnabled]:e.useTokenDetection,[l.MetaMetricsUserTrait.UseNativeCurrencyAsPrimaryCurrency]:e.useNativeCurrencyAsPrimaryCurrency,[l.MetaMetricsUserTrait.SecurityProviders]:e.securityAlertsEnabled?["blockaid"]:[],[l.MetaMetricsUserTrait.PetnameAddressCount]:this._getPetnameAddressCount(e),[l.MetaMetricsUserTrait.IsMetricsOptedIn]:e.participateInMetaMetrics,[l.MetaMetricsUserTrait.HasMarketingConsent]:e.dataCollectionForMarketing};if(!r)return this.store.updateState({previousUserTraits:s}),s;if(r&&!(0,n.isEqual)(r,s)){const e=(0,n.pickBy)(s,((e,t)=>!(0,n.isEqual)(r[t],e)));return this.store.updateState({previousUserTraits:s}),e}return null}_buildValidTraits(e){return Object.entries(e).reduce(((e,[t,r])=>(this._isValidTraitDate(r)?e[t]=r.toISOString():this._isValidTrait(r)?e[t]=r:console.warn(`MetaMetricsController: "${t}" value is not a valid trait type`),e)),{})}_getAllUniqueNFTAddressesLength(e={}){const t=this._getAllNFTsFlattened(e).map((e=>e.address));return new Set(t).size}_getNumberOfTokens(e){return Object.values(e.allTokens).reduce(((e,t)=>e+(0,n.sum)(Object.values(t).map(n.size))),0)}_identify(e){const{metaMetricsId:t}=this.state;if(e&&0!==Object.keys(e).length)try{this._submitSegmentAPICall("identify",{userId:t,traits:e})}catch(e){this._captureException(e)}else console.warn("MetaMetricsController#_identify: No userTraits found")}_isValidTrait(e){const t=typeof e;return"string"===t||"boolean"===t||"number"===t||this._isValidTraitArray(e)||this._isValidTraitDate(e)}_track(e,t){const{isOptIn:r,metaMetricsId:n,matomoEvent:s,flushImmediately:i}=t||{};let a="userId",o=this.state.metaMetricsId,c=(null==t?void 0:t.excludeMetaMetricsId)??!1;const u=Boolean(e.event.match(/^send|^confirm/iu));return!1!==(null==t?void 0:t.excludeMetaMetricsId)&&u&&(c=!0),c||r&&!n?(a="anonymousId",o=l.METAMETRICS_ANONYMOUS_ID):r&&n&&(o=n),e[a]=o,!0===s&&(e.properties.legacy_event=!0),new Promise(((t,r)=>{this._submitSegmentAPICall("track",e,(e=>{if(e){const t=new Error(e.message);return t.stack=e.stack,r(t)}return t()})),i&&this.segment.flush()}))}_submitSegmentAPICall(e,t,r){const{metaMetricsId:n,participateInMetaMetrics:s}=this.state;if(!s||!n)return;const i=t.messageId||(0,f.generateRandomId)();let a=new Date;if(t.timestamp){const e=new Date(t.timestamp);(0,f.isValidDate)(e)&&(a=e)}const o={...t,messageId:i,timestamp:a};this.store.updateState({segmentApiCalls:{...this.store.getState().segmentApiCalls,[i]:{eventType:e,payload:{...o,timestamp:o.timestamp.toString()}}}});this.segment[e](o,(e=>{const{segmentApiCalls:t}=this.store.getState();return delete t[i],this.store.updateState({segmentApiCalls:t}),null==r?void 0:r(e)}))}_getPetnameAddressCount(e){var t;const r=(null===(t=e.names)||void 0===t?void 0:t[o.NameType.ETHEREUM_ADDRESS])??{};return Object.keys(r).reduce(((e,t)=>{const n=r[t];return e+Object.keys(n).reduce(((e,t)=>{var r;return e+(Boolean(null===(r=n[t].name)||void 0===r?void 0:r.length)?1:0)}),0)}),0)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/metametrics.js"}],[180,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:63,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=63;const r=function(e){var t,r,n,s,i,a,o,c;const l=null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.accountTokens,u=null==e||null===(r=e.PreferencesController)||void 0===r?void 0:r.accountHiddenTokens,d={};l&&Object.keys(l).forEach((e=>{Object.keys(l[e]).forEach((t=>{const r=l[e][t];d[t]===undefined?d[t]={[e]:r}:d[t]={...d[t],[e]:r}}))}));const h={};u&&Object.keys(u).forEach((e=>{Object.keys(u[e]).forEach((t=>{const r=u[e][t];h[t]===undefined?h[t]={[e]:r}:h[t]={...h[t],[e]:r}}))}));e.TokensController?(e.TokensController.allTokens=d,e.TokensController.allIgnoredTokens=h):e.TokensController={allTokens:d,allIgnoredTokens:h};return null==e||null===(n=e.PreferencesController)||void 0===n||delete n.accountHiddenTokens,null==e||null===(s=e.PreferencesController)||void 0===s||delete s.accountTokens,null==e||null===(i=e.PreferencesController)||void 0===i||delete i.assetImages,null==e||null===(a=e.PreferencesController)||void 0===a||delete a.hiddenTokens,null==e||null===(o=e.PreferencesController)||void 0===o||delete o.tokens,null==e||null===(c=e.PreferencesController)||void 0===c||delete c.suggestedTokens,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/063.js"}],[181,{"@metamask/transaction-controller":2624,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");const i="sentEther";r.default={version:64,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=64;const r=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r))for(const e of Object.values(r))e.type===i&&(e.type=s.TransactionType.simpleSend),e.history&&e.history.map((e=>(e.type&&e.type===i&&(e.type=s.TransactionType.simpleSend),e)));return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/064.js"}],[1812,{"@ethersproject/providers":533,assert:3493,"async-mutex":1817},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.NonceTracker=void 0;const s=n(e("assert")),i=e("async-mutex"),{Web3Provider:a}=e("@ethersproject/providers");r.NonceTracker=class{constructor(e){this.provider=e.provider,this.blockTracker=e.blockTracker,this.getPendingTransactions=e.getPendingTransactions,this.getConfirmedTransactions=e.getConfirmedTransactions,this.lockMap={}}async getGlobalLock(){const e=this._lookupMutex("global");return{releaseLock:await e.acquire()}}async getNonceLock(e){await this._globalMutexFree();const t=await this._takeMutex(e);try{const r=await this._getNetworkNextNonce(e),n=this._getHighestLocallyConfirmed(e),i=r.nonce,a=Math.max(i,n),o=this.getPendingTransactions(e),c=this._getHighestContinuousFrom(o,a),l={params:{highestLocallyConfirmed:n,nextNetworkNonce:i,highestSuggested:a},local:c,network:r},u=Math.max(r.nonce,c.nonce);return s.default(Number.isInteger(u),`nonce-tracker - nextNonce is not an integer - got: (${typeof u}) "${u}"`),{nextNonce:u,nonceDetails:l,releaseLock:t}}catch(e){throw t(),e}}async _globalMutexFree(){const e=this._lookupMutex("global");(await e.acquire())()}async _takeMutex(e){const t=this._lookupMutex(e);return await t.acquire()}_lookupMutex(e){let t=this.lockMap[e];return t||(t=new i.Mutex,this.lockMap[e]=t),t}async _getNetworkNextNonce(e){const t=await this.blockTracker.getLatestBlock(),r=await new a(this.provider).getTransactionCount(e,t);return s.default(Number.isInteger(r),`nonce-tracker - baseCount is not an integer - got: (${typeof r}) "${r}"`),{name:"network",nonce:r,details:{blockNumber:t,baseCount:r}}}_getHighestLocallyConfirmed(e){const t=this.getConfirmedTransactions(e),r=this._getHighestNonce(t);return Number.isInteger(r)?r+1:0}_getHighestNonce(e){const t=e.map((e=>{const{nonce:t}=e.txParams;return s.default("string"==typeof t,"nonces should be hex strings"),parseInt(t,16)}));return Math.max.apply(null,t)}_getHighestContinuousFrom(e,t){const r=e.map((e=>{const{nonce:t}=e.txParams;return s.default("string"==typeof t,"nonces should be hex strings"),parseInt(t,16)}));let n=t;for(;r.includes(n);)n+=1;return{name:"local",nonce:n,details:{startPoint:t,highest:n}}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker",file:"node_modules/@metamask/nonce-tracker/dist/NonceTracker.js"}],[1813,{"./NonceTracker":1812},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NonceTracker=void 0;var n=e("./NonceTracker");Object.defineProperty(r,"NonceTracker",{enumerable:!0,get:function(){return n.NonceTracker}})}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker",file:"node_modules/@metamask/nonce-tracker/dist/index.js"}],[1814,{"./Semaphore":1815,tslib:4828},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("tslib"),s=e("./Semaphore"),i=function(){function e(e){this._semaphore=new s.default(1,e)}return e.prototype.acquire=function(){return(0,n.__awaiter)(this,void 0,void 0,(function(){var e;return(0,n.__generator)(this,(function(t){switch(t.label){case 0:return[4,this._semaphore.acquire()];case 1:return e=t.sent(),[2,e[1]]}}))}))},e.prototype.runExclusive=function(e){return this._semaphore.runExclusive((function(){return e()}))},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.waitForUnlock=function(){return this._semaphore.waitForUnlock()},e.prototype.release=function(){this._semaphore.release()},e.prototype.cancel=function(){return this._semaphore.cancel()},e}();r.default=i}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/Mutex.js"}],[1815,{"./errors":1816,tslib:4828},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("tslib"),s=e("./errors"),i=function(){function e(e,t){if(void 0===t&&(t=s.E_CANCELED),this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}return e.prototype.acquire=function(){var e=this,t=this.isLocked(),r=new Promise((function(t,r){return e._queue.push({resolve:t,reject:r})}));return t||this._dispatch(),r},e.prototype.runExclusive=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,r,s;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.acquire()];case 1:t=n.sent(),r=t[0],s=t[1],n.label=2;case 2:return n.trys.push([2,,4,5]),[4,e(r)];case 3:return[2,n.sent()];case 4:return s(),[7];case 5:return[2]}}))}))},e.prototype.waitForUnlock=function(){return(0,n.__awaiter)(this,void 0,void 0,(function(){var e=this;return(0,n.__generator)(this,(function(t){return this.isLocked()?[2,new Promise((function(t){return e._waiters.push({resolve:t})}))]:[2,Promise.resolve()]}))}))},e.prototype.isLocked=function(){return this._value<=0},e.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var e=this._currentReleaser;this._currentReleaser=undefined,e()}},e.prototype.cancel=function(){var e=this;this._queue.forEach((function(t){return t.reject(e._cancelError)})),this._queue=[]},e.prototype._dispatch=function(){var e=this,t=this._queue.shift();if(t){var r=!1;this._currentReleaser=function(){r||(r=!0,e._value++,e._resolveWaiters(),e._dispatch())},t.resolve([this._value--,this._currentReleaser])}},e.prototype._resolveWaiters=function(){this._waiters.forEach((function(e){return e.resolve()})),this._waiters=[]},e}();r.default=i}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/Semaphore.js"}],[1816,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.E_CANCELED=r.E_ALREADY_LOCKED=r.E_TIMEOUT=void 0,r.E_TIMEOUT=new Error("timeout while waiting for mutex to become available"),r.E_ALREADY_LOCKED=new Error("mutex already locked"),r.E_CANCELED=new Error("request for lock canceled")}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/errors.js"}],[1817,{"./Mutex":1814,"./Semaphore":1815,"./errors":1816,"./tryAcquire":1818,"./withTimeout":1819,tslib:4828},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.tryAcquire=r.withTimeout=r.Semaphore=r.Mutex=void 0;var n=e("tslib"),s=e("./Mutex");Object.defineProperty(r,"Mutex",{enumerable:!0,get:function(){return s.default}});var i=e("./Semaphore");Object.defineProperty(r,"Semaphore",{enumerable:!0,get:function(){return i.default}});var a=e("./withTimeout");Object.defineProperty(r,"withTimeout",{enumerable:!0,get:function(){return a.withTimeout}});var o=e("./tryAcquire");Object.defineProperty(r,"tryAcquire",{enumerable:!0,get:function(){return o.tryAcquire}}),(0,n.__exportStar)(e("./errors"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/index.js"}],[1818,{"./errors":1816,"./withTimeout":1819},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.tryAcquire=void 0;var n=e("./errors"),s=e("./withTimeout");r.tryAcquire=function(e,t){return void 0===t&&(t=n.E_ALREADY_LOCKED),(0,s.withTimeout)(e,0,t)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/tryAcquire.js"}],[1819,{"./errors":1816,tslib:4828},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.withTimeout=void 0;var n=e("tslib"),s=e("./errors");r.withTimeout=function(e,t,r){var i=this;return void 0===r&&(r=s.E_TIMEOUT),{acquire:function(){return new Promise((function(s,a){return(0,n.__awaiter)(i,void 0,void 0,(function(){var i,o,c,l;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:i=!1,o=setTimeout((function(){i=!0,a(r)}),t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.acquire()];case 2:return c=n.sent(),i?(Array.isArray(c)?c[1]:c)():(clearTimeout(o),s(c)),[3,4];case 3:return l=n.sent(),i||(clearTimeout(o),a(l)),[3,4];case 4:return[2]}}))}))}))},runExclusive:function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,r;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:t=function(){return undefined},n.label=1;case 1:return n.trys.push([1,,7,8]),[4,this.acquire()];case 2:return r=n.sent(),Array.isArray(r)?(t=r[1],[4,e(r[0])]):[3,4];case 3:return[2,n.sent()];case 4:return t=r,[4,e()];case 5:return[2,n.sent()];case 6:return[3,8];case 7:return t(),[7];case 8:return[2]}}))}))},release:function(){e.release()},cancel:function(){return e.cancel()},waitForUnlock:function(){return e.waitForUnlock()},isLocked:function(){return e.isLocked()}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/nonce-tracker>async-mutex",file:"node_modules/@metamask/nonce-tracker/node_modules/async-mutex/lib/withTimeout.js"}],[182,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:65,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=65;const r=function(e){if(e.PreferencesController){const{completedOnboarding:t,firstTimeFlowType:r}=e.PreferencesController;e.OnboardingController=e.OnboardingController??{},t!==undefined&&(e.OnboardingController.completedOnboarding=t,delete e.PreferencesController.completedOnboarding),r!==undefined&&(e.OnboardingController.firstTimeFlowType=r,delete e.PreferencesController.firstTimeFlowType)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/065.js"}],[1820,{"@metamask/base-controller":1226,"@metamask/utils":2717,nanoid:1822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/base-controller"),s=e("@metamask/utils"),i=e("nanoid"),a="NotificationController",o={notifications:{persist:!0,anonymous:!1}},c={notifications:{}},l=class extends n.BaseController{constructor({messenger:e,state:t}){super({name:a,metadata:o,messenger:e,state:{...c,...t}}),this.messagingSystem.registerActionHandler(`${a}:show`,((e,t)=>this.show(e,t))),this.messagingSystem.registerActionHandler(`${a}:dismiss`,(e=>this.dismiss(e))),this.messagingSystem.registerActionHandler(`${a}:markRead`,(e=>this.markRead(e))),this.messagingSystem.registerActionHandler(`${a}:clear`,(()=>this.clear()))}show(e,t){const r=i.nanoid.call(void 0),n={id:r,origin:e,createdDate:Date.now(),readDate:null,message:t};this.update((e=>{e.notifications[r]=n}))}dismiss(e){this.update((t=>{for(const r of e)s.hasProperty.call(void 0,t.notifications,r)&&delete t.notifications[r]}))}markRead(e){this.update((t=>{for(const r of e)s.hasProperty.call(void 0,t.notifications,r)&&(t.notifications[r].readDate=Date.now())}))}clear(){this.update((()=>({...c})))}};r.NotificationController=l}}},{package:"@metamask/notification-controller",file:"node_modules/@metamask/notification-controller/dist/chunk-DR374FE2.js"}],[1821,{"./chunk-DR374FE2.js":1820},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-DR374FE2.js");r.NotificationController=n.NotificationController}}},{package:"@metamask/notification-controller",file:"node_modules/@metamask/notification-controller/dist/index.js"}],[1822,{"./url-alphabet/index.cjs":1823},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:n}=e("./url-alphabet/index.cjs"),s=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*n*t/e.length);return(i=t)=>{let a="";for(;;){let t=r(s),o=s;for(;o--;)if(a+=e[t[o]&n]||"",a.length===i)return a}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>i(e,t,s),customRandom:i,urlAlphabet:n,random:s}}}},{package:"@metamask/notification-controller>nanoid",file:"node_modules/@metamask/notification-controller/node_modules/nanoid/index.browser.cjs"}],[1823,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/notification-controller>nanoid",file:"node_modules/@metamask/notification-controller/node_modules/nanoid/url-alphabet/index.cjs"}],[183,{"../../../shared/constants/hardware-wallets":4951,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/hardware-wallets");r.default={version:66,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=66;const r=function(e){var t;const r=window.navigator.hid?s.LedgerTransportTypes.webhid:s.LedgerTransportTypes.u2f,n=Boolean(null===(t=e.PreferencesController)||void 0===t?void 0:t.useLedgerLive),i={...e,PreferencesController:{...null==e?void 0:e.PreferencesController,ledgerTransportType:n?s.LedgerTransportTypes.live:r}};return delete i.PreferencesController.useLedgerLive,i}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/066.js"}],[184,{"../../../shared/constants/network":4959,"bignumber.js":3402,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},a=e("../../../shared/constants/network");const o=e=>new i.default(e||"0x0",16).gt(0);r.default={version:67,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=67;const r=function(e){var t,r,n;const s=(null==e?void 0:e.PreferencesController)||{},i=s.preferences||{};if(i.showTestNetworks)return e;const c=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},l=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{},u=(null===(n=e.CachedBalancesController)||void 0===n?void 0:n.cachedBalances)||{},d=a.TEST_CHAINS.includes(null==l?void 0:l.chainId),h=Object.values(c).some((({chainId:e})=>a.TEST_CHAINS.includes(e))),f=a.TEST_CHAINS.some((e=>Object.values(u[e]||{}).some(o))),p=d||h||f,m={...e,PreferencesController:{...s,preferences:{...i,showTestNetworks:p}}};return m}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/067.js"}],[185,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:68,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=68;const r=function(e){const{PermissionsController:t={},PermissionsMetadata:r={},...n}=e,{domainMetadata:a={},permissionsHistory:o={},permissionsLog:c=[]}=r;return{...n,PermissionController:s(t),PermissionLogController:{permissionActivityLog:c,permissionHistory:o},SubjectMetadataController:i(a)}}(t.data);return t.data=r,t}};function s(e){const{domains:t={}}=e;return{subjects:Object.entries(t).reduce(((e,[t,r])=>{const{permissions:[n]}=r,s=n.caveats.find((e=>"exposedAccounts"===e.name)),i={...n,caveats:[{type:"restrictReturnedAccounts",value:s.value}]};return delete i["@context"],e[t]={origin:t,permissions:{eth_accounts:i}},e}),{})}}function i(e){return{subjectMetadata:Object.entries(e).reduce(((e,[t,r])=>{const{name:n=null,icon:s=null,extensionId:i=null,...a}=r;return delete a.lastUpdated,delete a.host,t&&(e[t]={name:n,iconUrl:s,extensionId:i,...a,origin:t}),e}),{})}}}}},{package:"$root$",file:"app/scripts/migrations/068.js"}],[186,{"@metamask/permission-controller":1890,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/permission-controller"),s=e("lodash");r.default={version:69,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=69;const r=function(e){var t;if("object"==typeof(null==e||null===(t=e.SubjectMetadataController)||void 0===t?void 0:t.subjectMetadata)){const{SubjectMetadataController:{subjectMetadata:t}}=e;Object.values(t).forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(e.subjectType=e.extensionId?n.SubjectType.Extension:n.SubjectType.Website)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/069.js"}],[187,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:70,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=70;const r=function(e){var t;if(Array.isArray(null==e||null===(t=e.PermissionLogController)||void 0===t?void 0:t.permissionActivityLog)){const{PermissionLogController:{permissionActivityLog:t}}=e;t.forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(delete e.request,delete e.response)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/070.js"}],[1872,{"./ObservableStore":1874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=s}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[1873,{"./ObservableStore":1874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=s}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/MergedStore.js"}],[1874,{"@metamask/safe-event-emitter":2014},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const s=n(e("@metamask/safe-event-emitter"));class i extends s.default{constructor(e){super(),e===undefined?this._state={}:this._state=e}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=i}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[1875,{"readable-stream":4706},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const n=e("readable-stream");class s extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new s(e)}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/asStream.js"}],[1876,{"./ComposedStore":1872,"./MergedStore":1873,"./ObservableStore":1874,"./asStream":1875,"./transform":1877},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./asStream"),r),s(e("./ComposedStore"),r),s(e("./MergedStore"),r),s(e("./ObservableStore"),r),s(e("./transform"),r)}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/index.js"}],[1877,{"readable-stream":4706},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const n=e("readable-stream");r.storeTransformStream=function(e){return new n.Transform({objectMode:!0,transform:(t,r,n)=>{try{const r=e(t);return n(undefined,r),undefined}catch(e){return n(e),undefined}}})}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/transform.js"}],[188,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:71,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=71;const r=function(e){e.NotificationController&&(e.AnnouncementController={announcements:e.NotificationController.notifications},delete e.NotificationController);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/071.js"}],[189,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:72,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=72;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/072.js"}],[1899,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},s=Object.freeze({restrictReturnedAccounts:"restrictReturnedAccounts"}),i=(e=>(e.restricted="restricted",e.internal="internal",e))(i||{});r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r),r.WALLET_PREFIX="wallet_",r.CAVEAT_TYPES=s,r.LOG_IGNORE_METHODS=["wallet_registerOnboarding","wallet_watchAsset"],r.LOG_METHOD_TYPES=i,r.LOG_LIMIT=100}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/chunk-7KORYHSJ.js"}],[19,{"../../../shared/constants/network":4959,"@metamask/base-controller":1226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkOrderController=void 0;var n=e("@metamask/base-controller"),s=e("../../../shared/constants/network");const i={orderedNetworkList:[]},a={orderedNetworkList:{persist:!0,anonymous:!0}};class o extends n.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:a,name:"NetworkOrderController",state:{...i,...t}}),this.messagingSystem.subscribe("NetworkController:stateChange",(e=>{this.onNetworkControllerStateChange(e)}))}onNetworkControllerStateChange(e){const t=Object.values(e.networkConfigurations),r=[...s.MAINNET_CHAINS,...t].map((e=>({networkId:e.chainId,networkRpcUrl:e.rpcUrl})));let n=[];const i=[];r.forEach((e=>{const t=this.state.orderedNetworkList.findIndex((t=>t.networkId===e.networkId&&t.networkRpcUrl===e.networkRpcUrl));-1!==t?n[t]=e:i.push(e)})),n=n.filter((e=>Boolean(e))).concat(i),this.update((e=>{e.orderedNetworkList=n}))}updateNetworksList(e){this.update((t=>(t.orderedNetworkList=e,t)))}}r.NetworkOrderController=o}}},{package:"$root$",file:"app/scripts/controllers/network-order.ts"}],[190,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:73,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=73;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/073.js"}],[1900,{"./chunk-7KORYHSJ.js":1899,"@metamask/base-controller":1226,"@metamask/utils":2717},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f,p,m,g,y,v=e("./chunk-7KORYHSJ.js"),w=e("@metamask/base-controller"),_=e("@metamask/utils"),b={permissionHistory:{},permissionActivityLog:[]},k=class extends w.BaseController{constructor({messenger:e,restrictedMethods:t,state:r}){super({messenger:e,name:"PermissionLogController",metadata:{permissionHistory:{persist:!0,anonymous:!1},permissionActivityLog:{persist:!0,anonymous:!1}},state:{...b,...r}}),v.__privateAdd.call(void 0,this,s),v.__privateAdd.call(void 0,this,a),v.__privateAdd.call(void 0,this,c),v.__privateAdd.call(void 0,this,u),v.__privateAdd.call(void 0,this,h),v.__privateAdd.call(void 0,this,p),v.__privateAdd.call(void 0,this,g),v.__privateAdd.call(void 0,this,n,void 0),v.__privateSet.call(void 0,this,n,t)}updateAccountsHistory(e,t){if(0===t.length)return;const r={eth_accounts:{accounts:v.__privateMethod.call(void 0,this,s,i).call(this,t,Date.now())}};v.__privateMethod.call(void 0,this,h,f).call(this,e,r)}createMiddleware(){return(e,t,r)=>{const{origin:s,method:i}=e,h=i.startsWith(v.WALLET_PREFIX),f="eth_requestAccounts"===i;if(!v.LOG_IGNORE_METHODS.includes(i)&&(h||v.__privateGet.call(void 0,this,n).has(i))||f){const n=v.__privateMethod.call(void 0,this,a,o).call(this,e,h),i=v.__privateMethod.call(void 0,this,p,m).call(this,e);r((e=>{const r=Date.now();v.__privateMethod.call(void 0,this,c,l).call(this,n,t,r),i&&!t.error&&t.result&&s&&v.__privateMethod.call(void 0,this,u,d).call(this,i,s,t.result,r,f),e()}))}else r()}}};n=new WeakMap,s=new WeakSet,i=function(e,t){return e.reduce(((e,r)=>({...e,[r]:t})),{})},a=new WeakSet,o=function(e,t){const r={id:e.id,method:e.method,methodType:t?"internal":"restricted",origin:e.origin,requestTime:Date.now(),responseTime:null,success:null};return this.update((e=>{const t=[...e.permissionActivityLog,r];e.permissionActivityLog=t.length>v.LOG_LIMIT?t.slice(1):t})),r},c=new WeakSet,l=function(e,t,r){e&&t&&this.update((n=>{n.permissionActivityLog=n.permissionActivityLog.map((n=>n.id===e.id?{...n,success:_.hasProperty.call(void 0,t,"result"),responseTime:r}:n))}))},u=new WeakSet,d=function(e,t,r,n,a){let o;if(a){const e=r;o={eth_accounts:{accounts:v.__privateMethod.call(void 0,this,s,i).call(this,e,n),lastApproved:n}}}else{o=r.reduce(((t,r)=>{const a=r.parentCapability;if(!e.includes(a))return t;if("eth_accounts"===a){const e=v.__privateMethod.call(void 0,this,g,y).call(this,r);return{...t,[a]:{lastApproved:n,accounts:v.__privateMethod.call(void 0,this,s,i).call(this,e,n)}}}return{...t,[a]:{lastApproved:n}}}),{})}Object.keys(o).length>0&&v.__privateMethod.call(void 0,this,h,f).call(this,t,o)},h=new WeakSet,f=function(e,t){const{permissionHistory:r}=this.state,n=r[e]??{},s={...n,...t},i=n.eth_accounts,a=t.eth_accounts;if(i&&a){const e=a.lastApproved??i.lastApproved;s.eth_accounts={lastApproved:e,accounts:{...i.accounts,...a.accounts}}}this.update((t=>{t.permissionHistory={...r,[e]:s}}))},p=new WeakSet,m=function(e){const{method:t,params:r}=e;return"eth_requestAccounts"===t?["eth_accounts"]:t===`${v.WALLET_PREFIX}requestPermissions`&&r&&Array.isArray(r)&&r[0]&&"object"==typeof r[0]&&!Array.isArray(r[0])?Object.keys(r[0]):null},g=new WeakSet,y=function(e){if("eth_accounts"!==e.parentCapability||!e.caveats)return[];const t=new Set;for(const r of e.caveats)if(r.type===v.CAVEAT_TYPES.restrictReturnedAccounts&&Array.isArray(r.value))for(const e of r.value)t.add(e);return[...t]},r.PermissionLogController=k}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/chunk-WGNFIOME.js"}],[1901,{"./chunk-7KORYHSJ.js":1899,"./chunk-WGNFIOME.js":1900},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-WGNFIOME.js");e("./chunk-7KORYHSJ.js"),r.PermissionLogController=n.PermissionLogController}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/index.js"}],[1902,{"./PhishingDetector.cjs":1903,"./types.cjs":1905,"./utils.cjs":1906,"@metamask/base-controller":1911,"@metamask/controller-utils":1231,"punycode/punycode.js":4499},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,l,u,d,h,f,p,m,g=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},y=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingController=r.phishingListKeyNameMap=r.ListNames=r.ListKeys=r.C2_DOMAIN_BLOCKLIST_URL=r.METAMASK_HOTLIST_DIFF_URL=r.METAMASK_STALELIST_URL=r.STALELIST_REFRESH_INTERVAL=r.HOTLIST_REFRESH_INTERVAL=r.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL=r.C2_DOMAIN_BLOCKLIST_ENDPOINT=r.CLIENT_SIDE_DETECION_BASE_URL=r.METAMASK_HOTLIST_DIFF_FILE=r.METAMASK_STALELIST_FILE=r.PHISHING_CONFIG_BASE_URL=void 0;const v=e("@metamask/base-controller"),w=e("@metamask/controller-utils"),_=e("punycode/punycode.js"),b=e("./PhishingDetector.cjs"),k=e("./types.cjs"),T=e("./utils.cjs");var S,E;r.PHISHING_CONFIG_BASE_URL="https://phishing-detection.api.cx.metamask.io",r.METAMASK_STALELIST_FILE="/v1/stalelist",r.METAMASK_HOTLIST_DIFF_FILE="/v1/diffsSince",r.CLIENT_SIDE_DETECION_BASE_URL="https://client-side-detection.api.cx.metamask.io",r.C2_DOMAIN_BLOCKLIST_ENDPOINT="/v1/request-blocklist",r.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL=900,r.HOTLIST_REFRESH_INTERVAL=300,r.STALELIST_REFRESH_INTERVAL=2592e3,r.METAMASK_STALELIST_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_STALELIST_FILE}`,r.METAMASK_HOTLIST_DIFF_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_HOTLIST_DIFF_FILE}`,r.C2_DOMAIN_BLOCKLIST_URL=`${r.CLIENT_SIDE_DETECION_BASE_URL}${r.C2_DOMAIN_BLOCKLIST_ENDPOINT}`,function(e){e.EthPhishingDetectConfig="eth_phishing_detect_config"}(S||(r.ListKeys=S={})),function(e){e.MetaMask="MetaMask"}(E||(r.ListNames=E={}));const C={[E.MetaMask]:S.EthPhishingDetectConfig};r.phishingListKeyNameMap={[S.EthPhishingDetectConfig]:E.MetaMask};const M="PhishingController",j={phishingLists:{persist:!0,anonymous:!1},whitelist:{persist:!0,anonymous:!1},hotlistLastFetched:{persist:!0,anonymous:!1},stalelistLastFetched:{persist:!0,anonymous:!1},c2DomainBlocklistLastFetched:{persist:!0,anonymous:!1}};class P extends v.BaseController{constructor({stalelistRefreshInterval:e=r.STALELIST_REFRESH_INTERVAL,hotlistRefreshInterval:t=r.HOTLIST_REFRESH_INTERVAL,c2DomainBlocklistRefreshInterval:h=r.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL,messenger:f,state:p={}}){super({name:M,metadata:j,messenger:f,state:{phishingLists:[],whitelist:[],hotlistLastFetched:0,stalelistLastFetched:0,c2DomainBlocklistLastFetched:0,...p}}),n.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),g(this,i,e,"f"),g(this,a,t,"f"),g(this,o,h,"f"),y(this,n,"m",d).call(this),this.updatePhishingDetector()}updatePhishingDetector(){g(this,s,new b.PhishingDetector(this.state.phishingLists),"f")}setStalelistRefreshInterval(e){g(this,i,e,"f")}setHotlistRefreshInterval(e){g(this,a,e,"f")}setC2DomainBlocklistRefreshInterval(e){g(this,o,e,"f")}isStalelistOutOfDate(){return(0,T.fetchTimeNow)()-this.state.stalelistLastFetched>=y(this,i,"f")}isHotlistOutOfDate(){return(0,T.fetchTimeNow)()-this.state.hotlistLastFetched>=y(this,a,"f")}isC2DomainBlocklistOutOfDate(){return(0,T.fetchTimeNow)()-this.state.c2DomainBlocklistLastFetched>=y(this,o,"f")}async maybeUpdateState(){if(this.isStalelistOutOfDate())return void await this.updateStalelist();this.isHotlistOutOfDate()&&await this.updateHotlist();this.isC2DomainBlocklistOutOfDate()&&await this.updateC2DomainBlocklist()}test(e){const t=(0,_.toASCII)(e),r=(0,T.getHostnameFromUrl)(t);return this.state.whitelist.includes(r||t)?{result:!1,type:k.PhishingDetectorResultType.All}:y(this,s,"f").check(t)}isBlockedRequest(e){const t=(0,_.toASCII)(e),r=(0,T.getHostnameFromUrl)(t);return this.state.whitelist.includes(r||t)?{result:!1,type:k.PhishingDetectorResultType.All}:y(this,s,"f").isMaliciousC2Domain(t)}bypass(e){const t=(0,_.toASCII)(e),r=(0,T.getHostnameFromUrl)(t),{whitelist:n}=this.state;n.includes(r||t)||this.update((e=>{e.whitelist.push(r||t)}))}async updateC2DomainBlocklist(){if(y(this,u,"f"))await y(this,u,"f");else try{g(this,u,y(this,n,"m",p).call(this),"f"),await y(this,u,"f")}finally{g(this,u,undefined,"f")}}async updateHotlist(){if(y(this,c,"f"))await y(this,c,"f");else try{g(this,c,y(this,n,"m",f).call(this),"f"),await y(this,c,"f")}finally{g(this,c,undefined,"f")}}async updateStalelist(){if(y(this,l,"f"))await y(this,l,"f");else try{g(this,l,y(this,n,"m",h).call(this),"f"),await y(this,l,"f")}finally{g(this,l,undefined,"f")}}}r.PhishingController=P,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,n=new WeakSet,d=function(){this.messagingSystem.registerActionHandler(`${M}:maybeUpdateState`,this.maybeUpdateState.bind(this)),this.messagingSystem.registerActionHandler(`${M}:testOrigin`,this.test.bind(this))},h=async function(){let e=null,t=null,s=null;try{const i=y(this,n,"m",m).call(this,r.METAMASK_STALELIST_URL),a=y(this,n,"m",m).call(this,r.C2_DOMAIN_BLOCKLIST_URL);[e,s]=await Promise.all([i,a]),e?.data&&e.data.lastUpdated>0&&(t=await y(this,n,"m",m).call(this,`${r.METAMASK_HOTLIST_DIFF_URL}/${e.data.lastUpdated}`))}finally{const e=(0,T.fetchTimeNow)();this.update((t=>{t.stalelistLastFetched=e,t.hotlistLastFetched=e,t.c2DomainBlocklistLastFetched=e}))}if(!e||!t)return;const{eth_phishing_detect_config:i,...a}=e.data,o={...i,...a,c2DomainBlocklist:s?s.recentlyAdded:[],name:r.phishingListKeyNameMap.eth_phishing_detect_config},c=(0,T.applyDiffs)(o,t.data,S.EthPhishingDetectConfig);this.update((e=>{e.phishingLists=[c]})),this.updatePhishingDetector()},f=async function(){const e=Math.max(...this.state.phishingLists.map((({lastUpdated:e})=>e)));let t;try{t=await y(this,n,"m",m).call(this,`${r.METAMASK_HOTLIST_DIFF_URL}/${e}`)}finally{this.update((e=>{e.hotlistLastFetched=(0,T.fetchTimeNow)()}))}if(!t?.data)return;const s=t.data,i=this.state.phishingLists.map((e=>(0,T.applyDiffs)(e,s,C[e.name],[],[])));this.update((e=>{e.phishingLists=i})),this.updatePhishingDetector()},p=async function(){let e=null;try{e=await y(this,n,"m",m).call(this,`${r.C2_DOMAIN_BLOCKLIST_URL}?timestamp=${(0,T.roundToNearestMinute)(this.state.c2DomainBlocklistLastFetched)}`)}finally{this.update((e=>{e.c2DomainBlocklistLastFetched=(0,T.fetchTimeNow)()}))}if(!e)return;const t=e.recentlyAdded,s=e.recentlyRemoved,i=this.state.phishingLists.map((e=>(0,T.applyDiffs)(e,[],C[e.name],t,s)));this.update((e=>{e.phishingLists=i})),this.updatePhishingDetector()},m=async function(e){const t=await(0,w.safelyExecute)((()=>fetch(e,{cache:"no-cache"})),!0);return 200===t?.status?await t.json():null},r.default=P}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/PhishingController.cjs"}],[1903,{"./types.cjs":1905,"./utils.cjs":1906,"fastest-levenshtein":3834},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},c=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingDetector=void 0;const l=e("fastest-levenshtein"),u=e("./types.cjs"),d=e("./utils.cjs");r.PhishingDetector=class{constructor(e){n.add(this),s.set(this,void 0),i.set(this,void 0),Array.isArray(e)?(o(this,s,(0,d.processConfigs)(e),"f"),o(this,i,!1,"f")):(o(this,s,[(0,d.getDefaultPhishingDetectorConfig)({allowlist:e.whitelist,blocklist:e.blacklist,c2DomainBlocklist:e.c2DomainBlocklist,fuzzylist:e.fuzzylist,tolerance:e.tolerance})],"f"),o(this,i,!0,"f"))}check(e){const t=c(this,n,"m",a).call(this,e);if(c(this,i,"f")){let e=t.type;return e===u.PhishingDetectorResultType.Allowlist?e=u.PhishingDetectorResultType.Whitelist:e===u.PhishingDetectorResultType.Blocklist&&(e=u.PhishingDetectorResultType.Blacklist),{match:t.match,result:t.result,type:e}}return t}isMaliciousC2Domain(e){let t;try{t=new URL(e).hostname}catch(e){return{result:!1,type:u.PhishingDetectorResultType.C2DomainBlocklist}}const r=t.endsWith(".")?t.slice(0,-1):t,n=(0,d.domainToParts)(r);for(const{allowlist:e,name:t,version:r}of c(this,s,"f")){const s=(0,d.matchPartsAgainstList)(n,e);if(s){return{match:(0,d.domainPartsToDomain)(s),name:t,result:!1,type:u.PhishingDetectorResultType.Allowlist,version:r===undefined?r:String(r)}}}for(const{c2DomainBlocklist:e,name:r,version:n}of c(this,s,"f")){const s=(0,d.sha256Hash)(t.toLowerCase());if(e?.includes(s)??!1)return{name:r,result:!0,type:u.PhishingDetectorResultType.C2DomainBlocklist,version:n===undefined?n:String(n)}}return{result:!1,type:u.PhishingDetectorResultType.C2DomainBlocklist}}},s=new WeakMap,i=new WeakMap,n=new WeakSet,a=function(e){const t=e.match(new RegExp("Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,}","u"));if(null!==t){const e=t[0];for(const{blocklist:t,name:r,version:n}of c(this,s,"f")){if(t.filter((e=>1===e.length)).find((t=>t[0]===e)))return{name:r,match:e,result:!0,type:u.PhishingDetectorResultType.Blocklist,version:n===undefined?n:String(n)}}}let r;try{r=new URL(e).hostname}catch(e){return{result:!1,type:u.PhishingDetectorResultType.All}}const n=r.endsWith(".")?r.slice(0,-1):r,i=(0,d.domainToParts)(n);for(const{allowlist:e,name:t,version:r}of c(this,s,"f")){const n=(0,d.matchPartsAgainstList)(i,e);if(n){return{match:(0,d.domainPartsToDomain)(n),name:t,result:!1,type:u.PhishingDetectorResultType.Allowlist,version:r===undefined?r:String(r)}}}for(const{blocklist:e,fuzzylist:t,name:r,tolerance:n,version:a}of c(this,s,"f")){const s=(0,d.matchPartsAgainstList)(i,e);if(s){return{match:(0,d.domainPartsToDomain)(s),name:r,result:!0,type:u.PhishingDetectorResultType.Blocklist,version:a===undefined?a:String(a)}}if(n>0){let e=(0,d.domainPartsToFuzzyForm)(i);e=e.replace(/^www\./u,"");const s=t.find((t=>{const r=(0,d.domainPartsToFuzzyForm)(t);return(0,l.distance)(e,r)<=n}));if(s){return{name:r,match:(0,d.domainPartsToDomain)(s),result:!0,type:u.PhishingDetectorResultType.Fuzzy,version:a===undefined?a:String(a)}}}}return{result:!1,type:u.PhishingDetectorResultType.All}}}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/PhishingDetector.cjs"}],[1904,{"./PhishingController.cjs":1902,"./PhishingDetector.cjs":1903,"./types.cjs":1905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingDetectorResultType=r.PhishingDetector=void 0,s(e("./PhishingController.cjs"),r);var i=e("./PhishingDetector.cjs");Object.defineProperty(r,"PhishingDetector",{enumerable:!0,get:function(){return i.PhishingDetector}});var a=e("./types.cjs");Object.defineProperty(r,"PhishingDetectorResultType",{enumerable:!0,get:function(){return a.PhishingDetectorResultType}})}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/index.cjs"}],[1905,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingDetectorResultType=void 0,function(e){e.All="all",e.Fuzzy="fuzzy",e.Blocklist="blocklist",e.Allowlist="allowlist",e.Blacklist="blacklist",e.Whitelist="whitelist",e.C2DomainBlocklist="c2DomainBlocklist"}(n||(r.PhishingDetectorResultType=n={}))}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/types.cjs"}],[1906,{"./PhishingController.cjs":1902,"@noble/hashes/utils":2759,"ethereum-cryptography/sha256":3734},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getHostnameFromUrl=r.sha256Hash=r.matchPartsAgainstList=r.domainPartsToFuzzyForm=r.domainPartsToDomain=r.processConfigs=r.getDefaultPhishingDetectorConfig=r.processDomainList=r.domainToParts=r.validateConfig=r.applyDiffs=r.roundToNearestMinute=r.fetchTimeNow=void 0;const n=e("@noble/hashes/utils"),s=e("ethereum-cryptography/sha256"),i=e("./PhishingController.cjs");r.fetchTimeNow=()=>Math.round(Date.now()/1e3),r.roundToNearestMinute=function(e){return 60*Math.floor(e/60)};const a=e=>{const t=e.indexOf(".");return[e.slice(0,t),e.slice(t+1)]};function o(e){if(null===e||"object"!=typeof e)throw new Error("Invalid config");if("tolerance"in e&&!("fuzzylist"in e))throw new Error("Fuzzylist tolerance provided without fuzzylist");if("name"in e&&("string"!=typeof e.name||""===e.name))throw new Error("Invalid config parameter: 'name'");if("version"in e&&(!["number","string"].includes(typeof e.version)||""===e.version))throw new Error("Invalid config parameter: 'version'")}r.applyDiffs=(e,t,r,n=[],s=[])=>{const o=t.filter((({timestamp:t,targetList:n})=>t>e.lastUpdated&&a(n)[0]===r));let c=e.lastUpdated;const l={allowlist:new Set(e.allowlist),blocklist:new Set(e.blocklist),fuzzylist:new Set(e.fuzzylist),c2DomainBlocklist:new Set(e.c2DomainBlocklist)};for(const{isRemoval:e,targetList:t,url:r,timestamp:n}of o){const s=a(t)[1];n>c&&(c=n),e?l[s].delete(r):l[s].add(r)}if(r===i.ListKeys.EthPhishingDetectConfig){for(const e of n)l.c2DomainBlocklist.add(e);for(const e of s)l.c2DomainBlocklist.delete(e)}return{c2DomainBlocklist:Array.from(l.c2DomainBlocklist),allowlist:Array.from(l.allowlist),blocklist:Array.from(l.blocklist),fuzzylist:Array.from(l.fuzzylist),version:e.version,name:i.phishingListKeyNameMap[r],tolerance:e.tolerance,lastUpdated:c}},r.validateConfig=o;r.domainToParts=e=>{try{return e.split(".").reverse()}catch(t){throw new Error(JSON.stringify(e))}};r.processDomainList=e=>e.map(r.domainToParts);r.getDefaultPhishingDetectorConfig=({allowlist:e=[],blocklist:t=[],fuzzylist:n=[],tolerance:s=3})=>({allowlist:(0,r.processDomainList)(e),blocklist:(0,r.processDomainList)(t),fuzzylist:(0,r.processDomainList)(n),tolerance:s});r.processConfigs=(e=[])=>e.map((e=>(o(e),{...e,...(0,r.getDefaultPhishingDetectorConfig)(e)})));r.domainPartsToDomain=e=>e.slice().reverse().join(".");r.domainPartsToFuzzyForm=e=>e.slice(1).reverse().join(".");r.matchPartsAgainstList=(e,t)=>t.find((t=>!(t.length>e.length)&&t.every(((t,r)=>e[r]===t))));r.sha256Hash=e=>{const t=(0,s.sha256)((new TextEncoder).encode(e.toLowerCase()));return(0,n.bytesToHex)(t)};r.getHostnameFromUrl=e=>{let t;try{t=new URL(e).hostname}catch(e){return null}return t}}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/utils.cjs"}],[1907,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseControllerV1=r.isBaseControllerV1=void 0,r.isBaseControllerV1=function(e){return"name"in e&&"string"==typeof e.name&&"config"in e&&"object"==typeof e.config&&"defaultConfig"in e&&"object"==typeof e.defaultConfig&&"state"in e&&"object"==typeof e.state&&"defaultState"in e&&"object"==typeof e.defaultState&&"disabled"in e&&"boolean"==typeof e.disabled&&"subscribe"in e&&"function"==typeof e.subscribe};class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];t!==undefined&&(this[e]=t)}}else for(const t of Object.keys(e))if(this.internalConfig[t]!==undefined){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseControllerV1=n,r.default=n}}},{package:"@metamask/phishing-controller>@metamask/base-controller",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/base-controller/dist/BaseControllerV1.cjs"}],[1908,{immer:4098},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=r.isBaseController=void 0;const a=e("immer");(0,a.enablePatches)(),r.isBaseController=function(e){return"name"in e&&"string"==typeof e.name&&"state"in e&&"object"==typeof e.state&&"metadata"in e&&"object"==typeof e.metadata};function o(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:i}){n.set(this,void 0),this.messagingSystem=e,this.name=r,s(this,n,(0,a.freeze)(i,!0),"f"),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return i(this,n,"f")}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,o]=a.produceWithPatches(i(this,n,"f"),e);return s(this,n,t,"f"),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:o}}applyPatches(e){const t=(0,a.applyPatches)(i(this,n,"f"),e);s(this,n,t,"f"),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},n=new WeakMap,r.getAnonymizedState=function(e,t){return o(e,t,"anonymous")},r.getPersistentState=function(e,t){return o(e,t,"persist")}}}},{package:"@metamask/phishing-controller>@metamask/base-controller",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.cjs"}],[1909,{"./RestrictedControllerMessenger.cjs":1910},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=void 0;const c=e("./RestrictedControllerMessenger.cjs");r.ControllerMessenger=class{constructor(){n.set(this,new Map),s.set(this,new Map),i.set(this,new Map),a.set(this,new Map)}registerActionHandler(e,t){if(o(this,n,"f").has(e))throw new Error(`A handler for ${e} has already been registered`);o(this,n,"f").set(e,t)}unregisterActionHandler(e){o(this,n,"f").delete(e)}clearActions(){o(this,n,"f").clear()}call(e,...t){const r=o(this,n,"f").get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){o(this,i,"f").set(e,t)}publish(e,...t){const r=o(this,s,"f").get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=o(this,a,"f").get(e),s=n(...t);s!==r&&(o(this,a,"f").set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=o(this,s,"f").get(e);if(n||(n=new Map,o(this,s,"f").set(e,n)),n.set(t,r),r){const n=o(this,i,"f").get(e);if(n){const e=r(...n());o(this,a,"f").set(t,e)}}}unsubscribe(e,t){const r=o(this,s,"f").get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&o(this,a,"f").delete(t),r.delete(t)}clearEventSubscriptions(e){o(this,s,"f").delete(e)}clearSubscriptions(){o(this,s,"f").clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new c.RestrictedControllerMessenger({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}},n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap}}},{package:"@metamask/phishing-controller>@metamask/base-controller",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.cjs"}],[191,{"../../../shared/constants/network":4959,"bignumber.js":3402,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},a=e("../../../shared/constants/network");const o=e=>new i.default(e||"0x0",16).gt(0),c=["0x3","0x2a","0x4"],l={"0x3":{rpcUrl:(0,a.getRpcUrl)({network:"ropsten"}),nickname:"Ropsten",ticker:"RopstenETH"},"0x2a":{rpcUrl:(0,a.getRpcUrl)({network:"kovan"}),nickname:"Kovan",ticker:"KovanETH"},"0x4":{rpcUrl:(0,a.getRpcUrl)({network:"rinkeby"}),nickname:"Rinkeby",ticker:"RinkebyETH"}};r.default={version:74,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=74;const r=function(e){var t,r;const n=(null==e?void 0:e.PreferencesController)||{},i=n.preferences||{},a=(null==e?void 0:e.NetworkController)||{},u=(null==a?void 0:a.provider)||{},d=c.filter((e=>e===(null==u?void 0:u.chainId)));if(!i.showTestNetworks&&0===d.length)return e;const h=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},f=(null===(r=e.CachedBalancesController)||void 0===r?void 0:r.cachedBalances)||{},p=Object.values(h).filter((({chainId:e})=>c.includes(e))).map((({chainId:e})=>e)),m=c.filter((e=>Object.values(f[e]||{}).some(o))),g=(0,s.uniq)([...m,...p,...d]),y=n.frequentRpcListDetail??[];g.forEach((e=>{y.find((t=>t.chainId===e))||y.unshift({rpcUrl:l[e].rpcUrl,chainId:e,ticker:l[e].ticker,nickname:l[e].nickname,rpcPrefs:{}})})),y.length&&(n.frequentRpcListDetail=y);if(d.length){const e=d[0];a.provider={...a.provider,type:"rpc",rpcUrl:l[e].rpcUrl,chainId:e,nickname:l[e].nickname,ticker:l[e].ticker}}return{...e,PreferencesController:{...n},NetworkController:{...a}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/074.js"}],[1910,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,l,u,d=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},h=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.RestrictedControllerMessenger=void 0;r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){n.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),d(this,s,e,"f"),d(this,i,t,"f"),d(this,a,r,"f"),d(this,o,c,"f")}registerActionHandler(e,t){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").registerActionHandler(e,t)}unregisterActionHandler(e){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").unregisterActionHandler(e)}call(e,...t){if(!h(this,n,"m",l).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return h(this,s,"f").call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").publish(e,...t)}subscribe(e,t,r){if(!h(this,n,"m",c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?h(this,s,"f").subscribe(e,t,r):h(this,s,"f").subscribe(e,t)}unsubscribe(e,t){if(!h(this,n,"m",c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);h(this,s,"f").unsubscribe(e,t)}clearEventSubscriptions(e){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").clearEventSubscriptions(e)}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,n=new WeakSet,c=function(e){const t=h(this,o,"f");return h(this,n,"m",u).call(this,e)||null!==t&&t.includes(e)},l=function(e){const t=h(this,a,"f");return h(this,n,"m",u).call(this,e)||null!==t&&t.includes(e)},u=function(e){return e.startsWith(`${h(this,i,"f")}:`)}}}},{package:"@metamask/phishing-controller>@metamask/base-controller",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/base-controller/dist/RestrictedControllerMessenger.cjs"}],[1911,{"./BaseControllerV1.cjs":1907,"./BaseControllerV2.cjs":1908,"./ControllerMessenger.cjs":1909,"./RestrictedControllerMessenger.cjs":1910},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RestrictedControllerMessenger=r.ControllerMessenger=r.isBaseController=r.getPersistentState=r.getAnonymizedState=r.BaseController=r.isBaseControllerV1=r.BaseControllerV1=void 0;var n=e("./BaseControllerV1.cjs");Object.defineProperty(r,"BaseControllerV1",{enumerable:!0,get:function(){return n.BaseControllerV1}}),Object.defineProperty(r,"isBaseControllerV1",{enumerable:!0,get:function(){return n.isBaseControllerV1}});var s=e("./BaseControllerV2.cjs");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return s.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return s.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return s.getPersistentState}}),Object.defineProperty(r,"isBaseController",{enumerable:!0,get:function(){return s.isBaseController}});var i=e("./ControllerMessenger.cjs");Object.defineProperty(r,"ControllerMessenger",{enumerable:!0,get:function(){return i.ControllerMessenger}});var a=e("./RestrictedControllerMessenger.cjs");Object.defineProperty(r,"RestrictedControllerMessenger",{enumerable:!0,get:function(){return a.RestrictedControllerMessenger}})}}},{package:"@metamask/phishing-controller>@metamask/base-controller",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/base-controller/dist/index.cjs"}],[192,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:75,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=75;const r=function(e){return delete e.ThreeBoxController,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/075.js"}],[1929,{"./ppom-controller":1930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.NETWORK_CACHE_DURATION=void 0;var n=e("./ppom-controller");Object.defineProperty(r,"NETWORK_CACHE_DURATION",{enumerable:!0,get:function(){return n.NETWORK_CACHE_DURATION}}),Object.defineProperty(r,"PPOMController",{enumerable:!0,get:function(){return n.PPOMController}})}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/index.js"}],[193,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:76,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=76;const r=function(e){var t;if(e.CollectiblesController){const{allCollectibleContracts:t,allCollectibles:r,ignoredCollectibles:n,...s}=e.CollectiblesController;e.NftController={...t?{allNftContracts:t}:{},...r?{allNfts:r}:{},...n?{ignoredNfts:n}:{},...s},delete e.CollectiblesController}null!==(t=e.PreferencesController)&&void 0!==t&&t.useCollectibleDetection&&(e.PreferencesController.useNftDetection=e.PreferencesController.useCollectibleDetection,delete e.PreferencesController.useCollectibleDetection);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/076.js"}],[1930,{"./ppom-storage":1931,"./util":1932,"@metamask/base-controller":1936,"@metamask/controller-utils":1938,"await-semaphore":3391},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,l,u,d,h,f,p,m,g,y,v,w,_,b,k,T,S,E,C,M,j,P,I,A,O,x,N,R=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},B=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.NETWORK_CACHE_DURATION=void 0;const L=e("@metamask/base-controller"),D=e("@metamask/controller-utils"),$=e("await-semaphore"),U=e("./ppom-storage"),F=e("./util");r.NETWORK_CACHE_DURATION=6048e5;const H=["eth_call","eth_blockNumber","eth_createAccessList","eth_getLogs","eth_getFilterLogs","eth_getTransactionByHash","eth_chainId","eth_getBlockByHash","eth_getBlockByNumber","eth_getCode","eth_getStorageAt","eth_getBalance","eth_getTransactionCount","trace_call","trace_callMany","debug_traceCall","trace_filter"],V={versionInfo:{persist:!0,anonymous:!1},storageMetadata:{persist:!0,anonymous:!1}},G="PPOMController",W={headers:{"Content-Type":"application/json"}};class q extends L.BaseControllerV2{constructor({chainId:e,messenger:t,provider:r,storageBackend:v,securityAlertsEnabled:w,onPreferencesChange:_,ppomProvider:S,cdnBaseUrl:E,providerRequestLimit:C,state:M,blockaidPublicKey:j,nativeCrypto:P}){super({name:G,metadata:V,messenger:t,state:{versionInfo:M?.versionInfo??[],storageMetadata:M?.storageMetadata??[]}}),n.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),d.set(this,0),h.set(this,void 0),f.set(this,void 0),p.set(this,{}),m.set(this,void 0),g.set(this,!1),y.set(this,undefined),R(this,h,(0,F.addHexPrefix)(e),"f"),R(this,i,r,"f"),R(this,c,S,"f"),R(this,a,new U.PPOMStorage({storageBackend:v,readMetadata:()=>[...this.state.storageMetadata],writeMetadata:e=>{this.update((t=>{t.storageMetadata=e}))}}),"f"),R(this,o,new $.Mutex,"f"),R(this,l,E,"f"),R(this,u,C??300,"f"),R(this,f,w,"f"),R(this,m,j,"f"),R(this,y,P,"f"),_(B(this,n,"m",b).bind(this)),B(this,n,"m",k).call(this),B(this,n,"m",T).call(this)}async usePPOM(e){if(!B(this,f,"f"))throw Error("User has securityAlertsEnabled set to false");if(!(0,F.blockaidValidationSupportedForNetwork)(B(this,h,"f")))throw Error(`Blockaid validation not available on network with chainId: ${B(this,h,"f")}`);return await B(this,o,"f").use((async()=>{await B(this,n,"m",E).call(this),R(this,d,0,"f"),R(this,p,{},"f");return{...await e(B(this,s,"f")),providerRequestsCount:{...B(this,p,"f")}}}))}}r.PPOMController=q,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,y=new WeakMap,n=new WeakSet,v=async function(){if(B(this,f,"f")&&!B(this,g,"f")){const{ppomInit:e}=B(this,c,"f");await e("./ppom_bg.wasm"),R(this,g,!0,"f")}},w=function(){B(this,n,"m",S).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)}));const{storageMetadata:e}=this.state;this.update((e=>{e.versionInfo=[],e.storageMetadata=[]})),B(this,a,"f").deleteAllFiles(e).catch((e=>{console.error(`Error in deleting files: ${e.message}`)}))},_=function(e){const t=this.messagingSystem.call("NetworkController:getNetworkClientById",e.selectedNetworkClientId),{chainId:r}=t.configuration,s=(0,F.addHexPrefix)(r);s!==B(this,h,"f")&&(R(this,h,s,"f"),B(this,n,"m",S).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)})))},b=function(e){const t=e.securityAlertsEnabled;t!==B(this,f,"f")&&(R(this,f,t,"f"),t||B(this,n,"m",w).call(this))},k=function(){this.messagingSystem.registerActionHandler(`${G}:usePPOM`,this.usePPOM.bind(this))},T=function(){const e=B(this,n,"m",_).bind(this);this.messagingSystem.subscribe("NetworkController:stateChange",e)},S=async function(){await B(this,o,"f").use((async()=>{B(this,s,"f")&&(B(this,s,"f").free(),R(this,s,undefined,"f"))}))},E=async function(){const e=await B(this,n,"m",C).call(this);(B(this,s,"f")===undefined||e)&&(R(this,s,await B(this,n,"m",N).call(this),"f"),B(this,a,"f").syncMetadata(this.state.versionInfo).catch((e=>{console.error(`Error while trying to sync metadata: ${e.message}`)})))},C=async function(){const e=await B(this,n,"m",A).call(this);return!!e&&(this.update((t=>{t.versionInfo=e})),!0)},M=function(e,t){return e.find((e=>e.name===t.name&&e.chainId===t.chainId&&e.version===t.version&&e.checksum===t.checksum))},j=async function(e){const t=await Promise.all(e.map((async e=>{let t;try{t=await B(this,n,"m",P).call(this,e)}catch(t){console.error(`Error in getting file ${e.filePath}: ${t.message}`)}return t?[e.name,new Uint8Array(t)]:undefined})));return t?.filter((e=>e?.[1]!==undefined))},P=async function(e){const{storageMetadata:t}=this.state;if(B(this,n,"m",M).call(this,t,e))try{return await B(this,a,"f").readFile(e.name,e.chainId)}catch(e){console.error(`Error in reading file: ${e.message}`)}(0,F.checkFilePath)(e.filePath);const r=(0,F.constructURLHref)(B(this,l,"f"),e.filePath),s=await B(this,n,"m",O).call(this,r);return await(0,F.validateSignature)(s,e.hashSignature,B(this,m,"f"),e.filePath,B(this,y,"f")),await B(this,a,"f").writeFile({data:s,...e}).catch((e=>{console.error(`Error in writing file: ${e.message}`)})),s},I=async function(e,t={},r="GET"){const n=await(0,D.safelyExecute)((async()=>(0,D.timeoutFetch)(e,{method:r,cache:"no-cache",redirect:"error",...t},1e4)),!0),s=304===n?.status;if(!n?.status||n?.status<200||n?.status>399)throw new Error(`Failed to fetch file with url: ${e}`);return{cached:s,response:n}},A=async function(){const e=(0,F.constructURLHref)(B(this,l,"f"),"ppom_version.json"),{cached:t,response:r}=await B(this,n,"m",I).call(this,e,{headers:W});return t&&this.state.versionInfo?.length?undefined:r.json()},O=async function(e){const{response:t}=await B(this,n,"m",I).call(this,e);return await t.arrayBuffer()},x=async function(e,t){return new Promise((r=>{B(this,d,"f")>B(this,u,"f")?r(F.PROVIDER_ERRORS.limitExceeded()):(R(this,d,B(this,d,"f")+1,"f"),H.includes(e)?(B(this,p,"f")[e]=B(this,p,"f")[e]?Number(B(this,p,"f")[e])+1:1,B(this,i,"f").sendAsync((0,F.createPayload)(e,t),((e,t)=>{r(e?{jsonrpc:"2.0",id:(0,F.IdGenerator)(),error:e}:t)}))):r(F.PROVIDER_ERRORS.methodNotSupported()))}))},N=async function(){await B(this,n,"m",v).call(this);const e=this.state.versionInfo.filter((({chainId:e})=>e===B(this,h,"f")));if(e?.length===undefined||0===e?.length)throw new Error(`Aborting initialising PPOM as no files are found for the network with chainId: ${B(this,h,"f")}`);const t=await B(this,n,"m",j).call(this,e);if(t?.length!==e?.length)throw new Error(`Aborting initialising PPOM as not all files could not be downloaded for the network with chainId: ${B(this,h,"f")}`);B(this,s,"f")&&B(this,s,"f").free();const{PPOM:r}=B(this,c,"f");return r.new(B(this,n,"m",x).bind(this),t)}}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-controller.js"}],[1931,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMStorage=void 0;r.PPOMStorage=class{constructor({storageBackend:e,readMetadata:t,writeMetadata:r}){n.set(this,void 0),s.set(this,void 0),i.set(this,void 0),a(this,n,e,"f"),a(this,s,t,"f"),a(this,i,r,"f")}async syncMetadata(e){const t=o(this,s,"f").call(this),r=[];for(const n of t){try{await this.readFile(n.name,n.chainId)}catch(e){console.error("Error: ",e);continue}e.find((e=>e.name===n.name&&e.chainId===n.chainId&&e.version===n.version&&e.checksum===n.checksum))&&r.push(n)}const a=await o(this,n,"f").dir();for(const{name:e,chainId:t}of a)r.find((r=>r.name===e&&r.chainId===t))||await o(this,n,"f").delete({name:e,chainId:t});return o(this,i,"f").call(this,r),r}async deleteAllFiles(e){for(const t of e){const{name:e,chainId:r}=t;try{await o(this,n,"f").delete({name:e,chainId:r})}catch(t){console.error(`Error in deleting file: ${e}, ${r}`,t)}}}async readFile(e,t){const r=o(this,s,"f").call(this).find((r=>r.name===e&&r.chainId===t));if(!r)throw new Error(`File metadata (${e}, ${t}) not found`);const i=await o(this,n,"f").read({name:e,chainId:t},r.checksum);if(!i)throw new Error(`Storage File (${e}, ${t}) not found`);return i}async writeFile({data:e,name:t,chainId:r,version:a,checksum:c}){await o(this,n,"f").write({name:t,chainId:r},e,c);const l=o(this,s,"f").call(this),u=l.find((e=>e.name===t&&e.chainId===r));u?(u.version=a,u.checksum=c):l.push({name:t,chainId:r,version:a,checksum:c}),o(this,i,"f").call(this,l)}},n=new WeakMap,s=new WeakMap,i=new WeakMap}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-storage.js"}],[1932,{buffer:3497,"crypto-js":3607,elliptic:3662,"json-rpc-random-id":4144},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.checkFilePath=r.addHexPrefix=r.constructURLHref=r.validateSignature=r.PROVIDER_ERRORS=r.createPayload=r.IdGenerator=r.blockaidValidationSupportedForNetwork=r.SUPPORTED_NETWORK_CHAINIDS=void 0;const o=i(e("crypto-js")),c=a(e("elliptic")),l=a(e("json-rpc-random-id")),u=c.default.eddsa;r.SUPPORTED_NETWORK_CHAINIDS={MAINNET:"0x1",BSC:"0x38",OPTIMISM:"0xa",POLYGON:"0x89",AVALANCHE:"0xa86a",ARBITRUM:"0xa4b1",LINEA_MAINNET:"0xe708",BASE:"0x2105",SEPOLIA:"0xaa36a7",OPBNB:"0xcc",ZKSYNC:"0x144",SCROLL:"0x82750",BERACHAIN:"0x138d5",METACHAIN_ONE:"0x1b6e6"};r.blockaidValidationSupportedForNetwork=e=>Object.values(r.SUPPORTED_NETWORK_CHAINIDS).some((t=>t===e)),r.IdGenerator=(0,l.default)();r.createPayload=(e,t)=>({id:(0,r.IdGenerator)(),jsonrpc:"2.0",method:e,params:t??[]}),r.PROVIDER_ERRORS={limitExceeded:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32005,message:"Limit exceeded"}}),methodNotSupported:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32601,message:"Method not supported"}})};r.validateSignature=async(e,r,n,s,i,a)=>{const c=await(async(e,t,r=!0)=>{if(t)return t.createHash("sha256").update(e).digest("hex");if("crypto"in globalThis&&"object"==typeof globalThis.crypto&&globalThis.crypto.subtle?.digest&&r){const t=await globalThis.crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")}return(0,o.SHA256)(o.default.lib.WordArray.create(e)).toString()})(e,i,a);if(!new u("ed25519").keyFromPublic(n).verify(t.from(c),r))throw Error(`Signature verification failed for file path: ${s}`)};r.constructURLHref=(e,t)=>new URL(`https://${e}/${t}`.replace(/https:\/\/https:\/\//gu,"https://").replace(/\/\//gu,"/")).href;r.addHexPrefix=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):`0x${parseInt(e,10).toString(16)}`;r.checkFilePath=e=>{if(!e.match(/^[\w./]+$/u))throw new Error(`Invalid file path for data file: ${e}`)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/util.js"}],[1933,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1934,{immer:4098},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function s(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${s}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1935,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),s=n(...t);s!==r&&(this.eventPayloadCache.set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1936,{"./BaseController":1933,"./BaseControllerV2":1934,"./ControllerMessenger":1935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var i=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return i.BaseController}});var a=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return a.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return a.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return a.getPersistentState}}),s(e("./ControllerMessenger"),r)}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/index.js"}],[1937,{"./types":1941},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/constants.js"}],[1938,{"./constants":1937,"./siwe":1940,"./types":1941,"./util":1942},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./constants"),r),s(e("./util"),r),s(e("./types"),r),s(e("./siwe"),r)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/index.js"}],[1939,{"@metamask/utils":2717},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/logger.js"}],[194,{"@metamask/utils":2717},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"PreferencesController")&&(0,n.isObject)(e.PreferencesController)&&(0,n.hasProperty)(e.PreferencesController,"frequentRpcListDetail")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"networkConfigurations")&&delete e.PreferencesController.frequentRpcListDetail;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-082.ts"}],[1940,{"./logger":1939,"@metamask/utils":2717,"@spruceid/siwe-parser":2979,buffer:3497},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@metamask/utils"),s=e("@spruceid/siwe-parser"),i=e("./logger"),a=(0,i.createModuleLogger)(i.projectLogger,"detect-siwe");function o(e){try{const s="string"!=typeof(r=e)?r:(0,n.remove0x)(r),i=t.from(s,"hex");return 32===i.length?e:i.toString("utf8")}catch(t){return a(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:s}=e;if(!n||!(null===(t=null==s?void 0:s.parsedMessage)||void 0===t?void 0:t.domain))return!1;const i=new URL(n),a=(0,r.parseDomainParts)(s.parsedMessage.domain,i.protocol);return 0===a.hostname.localeCompare(i.hostname,undefined,{sensitivity:"accent"})&&(""!==a.port&&a.port!==i.port?""===i.port&&a.port===c[i.protocol]:""===a.username||a.username===i.username)}catch(e){return a(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new s.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1941,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/types.js"}],[1942,{"./constants":1937,"@ethereumjs/util":450,"@metamask/ethjs-unit":1472,"@metamask/utils":2717,"bn.js":3449,buffer:3497,"eth-ens-namehash":3689,"fast-deep-equal":3814},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const i=e("@ethereumjs/util"),a=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),c=s(e("bn.js")),l=s(e("eth-ens-namehash")),u=s(e("fast-deep-equal")),d=e("./constants"),h=new Error("timeout");function f(e){return e?new c.default((0,o.remove0x)(e),16):new c.default(0)}function p(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function m(e,t){return n(this,void 0,void 0,(function*(){const r=yield p(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e,(0,o.isStrictHexString)(e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=d.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.add0x)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new c.default(t),s=new c.default(r);return e.mul(n).div(s)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new c.default(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,a.toWei)(r,"gwei");if(n.length<=9)return(0,a.toWei)(`${r}.${n}`,"gwei");const s=n.slice(9)[0];n=n.slice(0,9);let i=(0,a.toWei)(`${r}.${n}`,"gwei");return Number(s)>=5&&(i=i.add(new c.default(1))),i},r.weiHexToGweiDec=function(e){const t=new c.default((0,o.remove0x)(e),16);return(0,a.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=f,r.hexToText=function(e){try{const r=(0,o.remove0x)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return c.default.isBN(e)?e:new c.default(f(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${c.default.isBN(e)?e.toString(16):new c.default(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,o.add0x)(e);return(0,o.isHexString)(t)?(0,i.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.add0x)(e):e;return!!(0,o.isStrictHexString)(r)&&(0,i.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=p,r.handleFetch=m,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:s}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))]):yield m(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===h)))throw e;console.error(e)}(e,s)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=l.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,s)=>{const i=(e,t)=>{e?s(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,i):e.sendAsync({method:t,params:r},i)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isStrictHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/util.js"}],[195,{"@metamask/utils":2717},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"network")&&(0,n.hasProperty)(e.NetworkController,"networkId")&&delete e.NetworkController.network;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-084.ts"}],[196,{"@metamask/utils":2717},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"provider")&&(0,n.hasProperty)(e.NetworkController,"providerConfig")&&delete e.NetworkController.provider;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-086.ts"}],[197,{"@metamask/utils":2717},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if((0,n.hasProperty)(e,"NftController")&&(0,n.isObject)(e.NftController)){const t=e.NftController;if((0,n.hasProperty)(t,"allNftContracts")&&(0,n.isObject)(t.allNftContracts)){const{allNftContracts:e}=t;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,n.isObject)(r)&&s(r))for(const e of Object.keys(r))(0,n.isStrictHexString)(e)||delete r[e]}))}if((0,n.hasProperty)(t,"allNfts")&&(0,n.isObject)(t.allNfts)){const{allNfts:e}=t;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,n.isObject)(r)&&s(r))for(const e of Object.keys(r))(0,n.isStrictHexString)(e)||delete r[e]}))}e.NftController=t}if((0,n.hasProperty)(e,"TokenListController")&&(0,n.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,n.hasProperty)(t,"tokensChainsCache")&&(0,n.isObject)(t.tokensChainsCache)&&s(t.tokensChainsCache))for(const e of Object.keys(t.tokensChainsCache))(0,n.isStrictHexString)(e)||delete t.tokensChainsCache[e]}if((0,n.hasProperty)(e,"TokensController")&&(0,n.isObject)(e.TokensController)){const t=e.TokensController;if((0,n.hasProperty)(t,"allTokens")&&(0,n.isObject)(t.allTokens)&&s(t.allTokens)){const{allTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allTokens[r]}if((0,n.hasProperty)(t,"allIgnoredTokens")&&(0,n.isObject)(t.allIgnoredTokens)&&s(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allIgnoredTokens[r]}if((0,n.hasProperty)(t,"allDetectedTokens")&&(0,n.isObject)(t.allDetectedTokens)&&s(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allDetectedTokens[r]}e.TokensController=t}return e};var n=e("@metamask/utils");function s(e){return Object.keys(e).some((e=>(0,n.isStrictHexString)(e)))}}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-088.ts"}],[1976,{"./chunk-Z4BLTVTB.js":1978,"@metamask/base-controller":1985,"@metamask/selected-network-controller":2028,"@metamask/utils":2717},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f,p,m,g,y,v,w,_,b=e("./chunk-Z4BLTVTB.js"),k=e("@metamask/base-controller"),T=e("@metamask/selected-network-controller"),S=e("@metamask/utils"),E="QueuedRequestController",C={enqueueRequest:`${E}:enqueueRequest`,getState:`${E}:getState`},M={networkSwitched:`${E}:networkSwitched`,stateChange:`${E}:stateChange`},j=class extends k.BaseController{constructor({messenger:e,shouldRequestSwitchNetwork:t,clearPendingConfirmations:r,showApprovalRequest:h}){super({name:E,metadata:{queuedRequestCount:{anonymous:!0,persist:!1}},messenger:e,state:{queuedRequestCount:0}}),b.__privateAdd.call(void 0,this,l),b.__privateAdd.call(void 0,this,d),b.__privateAdd.call(void 0,this,f),b.__privateAdd.call(void 0,this,m),b.__privateAdd.call(void 0,this,y),b.__privateAdd.call(void 0,this,w),b.__privateAdd.call(void 0,this,n,void 0),b.__privateAdd.call(void 0,this,s,[]),b.__privateAdd.call(void 0,this,i,0),b.__privateAdd.call(void 0,this,a,void 0),b.__privateAdd.call(void 0,this,o,void 0),b.__privateAdd.call(void 0,this,c,void 0),b.__privateSet.call(void 0,this,a,t),b.__privateSet.call(void 0,this,o,r),b.__privateSet.call(void 0,this,c,h),b.__privateMethod.call(void 0,this,l,u).call(this)}async enqueueRequest(e,t){void 0===b.__privateGet.call(void 0,this,n)&&b.__privateSet.call(void 0,this,n,e.origin);try{this.state.queuedRequestCount>0||b.__privateGet.call(void 0,this,n)!==e.origin?(b.__privateGet.call(void 0,this,c).call(this),await b.__privateMethod.call(void 0,this,w,_).call(this,e.origin)):b.__privateGet.call(void 0,this,a).call(this,e)&&await b.__privateMethod.call(void 0,this,m,g).call(this),b.__privateSet.call(void 0,this,i,b.__privateGet.call(void 0,this,i)+1);try{await t()}finally{b.__privateSet.call(void 0,this,i,b.__privateGet.call(void 0,this,i)-1)}return}finally{0===b.__privateGet.call(void 0,this,i)&&(b.__privateSet.call(void 0,this,n,void 0),b.__privateGet.call(void 0,this,s).length>0&&b.__privateMethod.call(void 0,this,f,p).call(this))}}};n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakSet,u=function(){this.messagingSystem.registerActionHandler(`${E}:enqueueRequest`,this.enqueueRequest.bind(this)),this.messagingSystem.subscribe(T.SelectedNetworkControllerEventTypes.stateChange,((e,t)=>{t.forEach((({op:e,path:t})=>{if(2===t.length&&"domains"===t[0]&&"string"==typeof t[1]){const r=t[1];b.__privateMethod.call(void 0,this,d,h).call(this,r),"remove"===e&&r===b.__privateGet.call(void 0,this,n)&&b.__privateGet.call(void 0,this,o).call(this)}}))}))},d=new WeakSet,h=function(e){b.__privateGet.call(void 0,this,s).filter((({origin:t})=>t===e)).forEach((({processRequest:e})=>{e(new Error("The request has been rejected due to a change in selected network. Please verify the selected network and retry the request."))})),b.__privateSet.call(void 0,this,s,b.__privateGet.call(void 0,this,s).filter((({origin:t})=>t!==e)))},f=new WeakSet,p=async function(){const e=b.__privateGet.call(void 0,this,s).shift();b.__privateSet.call(void 0,this,n,e.origin);const t=[e.processRequest];for(;b.__privateGet.call(void 0,this,s)[0]?.origin===b.__privateGet.call(void 0,this,n);){const e=b.__privateGet.call(void 0,this,s).shift();t.push(e.processRequest)}let r;try{await b.__privateMethod.call(void 0,this,m,g).call(this)}catch(e){r=e}for(const e of t)e(r);b.__privateMethod.call(void 0,this,y,v).call(this)},m=new WeakSet,g=async function(){if(!b.__privateGet.call(void 0,this,n))throw new Error("Current batch origin must be initialized first");const e=this.messagingSystem.call("SelectedNetworkController:getNetworkClientIdForDomain",b.__privateGet.call(void 0,this,n)),{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");e!==t&&(await this.messagingSystem.call("NetworkController:setActiveNetwork",e),this.messagingSystem.publish("QueuedRequestController:networkSwitched",e))},y=new WeakSet,v=function(){this.update((e=>{e.queuedRequestCount=b.__privateGet.call(void 0,this,s).length}))},w=new WeakSet,_=async function(e){const{promise:t,reject:r,resolve:n}=S.createDeferredPromise.call(void 0,{suppressUnhandledRejection:!0});return b.__privateGet.call(void 0,this,s).push({origin:e,processRequest:e=>{e?r(e):n()}}),b.__privateMethod.call(void 0,this,y,v).call(this),t},r.controllerName=E,r.QueuedRequestControllerActionTypes=C,r.QueuedRequestControllerEventTypes=M,r.QueuedRequestController=j}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/chunk-5GMDEBVM.js"}],[1977,{"@metamask/json-rpc-engine":1487,"@metamask/rpc-errors":1992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/json-rpc-engine"),s=e("@metamask/rpc-errors");r.createQueuedRequestMiddleware=({enqueueRequest:e,useRequestQueue:t,shouldEnqueueRequest:r})=>n.createAsyncMiddleware.call(void 0,(async(n,i,a)=>{if(function(e){if(!e.origin)throw new Error("Request object is lacking an 'origin'");if("string"!=typeof e.origin)throw new Error(`Request object has an invalid origin of type '${typeof e.origin}'`);if(!e.networkClientId)throw new Error("Request object is lacking a 'networkClientId'");if("string"!=typeof e.networkClientId)throw new Error(`Request object has an invalid networkClientId of type '${typeof e.networkClientId}'`)}(n),!t()||!r(n))return await a();try{await e(n,a)}catch(e){i.error=s.serializeError.call(void 0,e)}}))}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/chunk-VLAKOB6V.js"}],[1978,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/chunk-Z4BLTVTB.js"}],[1979,{"./chunk-5GMDEBVM.js":1976,"./chunk-VLAKOB6V.js":1977,"./chunk-Z4BLTVTB.js":1978},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-5GMDEBVM.js"),s=e("./chunk-VLAKOB6V.js");e("./chunk-Z4BLTVTB.js"),r.QueuedRequestController=n.QueuedRequestController,r.QueuedRequestControllerActionTypes=n.QueuedRequestControllerActionTypes,r.QueuedRequestControllerEventTypes=n.QueuedRequestControllerEventTypes,r.createQueuedRequestMiddleware=s.createQueuedRequestMiddleware}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/index.js"}],[198,{"./077-supplements/077-supplement-for-082":194,"./077-supplements/077-supplement-for-084":195,"./077-supplements/077-supplement-for-086":196,"./077-supplements/077-supplement-for-088":197,"@metamask/utils":2717,lodash:4294,loglevel:4300},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=u(e("loglevel")),i=e("@metamask/utils"),a=u(e("./077-supplements/077-supplement-for-082")),o=u(e("./077-supplements/077-supplement-for-084")),c=u(e("./077-supplements/077-supplement-for-086")),l=u(e("./077-supplements/077-supplement-for-088"));function u(e){return e&&e.__esModule?e:{default:e}}r.default={version:77,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=77;let r=function(e){if(!(0,i.hasProperty)(e,"TokenListController"))return s.default.warn("Skipping migration, TokenListController state is missing"),e;var t,r;if(!(0,i.isObject)(e.TokenListController))return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokenListController is "+typeof e.TokenListController)),e;if(!(0,i.hasProperty)(e.TokenListController,"tokensChainsCache"))return s.default.warn("Skipping migration, TokenListController.tokensChainsCache state is missing"),e;const{TokenListController:n}=e,{tokensChainsCache:a}=n;let o,c;for(const e in a){var l,u;if(o=a[e].data||{},c={},Array.isArray(o))for(const e of o)c[e.address]=e;else if((null===(l=Object.keys(o)[0])||void 0===l?void 0:l.toLowerCase())!==(null===(u=o[Object.keys(o)[0]])||void 0===u||null===(u=u.address)||void 0===u?void 0:u.toLowerCase()))for(const e in o)c[o[e].address]=o[e];a[e].data=Object.keys(c).length>0?c:o}return n.tokensChainsCache=a,{...e,TokenListController:{...n}}}(t.data);return r=(0,a.default)(r),r=(0,o.default)(r),r=(0,c.default)(r),r=(0,l.default)(r),t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/077.js"}],[1980,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},s=n;r.BaseControllerV1=n,r.BaseControllerV1_default=s}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[1981,{"./chunk-UJFCPTF3.js":1983,"./chunk-Z4BLTVTB.js":1984},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,a).get(e),s=n(...t);s!==r&&(c.__privateGet.call(void 0,this,a).set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,s).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,s).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,s).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,s).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1982,{"./chunk-Z4BLTVTB.js":1984,immer:4098},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){s.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,s.__privateSet.call(void 0,this,n,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return s.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=i.produceWithPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);return s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[1983,{"./chunk-Z4BLTVTB.js":1984},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=f.__privateGet.call(void 0,this,a);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},l=new WeakSet,u=function(e){const t=f.__privateGet.call(void 0,this,i);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,s)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){f.__privateAdd.call(void 0,this,o),f.__privateAdd.call(void 0,this,l),f.__privateAdd.call(void 0,this,d),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,s,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,a,void 0),f.__privateSet.call(void 0,this,n,e),f.__privateSet.call(void 0,this,s,t),f.__privateSet.call(void 0,this,i,r),f.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,l,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,n).subscribe(e,t,r):f.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1984,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1985,{"./chunk-FTHCJ6HY.js":1980,"./chunk-G42723LG.js":1981,"./chunk-IURK6TKD.js":1982,"./chunk-UJFCPTF3.js":1983,"./chunk-Z4BLTVTB.js":1984},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-FTHCJ6HY.js"),s=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=s.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=s.getAnonymizedState,r.getPersistentState=s.getPersistentState}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1986,{"@metamask/base-controller":1226,"@metamask/rpc-errors":1992,"@metamask/utils":2717},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/base-controller"),s=e("@metamask/rpc-errors"),i=e("@metamask/utils"),a="RateLimitController",o={requests:{persist:!1,anonymous:!1}},c=class extends n.BaseController{constructor({rateLimitTimeout:e=5e3,rateLimitCount:t=1,messenger:r,state:n,implementations:s}){const c={requests:i.getKnownPropertyNames.call(void 0,s).reduce(((e,t)=>({...e,[t]:{}})),{})};super({name:a,metadata:o,messenger:r,state:{...c,...n}}),this.implementations=s,this.rateLimitTimeout=e,this.rateLimitCount=t,this.messagingSystem.registerActionHandler(`${a}:call`,((e,t,...r)=>this.call(e,t,...r)))}async call(e,t,...r){if(this.isRateLimited(t,e))throw s.rpcErrors.limitExceeded({message:`"${t.toString()}" is currently rate-limited. Please try again later.`});this.recordRequest(t,e);const n=this.implementations[t].method;if(!n)throw new Error("Invalid api type");return n(...r)}isRateLimited(e,t){const r=this.implementations[e].rateLimitCount??this.rateLimitCount;return this.state.requests[e][t]>=r}recordRequest(e,t){const r=this.implementations[e].rateLimitTimeout??this.rateLimitTimeout,n=this.state.requests[e][t]??0;this.update((s=>{0===n&&setTimeout((()=>this.resetRequestCount(e,t)),r),Object.assign(s,{requests:{...s.requests,[e]:{[t]:n+1}}})}))}resetRequestCount(e,t){this.update((r=>{Object.assign(r,{requests:{...r.requests,[e]:{[t]:0}}})}))}};r.RateLimitController=c}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/chunk-37GF32BR.js"}],[1987,{"./chunk-37GF32BR.js":1986},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-37GF32BR.js");r.RateLimitController=n.RateLimitController}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/index.js"}],[199,{"@metamask/utils":2717,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,s.hasProperty)(e,"PhishingController")||!(0,s.isObject)(e.PhishingController))return e;const{PhishingController:t}=e;return delete t.phishing,delete t.lastFetched,e}(t.data),t},r.version=void 0;var n=e("lodash"),s=e("@metamask/utils");const i=r.version=78}}},{package:"$root$",file:"app/scripts/migrations/078.ts"}],[20,{"@metamask/obs-store":1876,loglevel:4300},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("@metamask/obs-store"),i=(n=e("loglevel"))&&n.__esModule?n:{default:n};function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o={onboardingTabs:{}},c={seedPhraseBackedUp:null,firstTimeFlowType:null,completedOnboarding:!1};r.default=class{constructor({initState:e}){a(this,"store",void 0),a(this,"registerOnboarding",(async(e,t)=>{if(this.store.getState().completedOnboarding)return void i.default.debug("Ignoring registerOnboarding; user already onboarded");const{onboardingTabs:r}={...this.store.getState()??{}};r&&(r[e]&&r[e]===t||(i.default.debug(`Registering onboarding tab at location '${e}' with tabId '${t}'`),r[e]=t,this.store.updateState({onboardingTabs:r})))})),this.store=new s.ObservableStore({...c,...e,...o})}setSeedPhraseBackedUp(e){this.store.updateState({seedPhraseBackedUp:e})}async completeOnboarding(){return this.store.updateState({completedOnboarding:!0}),!0}setFirstTimeFlowType(e){this.store.updateState({firstTimeFlowType:e})}}}}},{package:"$root$",file:"app/scripts/controllers/onboarding.ts"}],[200,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:79,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=79;const r=function(e){var t,r;(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.collectiblesDetectionNoticeDismissed)!==undefined&&delete e.AppStateController.collectiblesDetectionNoticeDismissed;(null==e||null===(r=e.metamask)||void 0===r?void 0:r.collectiblesDropdownState)!==undefined&&delete e.metamask.collectiblesDropdownState;return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/079.js"}],[201,{lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:80,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=80;const r=function(e){var t;(null==e||null===(t=e.metamask)||void 0===t?void 0:t.showPortfolioTooltip)!==undefined&&delete e.metamask.showPortfolioTooltip;return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/080.js"}],[202,{"@metamask/utils":2717,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);t.meta.version=i;const r=function(e){if(!(0,s.hasProperty)(e,"SnapController")||!(0,s.hasProperty)(e,"PermissionController")||!(0,s.isObject)(e.PermissionController))return e;const{PermissionController:t}=e,{subjects:r}=t;if(!(0,s.isObject)(r))return e;const i="wallet_snap_";for(const[t,a]of Object.entries(r)){if(!(0,s.isObject)(a)||!(0,s.isObject)(a.permissions))return e;let r,o=1;const{permissions:c}=a,l={...c};for(const[a,u]of Object.entries(c))if(a.startsWith(i)){if(!(0,s.isObject)(u)||!(0,s.hasProperty)(u,"id")||!(0,s.hasProperty)(u,"date"))return e;if((0,s.hasProperty)(l,"wallet_snap")||(l.wallet_snap={caveats:[{type:"snapIds",value:{}}],invoker:t,parentCapability:"wallet_snap"}),!(0,s.isObject)(l.wallet_snap))return e;if(!(0,n.isArray)(l.wallet_snap.caveats))return e;const c=a.slice(i.length),d=l.wallet_snap.caveats[0];if(!(0,s.isObject)(d))return e;if(!(0,s.hasProperty)(d,"type")||"snapIds"!==d.type||!(0,s.hasProperty)(d,"value")||!(0,s.isObject)(d.value))return e;if(d.value[c]={},"number"!=typeof u.date||"string"!=typeof u.id)return e;u.date>o&&(o=u.date,r=u.id),delete l[a]}l.wallet_snap&&(l.wallet_snap.date=o,l.wallet_snap.id=r,a.permissions=l)}return e}(t.data);return t.data=r,t},r.version=void 0;var n=e("lodash"),s=e("@metamask/utils");const i=r.version=81}}},{package:"$root$",file:"app/scripts/migrations/081.ts"}],[2026,{"./chunk-MQYWK4KP.js":2027},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-MQYWK4KP.js");r.createSelectedNetworkMiddleware=e=>(t,r,s)=>{if(!t.origin)throw new Error("Request object is lacking an 'origin'");var i;return t.networkClientId=(i=t.origin,e.call(n.SelectedNetworkControllerActionTypes.getNetworkClientIdForDomain,i)),s()}}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/chunk-4FNZCOPF.js"}],[2027,{"@metamask/base-controller":2034,"@metamask/swappable-obj-proxy":2608},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f,p,m=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},g=(e,t,r)=>(m(e,t,"read from private field"),r?r.call(e):t.get(e)),y=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},v=(e,t,r,n)=>(m(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),w=(e,t,r)=>(m(e,t,"access private method"),r),_=e("@metamask/base-controller"),b=e("@metamask/swappable-obj-proxy"),k="SelectedNetworkController",T={domains:{persist:!0,anonymous:!1}},S=["npm:","local:"],E="metamask",C={getState:`${k}:getState`,getNetworkClientIdForDomain:`${k}:getNetworkClientIdForDomain`,setNetworkClientIdForDomain:`${k}:setNetworkClientIdForDomain`},M={stateChange:`${k}:stateChange`},j=class extends _.BaseController{constructor({messenger:e,state:t={domains:{}},useRequestQueuePreference:r,onPreferencesStateChange:c,domainProxyMap:h}){super({name:k,metadata:T,messenger:e,state:t}),y(this,i),y(this,o),y(this,l),y(this,d),y(this,f),y(this,n,void 0),y(this,s,void 0),v(this,s,r),v(this,n,h),w(this,i,a).call(this),this.messagingSystem.call("PermissionController:getSubjectNames").filter((e=>void 0===this.state.domains[e])).forEach((e=>this.setNetworkClientIdForDomain(e,this.messagingSystem.call("NetworkController:getState").selectedNetworkClientId))),this.messagingSystem.subscribe("PermissionController:stateChange",((e,t)=>{t.forEach((({op:e,path:t})=>{if("subjects"===t[0]&&void 0!==t[1]&&"string"==typeof t[1]){const r=t[1];"add"===e&&void 0===this.state.domains[r]?this.setNetworkClientIdForDomain(r,this.messagingSystem.call("NetworkController:getState").selectedNetworkClientId):"remove"===e&&void 0!==this.state.domains[r]&&w(this,l,u).call(this,r)}}))})),this.messagingSystem.subscribe("NetworkController:stateChange",(({selectedNetworkClientId:e},t)=>{t.forEach((({op:t,path:r})=>{if("remove"===t&&"networkConfigurations"===r[0]){const t=r[1];Object.entries(this.state.domains).forEach((([r,n])=>{n===t&&this.setNetworkClientIdForDomain(r,e)}))}}))})),c((({useRequestQueue:e})=>{g(this,s)!==e&&(e?w(this,f,p).call(this):Object.keys(this.state.domains).forEach((e=>{w(this,l,u).call(this,e)})),v(this,s,e))}))}setNetworkClientIdForDomain(e,t){if(g(this,s)){if(e===E)throw new Error(`NetworkClientId for domain "${E}" cannot be set on the SelectedNetworkController`);if(!S.some((t=>e.startsWith(t)))){if(!w(this,d,h).call(this,e))throw new Error("NetworkClientId for domain cannot be called with a domain that has not yet been granted permissions");w(this,o,c).call(this,e,t)}}}getNetworkClientIdForDomain(e){const{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");return g(this,s)?this.state.domains[e]??t:t}getProviderAndBlockTracker(e){if(e===E||S.some((t=>e.startsWith(t)))){const e=this.messagingSystem.call("NetworkController:getSelectedNetworkClient");if(void 0===e)throw new Error("Selected network not initialized");return e}let t=g(this,n).get(e);if(void 0===t){let r;if(g(this,s)&&w(this,d,h).call(this,e)){const t=this.getNetworkClientIdForDomain(e);r=this.messagingSystem.call("NetworkController:getNetworkClientById",t)}else if(r=this.messagingSystem.call("NetworkController:getSelectedNetworkClient"),void 0===r)throw new Error("Selected network not initialized");t={provider:b.createEventEmitterProxy.call(void 0,r.provider),blockTracker:b.createEventEmitterProxy.call(void 0,r.blockTracker,{eventFilter:"skipInternal"})},g(this,n).set(e,t)}return t}};n=new WeakMap,s=new WeakMap,i=new WeakSet,a=function(){this.messagingSystem.registerActionHandler(C.getNetworkClientIdForDomain,this.getNetworkClientIdForDomain.bind(this)),this.messagingSystem.registerActionHandler(C.setNetworkClientIdForDomain,this.setNetworkClientIdForDomain.bind(this))},o=new WeakSet,c=function(e,t){const r=this.messagingSystem.call("NetworkController:getNetworkClientById",t),n=this.getProviderAndBlockTracker(e);n.provider.setTarget(r.provider),n.blockTracker.setTarget(r.blockTracker),this.update((r=>{r.domains[e]=t}))},l=new WeakSet,u=function(e){const t=this.messagingSystem.call("NetworkController:getSelectedNetworkClient"),r=g(this,n).get(e);r&&t?(r.provider.setTarget(t.provider),r.blockTracker.setTarget(t.blockTracker)):r&&g(this,n).delete(e),this.update((t=>{delete t.domains[e]}))},d=new WeakSet,h=function(e){return this.messagingSystem.call("PermissionController:hasPermissions",e)},f=new WeakSet,p=function(){g(this,n).forEach(((e,t)=>{const{selectedNetworkClientId:r}=this.messagingSystem.call("NetworkController:getState");w(this,d,h).call(this,t)&&w(this,o,c).call(this,t,r)}))},r.controllerName=k,r.METAMASK_DOMAIN=E,r.SelectedNetworkControllerActionTypes=C,r.SelectedNetworkControllerEventTypes=M,r.SelectedNetworkController=j}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/chunk-MQYWK4KP.js"}],[2028,{"./chunk-4FNZCOPF.js":2026,"./chunk-MQYWK4KP.js":2027},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-4FNZCOPF.js"),s=e("./chunk-MQYWK4KP.js");r.METAMASK_DOMAIN=s.METAMASK_DOMAIN,r.SelectedNetworkController=s.SelectedNetworkController,r.SelectedNetworkControllerActionTypes=s.SelectedNetworkControllerActionTypes,r.SelectedNetworkControllerEventTypes=s.SelectedNetworkControllerEventTypes,r.createSelectedNetworkMiddleware=n.createSelectedNetworkMiddleware}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/index.js"}],[2029,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},s=n;r.BaseControllerV1=n,r.BaseControllerV1_default=s}}},{package:"@metamask/selected-network-controller>@metamask/base-controller",file:"node_modules/@metamask/selected-network-controller/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[203,{"@metamask/utils":2717,lodash:4294,loglevel:4300,uuid:4873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=c,t.data=function(e){if(!(0,i.hasProperty)(e,"PreferencesController"))return o.default.warn("state.PreferencesController is undefined"),e;if(!(0,i.isObject)(e.PreferencesController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PreferencesController is "+typeof e.PreferencesController)),e}if(!(0,i.hasProperty)(e,"NetworkController")||!(0,i.isObject)(e.NetworkController)){var n,s;return null===(n=global.sentry)||void 0===n||null===(s=n.captureException)||void 0===s||s.call(n,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}if(!(0,i.hasProperty)(e.PreferencesController,"frequentRpcListDetail")||!Array.isArray(e.PreferencesController.frequentRpcListDetail)){var c,l;if(!(e.NetworkController.networkConfigurations&&e.PreferencesController.frequentRpcListDetail===undefined))null===(c=global.sentry)||void 0===c||null===(l=c.captureException)||void 0===l||l.call(c,new Error("typeof state.PreferencesController.frequentRpcListDetail is "+typeof e.PreferencesController.frequentRpcListDetail));return e}if(!e.PreferencesController.frequentRpcListDetail.every(i.isObject)){var u,d;const t=e.PreferencesController.frequentRpcListDetail.find((e=>!(0,i.isObject)(e)));return null===(u=global.sentry)||void 0===u||null===(d=u.captureException)||void 0===d||d.call(u,new Error("state.PreferencesController.frequentRpcListDetail contains an element of type "+typeof t)),e}const{PreferencesController:h,NetworkController:f}=e,{frequentRpcListDetail:p}=h;if(!Array.isArray(p))return e;const m=p.reduce(((e,{rpcUrl:t,chainId:r,ticker:n,nickname:s,rpcPrefs:i})=>({...e,[(0,a.v4)()]:{rpcUrl:t,chainId:r,ticker:n,rpcPrefs:i,nickname:s}})),{});return delete h.frequentRpcListDetail,{...e,NetworkController:{...f,networkConfigurations:m},PreferencesController:{...h}}}(t.data),t},r.version=void 0;var n,s=e("lodash"),i=e("@metamask/utils"),a=e("uuid"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n};const c=r.version=82}}},{package:"$root$",file:"app/scripts/migrations/082.ts"}],[2030,{"./chunk-UJFCPTF3.js":2032,"./chunk-Z4BLTVTB.js":2033},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,a).get(e),s=n(...t);s!==r&&(c.__privateGet.call(void 0,this,a).set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,s).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,s).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,s).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,s).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/selected-network-controller>@metamask/base-controller",file:"node_modules/@metamask/selected-network-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[2031,{"./chunk-Z4BLTVTB.js":2033,immer:4098},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){s.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,s.__privateSet.call(void 0,this,n,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return s.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=i.produceWithPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);return s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/selected-network-controller>@metamask/base-controller",file:"node_modules/@metamask/selected-network-controller/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[2032,{"./chunk-Z4BLTVTB.js":2033},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=f.__privateGet.call(void 0,this,a);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},l=new WeakSet,u=function(e){const t=f.__privateGet.call(void 0,this,i);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,s)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){f.__privateAdd.call(void 0,this,o),f.__privateAdd.call(void 0,this,l),f.__privateAdd.call(void 0,this,d),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,s,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,a,void 0),f.__privateSet.call(void 0,this,n,e),f.__privateSet.call(void 0,this,s,t),f.__privateSet.call(void 0,this,i,r),f.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,l,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,n).subscribe(e,t,r):f.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/selected-network-controller>@metamask/base-controller",file:"node_modules/@metamask/selected-network-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[2033,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/selected-network-controller>@metamask/base-controller",file:"node_modules/@metamask/selected-network-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[2034,{"./chunk-FTHCJ6HY.js":2029,"./chunk-G42723LG.js":2030,"./chunk-IURK6TKD.js":2031,"./chunk-UJFCPTF3.js":2032,"./chunk-Z4BLTVTB.js":2033},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-FTHCJ6HY.js"),s=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=s.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=s.getAnonymizedState,r.getPersistentState=s.getPersistentState}}},{package:"@metamask/selected-network-controller>@metamask/base-controller",file:"node_modules/@metamask/selected-network-controller/node_modules/@metamask/base-controller/dist/index.js"}],[2035,{"@metamask/base-controller":2042,"@metamask/controller-utils":1231,"@metamask/logging-controller":1681,"@metamask/message-manager":2048,events:3786,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f,p,m,g,y,v,w,_,b,k,T,S,E,C,M,j,P,I,A,O,x,N,R,B,L,D,$,U,F,H,V,G,W,q,K,z,J=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Z=(e,t,r)=>(J(e,t,"read from private field"),r?r.call(e):t.get(e)),Y=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},X=(e,t,r,n)=>(J(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Q=(e,t,r)=>(J(e,t,"access private method"),r),ee=e("@metamask/base-controller"),te=e("@metamask/controller-utils"),re=e("@metamask/logging-controller"),ne=e("@metamask/message-manager"),se=e("events"),ie=(n=se)&&n.__esModule?n:{default:n},ae=e("lodash"),oe={unapprovedPersonalMsgs:{persist:!1,anonymous:!1},unapprovedTypedMessages:{persist:!1,anonymous:!1},unapprovedPersonalMsgCount:{persist:!1,anonymous:!1},unapprovedTypedMessagesCount:{persist:!1,anonymous:!1}},ce=class extends ee.BaseController{constructor({messenger:e,getAllState:t,securityProviderRequest:r,getCurrentChainId:n}){super({name:"SignatureController",metadata:oe,messenger:e,state:{unapprovedPersonalMsgs:{},unapprovedTypedMessages:{},unapprovedPersonalMsgCount:0,unapprovedTypedMessagesCount:0}}),Y(this,o),Y(this,l),Y(this,d),Y(this,f),Y(this,m),Y(this,y),Y(this,w),Y(this,b),Y(this,T),Y(this,E),Y(this,M),Y(this,P),Y(this,A),Y(this,x),Y(this,R),Y(this,L),Y(this,$),Y(this,F),Y(this,V),Y(this,W),Y(this,K),Y(this,s,void 0),Y(this,i,void 0),Y(this,a,void 0),X(this,s,t),this.hub=new(0,ie.default),X(this,i,new(0,ne.PersonalMessageManager)(void 0,void 0,r)),X(this,a,new(0,ne.TypedMessageManager)(void 0,void 0,r,void 0,n)),Q(this,A,O).call(this,Z(this,i),"unapprovedPersonalMessage"),Q(this,A,O).call(this,Z(this,a),"unapprovedTypedMessage"),Q(this,x,N).call(this,Z(this,i),((e,t,r)=>{e.unapprovedPersonalMsgs=t,e.unapprovedPersonalMsgCount=r})),Q(this,x,N).call(this,Z(this,a),((e,t,r)=>{e.unapprovedTypedMessages=t,e.unapprovedTypedMessagesCount=r}))}get unapprovedPersonalMessagesCount(){return Z(this,i).getUnapprovedMessagesCount()}get unapprovedTypedMessagesCount(){return Z(this,a).getUnapprovedMessagesCount()}get messages(){return[...Z(this,a).getAllMessages(),...Z(this,i).getAllMessages()].reduce(((e,t)=>(e[t.id]=t,e)),{})}resetState(){this.update((()=>({unapprovedPersonalMsgs:{},unapprovedTypedMessages:{},unapprovedPersonalMsgCount:0,unapprovedTypedMessagesCount:0})))}rejectUnapproved(e){Q(this,b,k).call(this,Z(this,i),e),Q(this,b,k).call(this,Z(this,a),e)}clearUnapproved(){Q(this,T,S).call(this,Z(this,i)),Q(this,T,S).call(this,Z(this,a))}async newUnsignedPersonalMessage(e,t){return Q(this,o,c).call(this,Z(this,i),te.ApprovalType.PersonalSign,re.SigningMethod.PersonalSign,"Personal Message",Q(this,l,u).bind(this),e,t)}async newUnsignedTypedMessage(e,t,r,n){const s=Q(this,K,z).call(this,r);return Q(this,o,c).call(this,Z(this,a),te.ApprovalType.EthSignTypedData,s,"Typed Message",Q(this,d,h).bind(this),e,t,r,n)}setDeferredSignSuccess(e,t){Q(this,f,p).call(this,Q(this,m,g),e,t)}setMessageMetadata(e,t){Q(this,f,p).call(this,Q(this,y,v),e,t)}setDeferredSignError(e){Q(this,f,p).call(this,Q(this,w,_),e)}setTypedMessageInProgress(e){Z(this,a).setMessageStatusInProgress(e)}setPersonalMessageInProgress(e){Z(this,i).setMessageStatusInProgress(e)}};s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=async function(e,t,r,n,s,i,a,o,c){let l;try{const u=await e.addUnapprovedMessage(i,a,o),d={...i,metamaskId:u,...o&&{version:o}},h=e.waitForFinishStatus(d,n);try{Q(this,W,q).call(this,r,re.SigningStage.Proposed,d);l=(await Q(this,F,H).call(this,d,t)).resultCallbacks}catch(t){throw Q(this,W,q).call(this,r,re.SigningStage.Rejected,d),Q(this,P,I).call(this,e,u),t}await s(d,c);const f=await h;return Q(this,W,q).call(this,r,re.SigningStage.Signed,d),l?.success(f),f}catch(e){throw l?.error(e),e}},l=new WeakSet,u=async function(e){return await Q(this,E,C).call(this,Z(this,i),te.ApprovalType.PersonalSign,e,(async e=>await this.messagingSystem.call("KeyringController:signPersonalMessage",e)))},d=new WeakSet,h=async function(e,t={parseJsonData:!0}){const{version:r}=e;return await Q(this,E,C).call(this,Z(this,a),te.ApprovalType.EthSignTypedData,e,(async e=>{const n=t.parseJsonData?Q(this,V,G).call(this,e,r):e;return await this.messagingSystem.call("KeyringController:signTypedMessage",n,r)}))},f=new WeakSet,p=function(e,...t){const r=[Z(this,i),Z(this,a)];for(const n of r)if(e(n,...t))return!0;throw new Error("Message not found")},m=new WeakSet,g=function(e,t,r){try{return e.setMessageStatusSigned(t,r),!0}catch(e){return!1}},y=new WeakSet,v=function(e,t,r){try{return e.setMetadata(t,r),!0}catch(e){return!1}},w=new WeakSet,_=function(e,t){try{return e.rejectMessage(t),!0}catch(e){return!1}},b=new WeakSet,k=function(e,t){Object.keys(e.getUnapprovedMessages()).forEach((r=>{Q(this,P,I).call(this,e,r,t)}))},T=new WeakSet,S=function(e){e.update({unapprovedMessages:{},unapprovedMessagesCount:0})},E=new WeakSet,C=async function(e,t,r,n){console.info(`MetaMaskController - ${t}`);const s=r.metamaskId;try{const i=await e.approveMessage(r);try{const r=await n(i);return this.hub.emit(`${t}:signed`,{signature:r,messageId:s}),i.deferSetAsSigned||e.setMessageStatusSigned(s,r),r}catch(e){throw this.hub.emit(`${s}:signError`,{error:e}),e}}catch(r){throw console.info(`MetaMaskController - ${t} failed.`,r),Q(this,M,j).call(this,e,s,r.message),r}},M=new WeakSet,j=function(e,t,r){e instanceof ne.TypedMessageManager?e.setMessageStatusErrored(t,r):Q(this,P,I).call(this,e,t)},P=new WeakSet,I=function(e,t,r){if(r){const e=Q(this,$,U).call(this,t);this.hub.emit("cancelWithReason",{message:e,reason:r})}e.rejectMessage(t)},A=new WeakSet,O=function(e,t){e.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),e.hub.on("unapprovedMessage",(e=>{this.hub.emit(t,e)}))},x=new WeakSet,N=function(e,t){e.subscribe((e=>{const r=Q(this,R,B).call(this,e.unapprovedMessages);this.update((()=>{const n={...this.state};return t(n,r,e.unapprovedMessagesCount),n}))}))},R=new WeakSet,B=function(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=Q(this,L,D).call(this,n);t[r]=s}return t},L=new WeakSet,D=function(e){const{messageParams:t,...r}=e;return{...r,msgParams:t}},$=new WeakSet,U=function(e){return{...this.state.unapprovedPersonalMsgs,...this.state.unapprovedTypedMessages}[e]},F=new WeakSet,H=async function(e,t){const r=e.metamaskId,n=e.origin||te.ORIGIN_METAMASK,s=ae.cloneDeep.call(void 0,e);return await this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:n,type:t,requestData:s,expectsResult:!0},!0)},V=new WeakSet,G=function(e,t){return"V1"===t||"string"!=typeof e.data?e:{...e,data:JSON.parse(e.data)}},W=new WeakSet,q=function(e,t,r){this.messagingSystem.call("LoggingController:add",{type:re.LogType.EthSignLog,data:{signingMethod:e,stage:t,signingData:r}})},K=new WeakSet,z=function(e){let t=re.SigningMethod.EthSignTypedData;return"V3"===e?t=re.SigningMethod.EthSignTypedDataV3:"V4"===e&&(t=re.SigningMethod.EthSignTypedDataV4),t},r.SignatureController=ce}}},{package:"@metamask/signature-controller",file:"node_modules/@metamask/signature-controller/dist/chunk-XG24TXHN.js"}],[2036,{"./chunk-XG24TXHN.js":2035},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-XG24TXHN.js");r.SignatureController=n.SignatureController}}},{package:"@metamask/signature-controller",file:"node_modules/@metamask/signature-controller/dist/index.js"}],[2037,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},s=n;r.BaseControllerV1=n,r.BaseControllerV1_default=s}}},{package:"@metamask/signature-controller>@metamask/base-controller",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[2038,{"./chunk-UJFCPTF3.js":2040,"./chunk-Z4BLTVTB.js":2041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=c.__privateGet.call(void 0,this,a).get(e),s=n(...t);s!==r&&(c.__privateGet.call(void 0,this,a).set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=c.__privateGet.call(void 0,this,s).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,s).set(e,n)),n.set(t,r),r){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=r(...n());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,s).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,s).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/signature-controller>@metamask/base-controller",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[2039,{"./chunk-Z4BLTVTB.js":2041,immer:4098},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){s.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,s.__privateSet.call(void 0,this,n,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return s.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=i.produceWithPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);return s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,s.__privateGet.call(void 0,this,n),e);s.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/signature-controller>@metamask/base-controller",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[204,{"@metamask/utils":2717,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,s.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}const{NetworkController:n}=e;if(!(0,s.isObject)(n.networkConfigurations)){var i,a;return null===(i=global.sentry)||void 0===i||null===(a=i.captureException)||void 0===a||a.call(i,new Error("typeof NetworkController.networkConfigurations is "+typeof n.networkConfigurations)),e}const{networkConfigurations:o}=n,c={};for(const t of Object.keys(o)){const r=o[t];if(!(0,s.isObject)(r))return e;c[t]={...r,id:t}}return{...e,NetworkController:{...n,networkConfigurations:c}}}(t.data),t},r.version=void 0;var n=e("lodash"),s=e("@metamask/utils");const i=r.version=83}}},{package:"$root$",file:"app/scripts/migrations/083.ts"}],[2040,{"./chunk-Z4BLTVTB.js":2041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,s,i,a,o,c,l,u,d,h,f=e("./chunk-Z4BLTVTB.js");n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=f.__privateGet.call(void 0,this,a);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},l=new WeakSet,u=function(e){const t=f.__privateGet.call(void 0,this,i);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,s)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){f.__privateAdd.call(void 0,this,o),f.__privateAdd.call(void 0,this,l),f.__privateAdd.call(void 0,this,d),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,s,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,a,void 0),f.__privateSet.call(void 0,this,n,e),f.__privateSet.call(void 0,this,s,t),f.__privateSet.call(void 0,this,i,r),f.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,l,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,n).subscribe(e,t,r):f.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,s)}:'`);f.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/signature-controller>@metamask/base-controller",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[2041,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,s)=>(n(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/signature-controller>@metamask/base-controller",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[2042,{"./chunk-FTHCJ6HY.js":2037,"./chunk-G42723LG.js":2038,"./chunk-IURK6TKD.js":2039,"./chunk-UJFCPTF3.js":2040,"./chunk-Z4BLTVTB.js":2041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-FTHCJ6HY.js"),s=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=s.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=s.getAnonymizedState,r.getPersistentState=s.getPersistentState}}},{package:"@metamask/signature-controller>@metamask/base-controller",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/base-controller/dist/index.js"}],[2043,{"@metamask/base-controller":2054,events:3786,uuid:4873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractMessageManager=void 0;const n=e("@metamask/base-controller"),s=e("events"),i=e("uuid");class a extends n.BaseControllerV1{addRequestToMessageParams(e,t){const r={...e};return t&&(r.requestId=t.id,r.origin=t.origin),r}createUnapprovedMessage(e,t,r){return{id:(0,i.v1)(),messageParams:e,securityAlertResponse:r?.securityAlertResponse,status:"unapproved",time:Date.now(),type:t}}saveMessageList(e=!0){const t=this.getUnapprovedMessages(),r=this.getUnapprovedMessagesCount();this.update({unapprovedMessages:t,unapprovedMessagesCount:r}),e&&this.hub.emit("updateBadge")}setMessageStatus(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.status=t,this.updateMessage(r),this.hub.emit(`${e}:${t}`,r),("rejected"===t||"signed"===t||"errored"===t||this.additionalFinishStatuses.includes(t))&&this.hub.emit(`${e}:finished`,r)}updateMessage(e,t=!0){const r=this.messages.findIndex((t=>e.id===t.id));-1!==r&&(this.messages[r]=e),this.saveMessageList(t)}async securityCheck(e){if(this.securityProviderRequest){const t=await this.securityProviderRequest(e,e.type);return{...e,securityProviderResponse:t}}return e}constructor(e,t,r,n,i){super(e,t),this.hub=new s.EventEmitter,this.name="AbstractMessageManager",this.defaultState={unapprovedMessages:{},unapprovedMessagesCount:0},this.messages=[],this.securityProviderRequest=r,this.additionalFinishStatuses=n??[],this.getCurrentChainId=i,this.initialize()}getUnapprovedMessagesCount(){return Object.keys(this.getUnapprovedMessages()).length}getUnapprovedMessages(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}async addMessage(e){const t=await this.securityCheck(e);this.messages.push(t),this.saveMessageList()}getMessage(e){return this.messages.find((t=>t.id===e))}getAllMessages(){return this.messages}approveMessage(e){return this.setMessageStatusApproved(e.metamaskId),this.prepMessageForSigning(e)}setMessageStatusApproved(e){this.setMessageStatus(e,"approved")}setMessageStatusInProgress(e){this.setMessageStatus(e,"inProgress")}setMessageStatusSigned(e,t){this.setMessageStatusAndResult(e,t,"signed")}setMessageStatusAndResult(e,t,r){this.setResult(e,t),this.setMessageStatus(e,r)}setResult(e,t){const r=this.getMessage(e);r&&(r.rawSig=t,this.updateMessage(r,!1))}setMetadata(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.metadata=t,this.updateMessage(r,!1)}rejectMessage(e){this.setMessageStatus(e,"rejected")}async waitForFinishStatus(e,t){const{metamaskId:r,...n}=e;return new Promise(((e,s)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"signed":return e(r.rawSig);case"rejected":return s(new Error(`MetaMask ${t} Signature: User denied message signature.`));case"errored":return s(new Error(`MetaMask ${t} Signature: ${r.error}`));default:return s(new Error(`MetaMask ${t} Signature: Unknown problem: ${JSON.stringify(n)}`))}}))}))}}r.AbstractMessageManager=a,r.default=a}}},{package:"@metamask/signature-controller>@metamask/message-manager",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/dist/AbstractMessageManager.cjs"}],[2044,{"./AbstractMessageManager.cjs":2043,"./utils.cjs":2049,"@metamask/controller-utils":1231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DecryptMessageManager=void 0;const n=e("@metamask/controller-utils"),s=e("./AbstractMessageManager.cjs"),i=e("./utils.cjs");class a extends s.AbstractMessageManager{constructor(){super(...arguments),this.name="DecryptMessageManager"}async addUnapprovedMessageAsync(e,t){(0,i.validateDecryptedMessageData)(e);const r=await this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"decrypted":return t(r.rawSig);case"rejected":return n(new Error("MetaMask DecryptMessage: User denied message decryption."));case"errored":return n(new Error("MetaMask DecryptMessage: This message cannot be decrypted."));default:return n(new Error(`MetaMask DecryptMessage: Unknown problem: ${JSON.stringify(e)}`))}}))}))}async addUnapprovedMessage(e,t){const r=this.addRequestToMessageParams(e,t);e.data=(0,i.normalizeMessageData)(e.data);const s=this.createUnapprovedMessage(r,n.ApprovalType.EthDecrypt,t),a=s.id;return await this.addMessage(s),this.hub.emit("unapprovedMessage",{...r,metamaskId:a}),a}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}r.DecryptMessageManager=a}}},{package:"@metamask/signature-controller>@metamask/message-manager",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/dist/DecryptMessageManager.cjs"}],[2045,{"./AbstractMessageManager.cjs":2043,"./utils.cjs":2049,"@metamask/controller-utils":1231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EncryptionPublicKeyManager=void 0;const n=e("@metamask/controller-utils"),s=e("./AbstractMessageManager.cjs"),i=e("./utils.cjs");class a extends s.AbstractMessageManager{constructor(){super(...arguments),this.name="EncryptionPublicKeyManager"}async addUnapprovedMessageAsync(e,t){(0,i.validateEncryptionPublicKeyMessageData)(e);const r=await this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"received":return t(r.rawSig);case"rejected":return n(new Error("MetaMask EncryptionPublicKey: User denied message EncryptionPublicKey."));default:return n(new Error(`MetaMask EncryptionPublicKey: Unknown problem: ${JSON.stringify(e)}`))}}))}))}async addUnapprovedMessage(e,t){const r=this.addRequestToMessageParams(e,t),s=this.createUnapprovedMessage(r,n.ApprovalType.EthGetEncryptionPublicKey,t),i=s.id;return await this.addMessage(s),this.hub.emit("unapprovedMessage",{...r,metamaskId:i}),i}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve({from:e.data})}}r.EncryptionPublicKeyManager=a,r.default=a}}},{package:"@metamask/signature-controller>@metamask/message-manager",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/dist/EncryptionPublicKeyManager.cjs"}],[2046,{"./AbstractMessageManager.cjs":2043,"./utils.cjs":2049,"@metamask/controller-utils":1231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PersonalMessageManager=void 0;const n=e("@metamask/controller-utils"),s=e("./AbstractMessageManager.cjs"),i=e("./utils.cjs");class a extends s.AbstractMessageManager{constructor(){super(...arguments),this.name="PersonalMessageManager"}async addUnapprovedMessage(e,t){(0,i.validateSignMessageData)(e);const r=(0,n.detectSIWE)(e),s=this.addRequestToMessageParams(e,t);s.data=(0,i.normalizeMessageData)(e.data),s.siwe=r;const a=this.createUnapprovedMessage(s,n.ApprovalType.PersonalSign,t),o=a.id;return await this.addMessage(a),this.hub.emit("unapprovedMessage",{...s,metamaskId:o}),o}prepMessageForSigning(e){const{metamaskId:t,...r}=e;return Promise.resolve(r)}}r.PersonalMessageManager=a,r.default=a}}},{package:"@metamask/signature-controller>@metamask/message-manager",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/dist/PersonalMessageManager.cjs"}],[2047,{"./AbstractMessageManager.cjs":2043,"./utils.cjs":2049,"@metamask/controller-utils":1231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TypedMessageManager=void 0;const n=e("@metamask/controller-utils"),s=e("./AbstractMessageManager.cjs"),i=e("./utils.cjs");class a extends s.AbstractMessageManager{constructor(){super(...arguments),this.name="TypedMessageManager"}async addUnapprovedMessage(e,t,r){if("V1"===r&&(0,i.validateTypedSignMessageDataV1)(e),"V3"===r||"V4"===r){const t=this.getCurrentChainId?.();(0,i.validateTypedSignMessageDataV3V4)(e,t)}"string"==typeof e.data||"V3"!==r&&"V4"!==r||(e.data=JSON.stringify(e.data));const s=this.addRequestToMessageParams(e,t),a=this.createUnapprovedMessage(s,n.ApprovalType.EthSignTypedData,t),o=a.id;return await this.addMessage(a),this.hub.emit("unapprovedMessage",{...e,metamaskId:o,version:r}),o}setMessageStatusErrored(e,t){const r=this.getMessage(e);r&&(r.error=t,this.updateMessage(r),this.setMessageStatus(e,"errored"))}prepMessageForSigning(e){const{metamaskId:t,version:r,...n}=e;return Promise.resolve(n)}}r.TypedMessageManager=a,r.default=a}}},{package:"@metamask/signature-controller>@metamask/message-manager",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/dist/TypedMessageManager.cjs"}],[2048,{"./AbstractMessageManager.cjs":2043,"./DecryptMessageManager.cjs":2044,"./EncryptionPublicKeyManager.cjs":2045,"./PersonalMessageManager.cjs":2046,"./TypedMessageManager.cjs":2047},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./AbstractMessageManager.cjs"),r),s(e("./PersonalMessageManager.cjs"),r),s(e("./TypedMessageManager.cjs"),r),s(e("./EncryptionPublicKeyManager.cjs"),r),s(e("./DecryptMessageManager.cjs"),r)}}},{package:"@metamask/signature-controller>@metamask/message-manager",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/dist/index.cjs"}],[2049,{"@metamask/controller-utils":1231,"@metamask/eth-sig-util":1397,"@metamask/utils":2065,buffer:3497,jsonschema:4147},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.validateDecryptedMessageData=r.validateEncryptionPublicKeyMessageData=r.validateTypedSignMessageDataV3V4=r.validateTypedSignMessageDataV1=r.validateSignMessageData=r.normalizeMessageData=void 0;const n=e("@metamask/controller-utils"),s=e("@metamask/eth-sig-util"),i=e("@metamask/utils"),a=e("jsonschema"),o=/^[0-9A-Fa-f]+$/gu;function c(e,t){if(!e||"string"!=typeof e||!(0,n.isValidHexAddress)(e))throw new Error(`Invalid "${t}" address: ${e} must be a valid string.`)}r.normalizeMessageData=function(e){try{const t=(0,i.remove0x)(e);if(t.match(o))return(0,i.add0x)(t)}catch(e){}return(0,i.bytesToHex)(t.from(e,"utf8"))},r.validateSignMessageData=function(e){const{from:t,data:r}=e;if(c(t,"from"),!r||"string"!=typeof r)throw new Error(`Invalid message "data": ${r} must be a valid string.`)},r.validateTypedSignMessageDataV1=function(e){if(c(e.from,"from"),!e.data||!Array.isArray(e.data))throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);try{(0,s.typedSignatureHash)(e.data)}catch(e){throw new Error("Expected EIP712 typed data.")}},r.validateTypedSignMessageDataV3V4=function(e,t){if(c(e.from,"from"),!e.data||Array.isArray(e.data)||"object"!=typeof e.data&&"string"!=typeof e.data)throw new Error('Invalid message "data": Must be a valid string or object.');let r;if("object"==typeof e.data)r=e.data;else try{r=JSON.parse(e.data)}catch(e){throw new Error("Data must be passed as a valid JSON string.")}if((0,a.validate)(r,s.TYPED_MESSAGE_SCHEMA).errors.length>0)throw new Error("Data must conform to EIP-712 schema. See https://git.io/fNtcx.");if(!t)throw new Error("Current chainId cannot be null or undefined.");let{chainId:n}=r.domain;if(n){"string"==typeof n&&(n=parseInt(n,n.startsWith("0x")?16:10));const e=parseInt(t,16);if(Number.isNaN(e))throw new Error(`Cannot sign messages for chainId "${n}", because MetaMask is switching networks.`);if(n!==e)throw new Error(`Provided chainId "${n}" must match the active chainId "${e}"`)}},r.validateEncryptionPublicKeyMessageData=function(e){const{from:t}=e;c(t,"from")},r.validateDecryptedMessageData=function(e){const{from:t}=e;c(t,"from")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/signature-controller>@metamask/message-manager",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/dist/utils.cjs"}],[205,{"@metamask/utils":2717,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,s.hasProperty)(e,"NetworkController")||!(0,s.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}if(!(0,s.hasProperty)(e.NetworkController,"network")){var n,i;if(e.NetworkController.networkId===undefined)null===(n=global.sentry)||void 0===n||null===(i=n.captureException)||void 0===i||i.call(n,new Error("typeof state.NetworkController.network is "+typeof e.NetworkController.network));return e}const a={...e.NetworkController};"loading"===a.network?(a.networkId=null,a.networkStatus="unknown"):(a.networkId=a.network,a.networkStatus="available");return delete a.network,{...e,NetworkController:a}}(t.data),t},r.version=void 0;var n=e("lodash"),s=e("@metamask/utils");const i=r.version=84}}},{package:"$root$",file:"app/scripts/migrations/084.ts"}],[2050,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseControllerV1=r.isBaseControllerV1=void 0,r.isBaseControllerV1=function(e){return"name"in e&&"string"==typeof e.name&&"config"in e&&"object"==typeof e.config&&"defaultConfig"in e&&"object"==typeof e.defaultConfig&&"state"in e&&"object"==typeof e.state&&"defaultState"in e&&"object"==typeof e.defaultState&&"disabled"in e&&"boolean"==typeof e.disabled&&"subscribe"in e&&"function"==typeof e.subscribe};class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];t!==undefined&&(this[e]=t)}}else for(const t of Object.keys(e))if(this.internalConfig[t]!==undefined){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseControllerV1=n,r.default=n}}},{package:"@metamask/signature-controller>@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/BaseControllerV1.cjs"}],[2051,{immer:4098},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=r.isBaseController=void 0;const a=e("immer");(0,a.enablePatches)(),r.isBaseController=function(e){return"name"in e&&"string"==typeof e.name&&"state"in e&&"object"==typeof e.state&&"metadata"in e&&"object"==typeof e.metadata};function o(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${String(s)}'`);const a=i[r],o=e[s];return"function"==typeof a?n[s]=a(o):a&&(n[s]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:i}){n.set(this,void 0),this.messagingSystem=e,this.name=r,s(this,n,(0,a.freeze)(i,!0),"f"),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return i(this,n,"f")}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,o]=a.produceWithPatches(i(this,n,"f"),e);return s(this,n,t,"f"),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:o}}applyPatches(e){const t=(0,a.applyPatches)(i(this,n,"f"),e);s(this,n,t,"f"),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},n=new WeakMap,r.getAnonymizedState=function(e,t){return o(e,t,"anonymous")},r.getPersistentState=function(e,t){return o(e,t,"persist")}}}},{package:"@metamask/signature-controller>@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/BaseControllerV2.cjs"}],[2052,{"./RestrictedControllerMessenger.cjs":2053},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=void 0;const c=e("./RestrictedControllerMessenger.cjs");r.ControllerMessenger=class{constructor(){n.set(this,new Map),s.set(this,new Map),i.set(this,new Map),a.set(this,new Map)}registerActionHandler(e,t){if(o(this,n,"f").has(e))throw new Error(`A handler for ${e} has already been registered`);o(this,n,"f").set(e,t)}unregisterActionHandler(e){o(this,n,"f").delete(e)}clearActions(){o(this,n,"f").clear()}call(e,...t){const r=o(this,n,"f").get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){o(this,i,"f").set(e,t)}publish(e,...t){const r=o(this,s,"f").get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=o(this,a,"f").get(e),s=n(...t);s!==r&&(o(this,a,"f").set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=o(this,s,"f").get(e);if(n||(n=new Map,o(this,s,"f").set(e,n)),n.set(t,r),r){const n=o(this,i,"f").get(e);if(n){const e=r(...n());o(this,a,"f").set(t,e)}}}unsubscribe(e,t){const r=o(this,s,"f").get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&o(this,a,"f").delete(t),r.delete(t)}clearEventSubscriptions(e){o(this,s,"f").delete(e)}clearSubscriptions(){o(this,s,"f").clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new c.RestrictedControllerMessenger({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}},n=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap}}},{package:"@metamask/signature-controller>@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/ControllerMessenger.cjs"}],[2053,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,l,u,d=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},h=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.RestrictedControllerMessenger=void 0;r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){n.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),d(this,s,e,"f"),d(this,i,t,"f"),d(this,a,r,"f"),d(this,o,c,"f")}registerActionHandler(e,t){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").registerActionHandler(e,t)}unregisterActionHandler(e){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").unregisterActionHandler(e)}call(e,...t){if(!h(this,n,"m",l).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return h(this,s,"f").call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").publish(e,...t)}subscribe(e,t,r){if(!h(this,n,"m",c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?h(this,s,"f").subscribe(e,t,r):h(this,s,"f").subscribe(e,t)}unsubscribe(e,t){if(!h(this,n,"m",c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);h(this,s,"f").unsubscribe(e,t)}clearEventSubscriptions(e){if(!h(this,n,"m",u).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${h(this,i,"f")}:'`);h(this,s,"f").clearEventSubscriptions(e)}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,n=new WeakSet,c=function(e){const t=h(this,o,"f");return h(this,n,"m",u).call(this,e)||null!==t&&t.includes(e)},l=function(e){const t=h(this,a,"f");return h(this,n,"m",u).call(this,e)||null!==t&&t.includes(e)},u=function(e){return e.startsWith(`${h(this,i,"f")}:`)}}}},{package:"@metamask/signature-controller>@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/RestrictedControllerMessenger.cjs"}],[2054,{"./BaseControllerV1.cjs":2050,"./BaseControllerV2.cjs":2051,"./ControllerMessenger.cjs":2052,"./RestrictedControllerMessenger.cjs":2053},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RestrictedControllerMessenger=r.ControllerMessenger=r.isBaseController=r.getPersistentState=r.getAnonymizedState=r.BaseController=r.isBaseControllerV1=r.BaseControllerV1=void 0;var n=e("./BaseControllerV1.cjs");Object.defineProperty(r,"BaseControllerV1",{enumerable:!0,get:function(){return n.BaseControllerV1}}),Object.defineProperty(r,"isBaseControllerV1",{enumerable:!0,get:function(){return n.isBaseControllerV1}});var s=e("./BaseControllerV2.cjs");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return s.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return s.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return s.getPersistentState}}),Object.defineProperty(r,"isBaseController",{enumerable:!0,get:function(){return s.isBaseController}});var i=e("./ControllerMessenger.cjs");Object.defineProperty(r,"ControllerMessenger",{enumerable:!0,get:function(){return i.ControllerMessenger}});var a=e("./RestrictedControllerMessenger.cjs");Object.defineProperty(r,"RestrictedControllerMessenger",{enumerable:!0,get:function(){return a.RestrictedControllerMessenger}})}}},{package:"@metamask/signature-controller>@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/index.cjs"}],[2055,{"./errors.cjs":2063,"@metamask/superstruct":2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/assert.cjs"}],[2056,{"./assert.cjs":2055,"@metamask/superstruct":2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,n.pattern)(e,o)}}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/base64.cjs"}],[2057,{"./assert.cjs":2055,"./hex.cjs":2064,"@scure/base":2775,buffer:3497},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const l=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(u(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=l(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function f(e){d(e);const t=h(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),i=t-(t<o?a:c),l=s-(s<o?a:c);n[e]=16*i+l}return n}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function y(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function v(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):y(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=u,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=f,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=f(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),n.base64.encode(e)},r.hexToBytes=p,r.bigIntToBytes=m,r.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},r.valueToBytes=v,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=v(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/bytes.cjs"}],[2058,{"@metamask/superstruct":2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function s(e){return(0,n.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155",e.Wallet="wallet"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,n.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=s,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,n.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,n.is)(e,r.CaipAccountAddressStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2059,{"./base64.cjs":2056,"@metamask/superstruct":2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),s=e("./base64.cjs");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/checksum.cjs"}],[206,{"@metamask/utils":2717,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,s.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}return delete e.NetworkController.previousProviderStore,e}(t.data),t},r.version=void 0;var n=e("lodash"),s=e("@metamask/utils");const i=r.version=85}}},{package:"$root$",file:"app/scripts/migrations/085.ts"}],[2060,{"./assert.cjs":2055,"./bytes.cjs":2057,"./hex.cjs":2064,"@metamask/superstruct":2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),a.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),o,Number),l=(0,n.coerce)((0,n.bigint)(),o,BigInt),u=((0,n.union)([a.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(a.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/coercers.cjs"}],[2061,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class o{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=o;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/collections.cjs"}],[2062,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2063,{"./misc.cjs":2069,"pony-cause":4431},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const n=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=a,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,s.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/errors.cjs"}],[2064,{"./assert.cjs":2055,"./bytes.cjs":2057,"@metamask/superstruct":2599,"@noble/hashes/sha3":2757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,n.is)(e,r.HexStruct)}function c(e){return(0,n.is)(e,r.StrictHexStruct)}function l(e){(0,i.assert)((0,n.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=o[t];return(0,i.assert)((0,n.is)(r,(0,n.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function u(e){return!!(0,n.is)(e,r.HexChecksumAddressStruct)&&l(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=o,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,n.is)(e,r.HexAddressStruct)||u(e)},r.getChecksumAddress=l,r.isValidChecksumAddress=u,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/hex.cjs"}],[2065,{"./assert.cjs":2055,"./base64.cjs":2056,"./bytes.cjs":2057,"./caip-types.cjs":2058,"./checksum.cjs":2059,"./coercers.cjs":2060,"./collections.cjs":2061,"./encryption-types.cjs":2062,"./errors.cjs":2063,"./hex.cjs":2064,"./json.cjs":2066,"./keyring.cjs":2067,"./logging.cjs":2068,"./misc.cjs":2069,"./number.cjs":2070,"./opaque.cjs":2071,"./promise.cjs":2072,"./time.cjs":2073,"./transaction-types.cjs":2074,"./versions.cjs":2075},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert.cjs"),r),s(e("./base64.cjs"),r),s(e("./bytes.cjs"),r),s(e("./caip-types.cjs"),r),s(e("./checksum.cjs"),r),s(e("./coercers.cjs"),r),s(e("./collections.cjs"),r),s(e("./encryption-types.cjs"),r),s(e("./errors.cjs"),r),s(e("./hex.cjs"),r),s(e("./json.cjs"),r),s(e("./keyring.cjs"),r),s(e("./logging.cjs"),r),s(e("./misc.cjs"),r),s(e("./number.cjs"),r),s(e("./opaque.cjs"),r),s(e("./promise.cjs"),r),s(e("./time.cjs"),r),s(e("./transaction-types.cjs"),r),s(e("./versions.cjs"),r)}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/index.cjs"}],[2066,{"./assert.cjs":2055,"./misc.cjs":2069,"@metamask/superstruct":2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const n=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function o(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}r.object=e=>(0,n.object)(e),r.exactOptional=o;function c(e){return(0,n.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,n.integer)(),message:(0,n.string)(),data:o(r.JsonStruct),stack:o((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:o(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/json.cjs"}],[2067,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/keyring.cjs"}],[2068,{debug:3642},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/logging.cjs"}],[2069,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/misc.cjs"}],[207,{"@metamask/utils":2717,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"provider")){const t=e.NetworkController;return t.providerConfig=t.provider,delete t.provider,{...e,NetworkController:t}}var t,r;if((0,n.isObject)(e.NetworkController)){if(!(0,n.hasProperty)(e.NetworkController,"provider")){var s,i;if(e.NetworkController.providerConfig===undefined)null===(s=global.sentry)||void 0===s||null===(i=s.captureException)||void 0===i||i.call(s,new Error("typeof state.NetworkController.provider is "+typeof e.NetworkController.provider))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),s=e("lodash");const i=r.version=86}}},{package:"$root$",file:"app/scripts/migrations/086.ts"}],[2070,{"./assert.cjs":2055,"./hex.cjs":2064},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert.cjs"),s=e("./hex.cjs");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/number.cjs"}],[2071,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/opaque.cjs"}],[2072,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}}}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/promise.cjs"}],[2073,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/time.cjs"}],[2074,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2075,{"./assert.cjs":2055,"@metamask/superstruct":2599,semver:4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,n.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,n.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,s.gt)(e,t)},r.gtRange=function(e,t){return(0,s.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/signature-controller>@metamask/utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/utils/dist/versions.cjs"}],[2077,{"./constants":2078,"./types":2080,"./utils":2081,"@ethersproject/bytes":488,"@metamask/controller-utils":1231,"@metamask/eth-query":1395,"@metamask/polling-controller":1915,"@metamask/transaction-controller":2182,"bignumber.js":2207,events:3786,"lodash/cloneDeep":4274},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,a,o,c,l,u,d,h,f=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_INTERVAL=void 0;const m=e("@ethersproject/bytes"),g=e("@metamask/controller-utils"),y=p(e("@metamask/eth-query")),v=e("@metamask/polling-controller"),w=e("@metamask/transaction-controller"),_=e("bignumber.js"),b=p(e("events")),k=p(e("lodash/cloneDeep")),T=e("./constants"),S=e("./types"),E=e("./utils");r.DEFAULT_INTERVAL=5e3;const C="`ethQuery` is not defined on SmartTransactionsController";class M extends v.StaticIntervalPollingControllerV1{constructor({onNetworkStateChange:e,getNonceLock:t,confirmExternalTransaction:s,getTransactions:i,trackMetaMetricsEvent:a,getNetworkClientById:o,getMetaMetricsProps:c},l,u){super(l,u),n.add(this),this.name="SmartTransactionsController",this.defaultConfig={interval:r.DEFAULT_INTERVAL,chainId:g.ChainId.mainnet,clientId:"default",supportedChainIds:[g.ChainId.mainnet,g.ChainId.sepolia]},this.defaultState={smartTransactionsState:{smartTransactions:{},userOptIn:undefined,userOptInV2:undefined,fees:{approvalTxFees:undefined,tradeTxFees:undefined},liveness:!0,livenessByChainId:{[g.ChainId.mainnet]:!0,[g.ChainId.sepolia]:!0},feesByChainId:{[g.ChainId.mainnet]:{approvalTxFees:undefined,tradeTxFees:undefined},[g.ChainId.sepolia]:{approvalTxFees:undefined,tradeTxFees:undefined}}}},this.initialize(),this.setIntervalLength(this.config.interval),this.getNonceLock=t,this.ethQuery=undefined,this.confirmExternalTransaction=s,this.getRegularTransactions=i,this.trackMetaMetricsEvent=a,this.getNetworkClientById=o,this.getMetaMetricsProps=c,this.initializeSmartTransactionsForChainId(),e((({selectedNetworkClientId:e})=>{const{configuration:{chainId:t},provider:r}=this.getNetworkClientById(e);this.configure({chainId:t}),this.ethQuery=new y.default(r),this.initializeSmartTransactionsForChainId(),this.checkPoll(this.state)})),this.subscribe((e=>this.checkPoll(e))),this.eventEmitter=new b.default}async fetch(e,t){const{clientId:r}=this.config,n=Object.assign(Object.assign({},t),{headers:Object.assign({"Content-Type":"application/json"},r&&{"X-Client-Id":r})});return(0,E.handleFetch)(e,n)}async _executePoll(e){const t=f(this,n,"m",l).call(this,{networkClientId:e});return this.config.supportedChainIds.includes(t)?this.updateSmartTransactions({networkClientId:e}):Promise.resolve()}checkPoll(e){const{smartTransactions:t}=e.smartTransactionsState,r=t[this.config.chainId],n=null==r?void 0:r.filter(E.isSmartTransactionPending);!this.timeoutHandle&&(null==n?void 0:n.length)>0?this.poll():this.timeoutHandle&&0===(null==n?void 0:n.length)&&this.stop()}initializeSmartTransactionsForChainId(){var e;if(this.config.supportedChainIds.includes(this.config.chainId)){const{smartTransactionsState:t}=this.state;this.update({smartTransactionsState:Object.assign(Object.assign({},t),{smartTransactions:Object.assign(Object.assign({},t.smartTransactions),{[this.config.chainId]:null!==(e=t.smartTransactions[this.config.chainId])&&void 0!==e?e:[]})})})}}async poll(e){const{chainId:t,supportedChainIds:r}=this.config;e&&this.configure({interval:e},!1,!1),this.timeoutHandle&&clearInterval(this.timeoutHandle),r.includes(t)&&(this.timeoutHandle=setInterval((()=>{(0,g.safelyExecute)((async()=>this.updateSmartTransactions()))}),this.config.interval),await(0,g.safelyExecute)((async()=>this.updateSmartTransactions())))}async stop(){this.timeoutHandle&&clearInterval(this.timeoutHandle),this.timeoutHandle=undefined}setOptInState(e){this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{userOptInV2:e})})}trackStxStatusChange(e,t){let r=(0,k.default)(e);r=Object.assign(Object.assign({},(0,k.default)(t)),r),r.status!==(null==t?void 0:t.status)&&this.trackMetaMetricsEvent({event:T.MetaMetricsEventName.StxStatusUpdated,category:T.MetaMetricsEventCategory.Transactions,properties:(0,E.getSmartTransactionMetricsProperties)(r),sensitiveProperties:(0,E.getSmartTransactionMetricsSensitiveProperties)(r)})}isNewSmartTransaction(e){const{chainId:t}=this.config,{smartTransactionsState:r}=this.state,{smartTransactions:n}=r,s=n[t],i=null==s?void 0:s.findIndex((t=>t.uuid===e));return-1===i||i===undefined}updateSmartTransaction(e,{networkClientId:t}={}){let{ethQuery:r,config:{chainId:s}}=this;if(t){const e=this.getNetworkClientById(t);s=e.configuration.chainId,r=new y.default(e.provider)}f(this,n,"m",a).call(this,e,{chainId:s,ethQuery:r})}async updateSmartTransactions({networkClientId:e}={}){const{smartTransactions:t}=this.state.smartTransactionsState,r=t[f(this,n,"m",l).call(this,{networkClientId:e})].filter(E.isSmartTransactionPending).map((e=>e.uuid));r.length>0&&this.fetchSmartTransactionsStatus(r,{networkClientId:e})}async fetchSmartTransactionsStatus(e,{networkClientId:t}={}){const r=new URLSearchParams({uuids:e.join(",")}),s=f(this,n,"m",l).call(this,{networkClientId:t}),i=f(this,n,"m",u).call(this,{networkClientId:t}),o=`${(0,E.getAPIRequestURL)(S.APIType.BATCH_STATUS,s)}?${r.toString()}`,c=await this.fetch(o);for(const[e,t]of Object.entries(c)){const r={statusMetadata:t,status:(0,E.calculateStatus)(t),cancellable:(0,E.isSmartTransactionCancellable)(t),uuid:e};await f(this,n,"m",a).call(this,r,{chainId:s,ethQuery:i})}return c}async addNonceToTransaction(e){const t=await this.getNonceLock(e.from),r=t.nextNonce;return t.releaseLock(),Object.assign(Object.assign({},e),{nonce:`0x${r.toString(16)}`})}clearFees(){const e={approvalTxFees:undefined,tradeTxFees:undefined};return this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{fees:e})}),e}async getFees(e,t,{networkClientId:r}={}){const s=f(this,n,"m",l).call(this,{networkClientId:r}),i=[];let a;if(t){const r=await this.addNonceToTransaction(t);i.push(r),a=Object.assign(Object.assign({},e),{nonce:(0,E.incrementNonceInHex)(r.nonce)})}else a=e.nonce?e:await this.addNonceToTransaction(e);i.push(a);const o=await this.fetch((0,E.getAPIRequestURL)(S.APIType.GET_FEES,s),{method:"POST",body:JSON.stringify({txs:i})});let c,u;return t?(c=null==o?void 0:o.txs[0],u=null==o?void 0:o.txs[1]):u=null==o?void 0:o.txs[0],this.update({smartTransactionsState:Object.assign(Object.assign(Object.assign({},this.state.smartTransactionsState),s===this.config.chainId&&{fees:{approvalTxFees:c,tradeTxFees:u}}),{feesByChainId:Object.assign(Object.assign({},this.state.smartTransactionsState.feesByChainId),{[s]:{approvalTxFees:c,tradeTxFees:u}})})}),{approvalTxFees:c,tradeTxFees:u}}async submitSignedTransactions({transactionMeta:e,txParams:t,signedTransactions:r,signedCanceledTransactions:s,networkClientId:i}){var o;const c=f(this,n,"m",l).call(this,{networkClientId:i}),d=f(this,n,"m",u).call(this,{networkClientId:i}),h=await this.fetch((0,E.getAPIRequestURL)(S.APIType.SUBMIT_TRANSACTIONS,c),{method:"POST",body:JSON.stringify({rawTxs:r,rawCancelTxs:s})}),p=Date.now();let y;try{const e=await(0,g.query)(d,"getBalance",[null==t?void 0:t.from]);y=new _.BigNumber(e).toString(16)}catch(e){console.error("provider error",e)}let v,w,b={};!t.nonce&&(w=await this.getNonceLock(null==t?void 0:t.from),v=(0,m.hexlify)(w.nextNonce),b=w.nonceDetails,t&&(null!==(o=t.nonce)&&void 0!==o||(t.nonce=v)));const k=Object.assign(Object.assign({},h),{txHash:(0,E.getTxHash)(r[0])});try{await f(this,n,"m",a).call(this,{chainId:c,nonceDetails:b,preTxBalance:y,status:S.SmartTransactionStatuses.PENDING,time:p,txParams:t,uuid:k.uuid,txHash:k.txHash,cancellable:!0,type:(null==e?void 0:e.type)||"swap"},{chainId:c,ethQuery:d})}finally{null==w||w.releaseLock()}return k}async cancelSmartTransaction(e,{networkClientId:t}={}){const r=f(this,n,"m",l).call(this,{networkClientId:t});await this.fetch((0,E.getAPIRequestURL)(S.APIType.CANCEL,r),{method:"POST",body:JSON.stringify({uuid:e})})}async fetchLiveness({networkClientId:e}={}){const t=f(this,n,"m",l).call(this,{networkClientId:e});let r=!1;try{const e=await this.fetch((0,E.getAPIRequestURL)(S.APIType.LIVENESS,t));r=Boolean(e.lastBlock)}catch(e){console.log('"fetchLiveness" API call failed')}return this.update({smartTransactionsState:Object.assign(Object.assign(Object.assign({},this.state.smartTransactionsState),t===this.config.chainId&&{liveness:r}),{livenessByChainId:Object.assign(Object.assign({},this.state.smartTransactionsState.livenessByChainId),{[t]:r})})}),r}async setStatusRefreshInterval(e){e!==this.config.interval&&this.configure({interval:e},!1,!1)}getTransactions({addressFrom:e,status:t}){return f(this,n,"m",d).call(this).filter((r=>{var n;return r.status===t&&(null===(n=r.txParams)||void 0===n?void 0:n.from)===e}))}getSmartTransactionByMinedTxHash(e){if(!e)return undefined;return f(this,n,"m",d).call(this).find((t=>{var r,n;return(null===(n=null===(r=t.statusMetadata)||void 0===r?void 0:r.minedHash)||void 0===n?void 0:n.toLowerCase())===e.toLowerCase()}))}wipeSmartTransactions({address:e,ignoreNetwork:t}){if(!e)return;const r=e.toLowerCase();if(t){const{smartTransactions:e}=this.state.smartTransactionsState;Object.keys(e).forEach((e=>{const t=e;f(this,n,"m",h).call(this,{chainId:t,addressLowerCase:r})}))}else f(this,n,"m",h).call(this,{chainId:this.config.chainId,addressLowerCase:r})}}r.default=M,n=new WeakSet,s=function(e,{chainId:t=this.config.chainId}){var r;const{smartTransactionsState:n}=this.state,{smartTransactions:s}=n,i=null!==(r=s[t])&&void 0!==r?r:[],a=null==i?void 0:i.findIndex((t=>t.uuid===e.uuid));-1!==a&&this.update({smartTransactionsState:Object.assign(Object.assign({},n),{smartTransactions:Object.assign(Object.assign({},n.smartTransactions),{[t]:n.smartTransactions[t].map(((t,r)=>r===a?Object.assign(Object.assign({},t),e):t))})})})},i=async function(e){const t=await this.getMetaMetricsProps();e.accountHardwareType=null==t?void 0:t.accountHardwareType,e.accountType=null==t?void 0:t.accountType,e.deviceModel=null==t?void 0:t.deviceModel},a=async function(e,{chainId:t=this.config.chainId,ethQuery:r=this.ethQuery}){var a;const{smartTransactionsState:o}=this.state,{smartTransactions:l}=o,u=null!==(a=l[t])&&void 0!==a?a:[],d=null==u?void 0:u.findIndex((t=>t.uuid===e.uuid)),h=this.isNewSmartTransaction(e.uuid);if(this.ethQuery===undefined)throw new Error(C);if(h&&await f(this,n,"m",i).call(this,e),this.trackStxStatusChange(e,h?undefined:u[d]),h){const r=null==u?void 0:u.findIndex((t=>{var r,n,s;return(null===(r=t.txParams)||void 0===r?void 0:r.nonce)===(null===(n=e.txParams)||void 0===n?void 0:n.nonce)&&(null===(s=t.status)||void 0===s?void 0:s.startsWith("cancelled"))})),n=[(0,k.default)(e)],s=Object.assign(Object.assign({},e),{history:n}),i=r>-1?u.slice(0,r).concat(u.slice(r+1)).concat(s):u.concat(s);this.update({smartTransactionsState:Object.assign(Object.assign({},o),{smartTransactions:Object.assign(Object.assign({},o.smartTransactions),{[t]:i})})})}else if(this.eventEmitter.emit(`${e.uuid}:smartTransaction`,e),e.status!==S.SmartTransactionStatuses.SUCCESS&&e.status!==S.SmartTransactionStatuses.REVERTED||e.confirmed)f(this,n,"m",s).call(this,e,{chainId:t});else{const s=u[d],i=Object.assign(Object.assign({},s),e);await f(this,n,"m",c).call(this,i,{chainId:t,ethQuery:r})}},o=function(e){if(!e)return!0;const t=this.getRegularTransactions(),r=null==t?void 0:t.find((t=>{var r;return(null===(r=t.hash)||void 0===r?void 0:r.toLowerCase())===e.toLowerCase()}));return!r||![w.TransactionStatus.confirmed,w.TransactionStatus.submitted].includes(r.status)},c=async function(e,{chainId:t=this.config.chainId,ethQuery:r=this.ethQuery}){var i;if(r===undefined)throw new Error(C);const a=null===(i=e.statusMetadata)||void 0===i?void 0:i.minedHash;try{const i=await(0,g.query)(r,"getTransactionReceipt",[a]),c=await(0,g.query)(r,"getTransactionByHash",[a]),l=null==c?void 0:c.maxFeePerGas,u=null==c?void 0:c.maxPriorityFeePerGas;if(null==i?void 0:i.blockNumber){const c=await(0,g.query)(r,"getBlockByNumber",[null==i?void 0:i.blockNumber,!1]),d=null==c?void 0:c.baseFeePerGas,h=Object.assign(Object.assign({},e.txParams),{maxFeePerGas:l,maxPriorityFeePerGas:u}),p=Object.assign(Object.assign({},e),{id:e.uuid,status:w.TransactionStatus.confirmed,hash:a,txParams:h}),m=(0,E.snapshotFromTxMeta)(p),y=(0,E.replayHistory)(p.history),v=(0,E.generateHistoryEntry)(y,m,"txStateManager: setting status to confirmed"),_=v.length>0?Object.assign(Object.assign({},p),{history:p.history.concat(v)}):p;f(this,n,"m",o).call(this,a)&&this.confirmExternalTransaction(_,i,d),this.trackMetaMetricsEvent({event:T.MetaMetricsEventName.StxConfirmed,category:T.MetaMetricsEventCategory.Transactions,properties:(0,E.getSmartTransactionMetricsProperties)(e),sensitiveProperties:(0,E.getSmartTransactionMetricsSensitiveProperties)(e)}),f(this,n,"m",s).call(this,Object.assign(Object.assign({},e),{confirmed:!0}),{chainId:t})}}catch(e){this.trackMetaMetricsEvent({event:T.MetaMetricsEventName.StxConfirmationFailed,category:T.MetaMetricsEventCategory.Transactions}),console.error("confirm error",e)}},l=function({networkClientId:e}={}){return e?this.getNetworkClientById(e).configuration.chainId:this.config.chainId},u=function({networkClientId:e}={}){if(e)return new y.default(this.getNetworkClientById(e).provider);if(this.ethQuery===undefined)throw new Error(C);return this.ethQuery},d=function(){const{smartTransactions:e}=this.state.smartTransactionsState,{chainId:t}=this.config,r=null==e?void 0:e[t];return r&&0!==r.length?r:[]},h=function({chainId:e,addressLowerCase:t}){const{smartTransactions:r}=this.state.smartTransactionsState,n=null==r?void 0:r[e];if(!n||0===n.length)return;const s=n.filter((e=>{var r;return(null===(r=e.txParams)||void 0===r?void 0:r.from)!==t}));this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{smartTransactions:Object.assign(Object.assign({},r),{[e]:s})})})}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/SmartTransactionsController.js"}],[2078,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MetaMetricsEventCategory=r.MetaMetricsEventName=r.API_BASE_URL=void 0,r.API_BASE_URL="https://transaction.api.cx.metamask.io",function(e){e.StxStatusUpdated="STX Status Updated",e.StxConfirmed="STX Confirmed",e.StxConfirmationFailed="STX Confirmation Failed"}(r.MetaMetricsEventName||(r.MetaMetricsEventName={})),function(e){e.Transactions="Transactions"}(r.MetaMetricsEventCategory||(r.MetaMetricsEventCategory={}))}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/constants.js"}],[2079,{"./SmartTransactionsController":2077},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const s=n(e("./SmartTransactionsController"));r.default=s.default}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/index.js"}],[208,{"@metamask/utils":2717,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,n.isObject)(e.TokensController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokensController is "+typeof e.TokensController)),e}return delete e.TokensController.suggestedAssets,e}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),s=e("lodash");const i=r.version=87}}},{package:"$root$",file:"app/scripts/migrations/087.ts"}],[2081,{"../package.json":2211,"./constants":2078,"./types":2080,"@ethereumjs/tx":2099,"@ethereumjs/util":2124,"@ethersproject/bytes":488,"bignumber.js":2207,buffer:3497,"fast-json-patch":3820,lodash:4294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.getSmartTransactionMetricsSensitiveProperties=r.getSmartTransactionMetricsProperties=r.getTxHash=r.incrementNonceInHex=r.isSmartTransactionCancellable=r.handleFetch=r.mapKeysToCamel=r.getStxProcessingTime=r.snapshotFromTxMeta=r.replayHistory=r.generateHistoryEntry=r.calculateStatus=r.getAPIRequestURL=r.isSmartTransactionStatusResolved=r.isSmartTransactionPending=void 0;const s=e("@ethereumjs/tx"),i=e("@ethereumjs/util"),a=e("@ethersproject/bytes"),o=e("bignumber.js"),c=n(e("fast-json-patch")),l=n(e("lodash")),u=e("./constants"),d=e("./types"),h=n(e("../package.json"));r.isSmartTransactionPending=function(e){return e.status===d.SmartTransactionStatuses.PENDING};r.isSmartTransactionStatusResolved=e=>"uuid_not_found"===e,r.getAPIRequestURL=function(e,t){const r=parseInt(t,16);switch(e){case d.APIType.GET_FEES:return`${u.API_BASE_URL}/networks/${r}/getFees`;case d.APIType.ESTIMATE_GAS:return`${u.API_BASE_URL}/networks/${r}/estimateGas`;case d.APIType.SUBMIT_TRANSACTIONS:return`${u.API_BASE_URL}/networks/${r}/submitTransactions?stxControllerVersion=${h.default.version}`;case d.APIType.CANCEL:return`${u.API_BASE_URL}/networks/${r}/cancel`;case d.APIType.BATCH_STATUS:return`${u.API_BASE_URL}/networks/${r}/batchStatus`;case d.APIType.LIVENESS:return`${u.API_BASE_URL}/networks/${r}/health`;default:throw new Error("Invalid APIType")}};r.calculateStatus=e=>{if((0,r.isSmartTransactionStatusResolved)(e))return d.SmartTransactionStatuses.RESOLVED;const t=[d.SmartTransactionCancellationReason.WOULD_REVERT,d.SmartTransactionCancellationReason.TOO_CHEAP,d.SmartTransactionCancellationReason.DEADLINE_MISSED,d.SmartTransactionCancellationReason.INVALID_NONCE,d.SmartTransactionCancellationReason.USER_CANCELLED,d.SmartTransactionCancellationReason.PREVIOUS_TX_CANCELLED];if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.NOT_MINED){if(e.cancellationReason===d.SmartTransactionCancellationReason.NOT_CANCELLED)return d.SmartTransactionStatuses.PENDING;const r=t.findIndex((t=>t===e.cancellationReason))>-1;if(e.cancellationReason&&r)return e.isSettled?d.cancellationReasonToStatusMap[e.cancellationReason]:d.SmartTransactionStatuses.PENDING}else{if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.SUCCESS)return d.SmartTransactionStatuses.SUCCESS;if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.CANCELLED)return d.SmartTransactionStatuses.CANCELLED;if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.REVERTED)return d.SmartTransactionStatuses.REVERTED;if((null==e?void 0:e.minedTx)===d.SmartTransactionMinedTx.UNKNOWN)return d.SmartTransactionStatuses.UNKNOWN}return d.SmartTransactionStatuses.UNKNOWN},r.generateHistoryEntry=function(e,t,r){const n=c.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n},r.replayHistory=function(e){return l.default.cloneDeep(e).reduce(((e,t)=>c.default.applyPatch(e,t).newDocument))},r.snapshotFromTxMeta=function(e){const t=Object.assign({},e);return delete t.history,l.default.cloneDeep(t)};r.getStxProcessingTime=e=>e?Math.round((Date.now()-e)/1e3):undefined;r.mapKeysToCamel=e=>{if(!l.default.isObject(e))return e;const t=l.default.mapValues(e,(e=>l.default.isArray(e)?e.map(r.mapKeysToCamel):l.default.isObject(e)?(0,r.mapKeysToCamel)(e):e));return l.default.mapKeys(t,((e,t)=>l.default.camelCase(t)))},r.handleFetch=async function(e,t){const n=await fetch(e,t),s=await n.json();if(!n.ok)throw console.log("response",n),new Error(`Fetch error:${JSON.stringify(Object.assign({status:n.status},(0,r.mapKeysToCamel)(s)))}`);return s};r.isSmartTransactionCancellable=e=>e.minedTx===d.SmartTransactionMinedTx.NOT_MINED&&(!e.cancellationReason||e.cancellationReason===d.SmartTransactionCancellationReason.NOT_CANCELLED);r.incrementNonceInHex=e=>{const t=new o.BigNumber(e,16).toString(10);return(0,a.hexlify)(Number(t)+1)};r.getTxHash=e=>{if(!e)return"";const r=s.TransactionFactory.fromSerializedData(t.from(e.slice(2),"hex")).hash();return(0,i.bytesToHex)(r)};r.getSmartTransactionMetricsProperties=e=>{if(!e)return{};const t=e.statusMetadata;return{stx_status:e.status,type:e.type,processing_time:(0,r.getStxProcessingTime)(e.time),is_smart_transaction:!0,stx_enabled:!0,current_stx_enabled:!0,stx_user_opt_in:!0,stx_duplicated:null==t?void 0:t.duplicated,stx_timed_out:null==t?void 0:t.timedOut,stx_proxied:null==t?void 0:t.proxied}};r.getSmartTransactionMetricsSensitiveProperties=e=>e?{token_from_symbol:e.sourceTokenSymbol,token_to_symbol:e.destinationTokenSymbol,account_hardware_type:e.accountHardwareType,account_type:e.accountType,device_model:e.deviceModel}:{}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/utils.js"}],[2082,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n,s,i,a){try{var o=e[i](a),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,s)}t.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(s,i){var a=e.apply(t,r);function o(e){n(a,s,i,o,c,"next",e)}function c(e){n(a,s,i,o,c,"throw",e)}o(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/helpers/asyncToGenerator.js"}],[2083,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/helpers/interopRequireDefault.js"}],[2084,{"./typeof.js":2085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./typeof.js").default;function s(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t.exports=s=function(){return r},t.exports.__esModule=!0,t.exports.default=t.exports;var e,r={},i=Object.prototype,a=i.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",d=c.toStringTag||"@@toStringTag";function h(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var s=t&&t.prototype instanceof _?t:_,i=Object.create(s.prototype),a=new x(n||[]);return o(i,"_invoke",{value:P(e,r,a)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var m="suspendedStart",g="suspendedYield",y="executing",v="completed",w={};function _(){}function b(){}function k(){}var T={};h(T,l,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==i&&a.call(E,l)&&(T=E);var C=k.prototype=_.prototype=Object.create(T);function M(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(s,i,o,c){var l=p(e[s],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,c)}),(function(e){r("throw",e,o,c)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,c)}))}c(l.arg)}var s;o(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,s){r(e,n,t,s)}))}return s=s?s.then(i,i):i()}})}function P(t,r,n){var s=m;return function(i,a){if(s===y)throw Error("Generator is already running");if(s===v){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var c=I(o,n);if(c){if(c===w)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===m)throw s=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=y;var l=p(t,r,n);if("normal"===l.type){if(s=n.done?v:g,l.arg===w)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(s=v,n.method="throw",n.arg=l.arg)}}}function I(t,r){var n=r.method,s=t.iterator[n];if(s===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var i=p(s,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,w;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,w):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,w)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,i=function r(){for(;++s<t.length;)if(a.call(t,s))return r.value=t[s],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=k,o(C,"constructor",{value:k,configurable:!0}),o(k,"constructor",{value:b,configurable:!0}),b.displayName=h(k,d,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,h(e,d,"GeneratorFunction")),e.prototype=Object.create(C),e},r.awrap=function(e){return{__await:e}},M(j.prototype),h(j.prototype,u,(function(){return this})),r.AsyncIterator=j,r.async=function(e,t,n,s,i){void 0===i&&(i=Promise);var a=new j(f(e,t,n,s),i);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},M(C),h(C,d,"Generator"),h(C,l,(function(){return this})),h(C,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,s){return o.type="throw",o.arg=t,r.next=n,s&&(r.method="next",r.arg=e),!!s}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),l=a.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,w):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var s=n.arg;O(r)}return s}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),w}},r}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/helpers/regeneratorRuntime.js"}],[2085,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/helpers/typeof.js"}],[2086,{"../helpers/regeneratorRuntime":2084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../helpers/regeneratorRuntime")();t.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}}},{package:"@metamask/smart-transactions-controller>@babel/runtime",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@babel/runtime/regenerator/index.js"}],[2087,{"./types.js":2102,"./util.js":2103,"@ethereumjs/common":2110,"@ethereumjs/util":2124},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseTransaction=void 0;const n=e("@ethereumjs/common"),s=e("@ethereumjs/util"),i=e("./types.js"),a=e("./util.js");r.BaseTransaction=class{constructor(e,t){this.cache={hash:undefined,dataFee:undefined,senderPubKey:undefined},this.activeCapabilities=[],this.DEFAULT_CHAIN=n.Chain.Mainnet;const{nonce:r,gasLimit:i,to:o,value:c,data:l,v:u,r:d,s:h,type:f}=e;this._type=Number((0,s.bytesToBigInt)((0,s.toBytes)(f))),this.txOptions=t;const p=(0,s.toBytes)(""===o?"0x":o),m=(0,s.toBytes)(u),g=(0,s.toBytes)(d),y=(0,s.toBytes)(h);this.nonce=(0,s.bytesToBigInt)((0,s.toBytes)(r)),this.gasLimit=(0,s.bytesToBigInt)((0,s.toBytes)(i)),this.to=p.length>0?new s.Address(p):undefined,this.value=(0,s.bytesToBigInt)((0,s.toBytes)(c)),this.data=(0,s.toBytes)(""===l?"0x":l),this.v=m.length>0?(0,s.bytesToBigInt)(m):undefined,this.r=g.length>0?(0,s.bytesToBigInt)(g):undefined,this.s=y.length>0?(0,s.bytesToBigInt)(y):undefined,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const v=this.to===undefined||null===this.to,w=t.allowUnlimitedInitCodeSize??!1,_=t.common??this._getCommon();v&&_.isActivatedEIP(3860)&&!1===w&&(0,a.checkMaxInitCodeSize)(_,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}getValidationErrors(){const e=[];return this.isSigned()&&!this.verifySignature()&&e.push("Invalid Signature"),this.getBaseFee()>this.gasLimit&&e.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),e}isValid(){return 0===this.getValidationErrors().length}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let r=s.BIGINT_0;for(let n=0;n<this.data.length;n++)0===this.data[n]?r+=e:r+=t;if((this.to===undefined||null===this.to)&&this.common.isActivatedEIP(3860)){const e=BigInt(Math.ceil(this.data.length/32));r+=this.common.param("gasPrices","initCodeWordCost")*e}return r}toCreationAddress(){return this.to===undefined||0===this.to.bytes.length}isSigned(){const{v:e,r:t,s:r}=this;return e!==undefined&&t!==undefined&&r!==undefined}verifySignature(){try{const e=this.getSenderPublicKey();return 0!==(0,s.unpadBytes)(e).length}catch(e){return!1}}getSenderAddress(){return new s.Address((0,s.publicToAddress)(this.getSenderPublicKey()))}sign(e){if(32!==e.length){const e=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(e)}let t=!1;this.type===i.TransactionType.Legacy&&this.common.gteHardfork("spuriousDragon")&&!this.supports(i.Capability.EIP155ReplayProtection)&&(this.activeCapabilities.push(i.Capability.EIP155ReplayProtection),t=!0);const r=this.getHashedMessageToSign(),n=this.common.customCrypto?.ecsign??s.ecsign,{v:a,r:o,s:c}=n(r,e),l=this.addSignature(a,o,c,!0);if(t){const e=this.activeCapabilities.indexOf(i.Capability.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return l}toJSON(){return{type:(0,s.bigIntToHex)(BigInt(this.type)),nonce:(0,s.bigIntToHex)(this.nonce),gasLimit:(0,s.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,s.bigIntToHex)(this.value),data:(0,s.bytesToHex)(this.data),v:this.v!==undefined?(0,s.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,s.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,s.bigIntToHex)(this.s):undefined}}_getCommon(e,t){if(t!==undefined){const r=(0,s.bytesToBigInt)((0,s.toBytes)(t));if(e){if(e.chainId()!==r){const t=this._errorMsg(`The chain ID does not match the chain ID of Common. Got: ${r}, expected: ${e.chainId()}`);throw new Error(t)}return e.copy()}return n.Common.isSupportedChainId(r)?new n.Common({chain:r}):n.Common.custom({name:"custom-chain",networkId:r,chainId:r},{baseChain:this.DEFAULT_CHAIN})}return e?.copy()??new n.Common({chain:this.DEFAULT_CHAIN})}_validateCannotExceedMaxInteger(e,t=256,r=!1){for(const[n,i]of Object.entries(e))switch(t){case 64:if(r){if(i!==undefined&&i>=s.MAX_UINT64){const e=this._errorMsg(`${n} cannot equal or exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}}else if(i!==undefined&&i>s.MAX_UINT64){const e=this._errorMsg(`${n} cannot exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}break;case 256:if(r){if(i!==undefined&&i>=s.MAX_INTEGER){const e=this._errorMsg(`${n} cannot equal or exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}}else if(i!==undefined&&i>s.MAX_INTEGER){const e=this._errorMsg(`${n} cannot exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}break;default:{const e=this._errorMsg("unimplemented bits value");throw new Error(e)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,n]of Object.entries(e))if(t.includes(r)&&Array.isArray(n))throw new Error(`${r} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?(0,s.bytesToHex)(this.hash()):"not available (unsigned)"}catch(t){e="error"}let t="";try{t=this.isSigned().toString()}catch(t){e="error"}let r="";try{r=this.common.hardfork()}catch(e){r="error"}let n=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return n+=`signed=${t} hf=${r}`,n}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/baseTransaction.js"}],[2088,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getEffectivePriorityFee=r.getUpfrontCost=void 0,r.getUpfrontCost=function(e,t){const r=e.maxPriorityFeePerGas,n=e.maxFeePerGas-t,s=(r<n?r:n)+t;return e.gasLimit*s+e.value},r.getEffectivePriorityFee=function(e,t){if(t===undefined||t>e.maxFeePerGas)throw new Error("Tx cannot pay baseFee");const r=e.maxFeePerGas-t;return e.maxPriorityFeePerGas<r?e.maxPriorityFeePerGas:r}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip1559.js"}],[2089,{"../util.js":2103,"./legacy.js":2092,"@ethereumjs/rlp":2114,"@ethereumjs/util":2124,"ethereum-cryptography/keccak.js":3724},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateYParity=r.serialize=r.getHashedMessageToSign=void 0;const n=e("@ethereumjs/rlp"),s=e("@ethereumjs/util"),i=e("ethereum-cryptography/keccak.js"),a=e("../util.js"),o=e("./legacy.js");r.getHashedMessageToSign=function(e){return(e.common.customCrypto.keccak256??i.keccak256)(e.getMessageToSign())},r.serialize=function(e,t){return(0,s.concatBytes)((0,a.txTypeBytes)(e.type),n.RLP.encode(t??e.raw()))},r.validateYParity=function(e){const{v:t}=e;if(t!==undefined&&t!==s.BIGINT_0&&t!==s.BIGINT_1){const t=(0,o.errorMsg)(e,"The y-parity of the transaction should either be 0 or 1");throw new Error(t)}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip2718.js"}],[209,{"@metamask/utils":2717,"ethereumjs-util":3744,lodash:4294,loglevel:4300},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=c,function(e){if((0,s.hasProperty)(e,"NftController")&&(0,s.isObject)(e.NftController)){const c=e.NftController;if((0,s.hasProperty)(c,"allNftContracts")&&(0,s.isObject)(c.allNftContracts)){const{allNftContracts:e}=c;Object.keys(e).every((t=>(0,s.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,s.isObject)(r)){for(const e of Object.keys(r))"undefined"!==e&&e!==undefined&&"null"!==e||delete r[e];e[t]=(0,a.mapKeys)(r,((e,t)=>l(t)))}}))}else if((0,s.hasProperty)(c,"allNftContracts")){var t,r;null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NftController.allNftContracts is "+typeof c.allNftContracts))}else o.default.warn("typeof state.NftController.allNftContracts is "+typeof c.allNftContracts);if((0,s.hasProperty)(c,"allNfts")&&(0,s.isObject)(c.allNfts)){const{allNfts:e}=c;Object.keys(e).every((t=>(0,s.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,s.isObject)(r)){for(const e of Object.keys(r))"undefined"!==e&&e!==undefined&&"null"!==e||delete r[e];e[t]=(0,a.mapKeys)(r,((e,t)=>l(t)))}}))}else if((0,s.hasProperty)(c,"allNfts")){var n,i;null===(n=global.sentry)||void 0===n||null===(i=n.captureException)||void 0===i||i.call(n,new Error("typeof state.NftController.allNfts is "+typeof c.allNfts))}else o.default.warn("typeof state.NftController.allNfts is "+typeof c.allNfts);e.NftController=c}else if((0,s.hasProperty)(e,"NftController")){var c,u;null===(c=global.sentry)||void 0===c||null===(u=c.captureException)||void 0===u||u.call(c,new Error("typeof state.NftController is "+typeof e.NftController))}else o.default.warn("typeof state.NftController is undefined");if((0,s.hasProperty)(e,"TokenListController")&&(0,s.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,s.hasProperty)(t,"tokensChainsCache")&&(0,s.isObject)(t.tokensChainsCache)){for(const e of Object.keys(t.tokensChainsCache))"undefined"!==e&&e!==undefined&&"null"!==e||delete t.tokensChainsCache[e];t.tokensChainsCache=(0,a.mapKeys)(t.tokensChainsCache,((e,t)=>l(t)))}else if((0,s.hasProperty)(t,"tokensChainsCache")){var d,h;null===(d=global.sentry)||void 0===d||null===(h=d.captureException)||void 0===h||h.call(d,new Error("typeof state.TokenListController.tokensChainsCache is "+typeof e.TokenListController.tokensChainsCache))}else o.default.warn("typeof state.TokenListController.tokensChainsCache is undefined")}else o.default.warn("typeof state.TokenListController is "+typeof e.TokenListController);if((0,s.hasProperty)(e,"TokensController")&&(0,s.isObject)(e.TokensController)){const t=e.TokensController;if((0,s.hasProperty)(t,"allTokens")&&(0,s.isObject)(t.allTokens)){const{allTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allTokens=(0,a.mapKeys)(e,((e,t)=>l(t)))}else if((0,s.hasProperty)(t,"allTokens")){var f,p;null===(f=global.sentry)||void 0===f||null===(p=f.captureException)||void 0===p||p.call(f,new Error("typeof state.TokensController.allTokens is "+typeof t.allTokens))}else o.default.warn("typeof state.TokensController.allTokens is "+typeof t.allTokens);if((0,s.hasProperty)(t,"allIgnoredTokens")&&(0,s.isObject)(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allIgnoredTokens=(0,a.mapKeys)(e,((e,t)=>l(t)))}else if((0,s.hasProperty)(t,"allIgnoredTokens")){var m,g;null===(m=global.sentry)||void 0===m||null===(g=m.captureException)||void 0===g||g.call(m,new Error("typeof state.TokensController.allIgnoredTokens is "+typeof t.allIgnoredTokens))}else o.default.warn("typeof state.TokensController.allIgnoredTokens is "+typeof t.allIgnoredTokens);if((0,s.hasProperty)(t,"allDetectedTokens")&&(0,s.isObject)(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allDetectedTokens=(0,a.mapKeys)(e,((e,t)=>l(t)))}else if((0,s.hasProperty)(t,"allDetectedTokens")){var y,v;null===(y=global.sentry)||void 0===y||null===(v=y.captureException)||void 0===v||v.call(y,new Error("typeof state.TokensController.allDetectedTokens is "+typeof t.allDetectedTokens))}else o.default.warn("typeof state.TokensController.allDetectedTokens is "+typeof t.allDetectedTokens);e.TokensController=t}else{var w,_;null===(w=global.sentry)||void 0===w||null===(_=w.captureException)||void 0===_||_.call(w,new Error("typeof state.TokensController is "+typeof e.TokensController))}}(t.data),t},r.version=void 0;var n,s=e("@metamask/utils"),i=e("ethereumjs-util"),a=e("lodash"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n};const c=r.version=88;function l(e){if("string"==typeof e&&(0,s.isStrictHexString)(e))return e;return`0x${i.BN.isBN(e)?e.toString(16):new i.BN(e.toString(),10).toString(16)}`}}}},{package:"$root$",file:"app/scripts/migrations/088.ts"}],[2090,{"../util.js":2103,"./legacy.js":2092},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDataFee=void 0;const n=e("../util.js"),s=e("./legacy.js");r.getDataFee=function(e){return s.getDataFee(e,BigInt(n.AccessLists.getDataFeeEIP2930(e.accessList,e.common)))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip2930.js"}],[2091,{"../util.js":2103,"./legacy.js":2092},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDataFee=void 0;const n=e("../util.js"),s=e("./legacy.js");r.getDataFee=function(e){const t=BigInt(n.AccessLists.getDataFeeEIP2930(e.accessList,e.common)),r=BigInt(e.authorizationList.length*Number(e.common.param("gasPrices","perAuthBaseCost")));return s.getDataFee(e,t+r)}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip7702.js"}],[2092,{"../baseTransaction.js":2087,"../types.js":2102,"@ethereumjs/util":2124,"ethereum-cryptography/keccak.js":3724},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getEffectivePriorityFee=r.getSenderPublicKey=r.validateHighS=r.hash=r.getDataFee=r.isSigned=r.errorMsg=void 0;const n=e("@ethereumjs/util"),s=e("ethereum-cryptography/keccak.js"),i=e("../baseTransaction.js"),a=e("../types.js");function o(e,t){return`${t} (${e.errorStr()})`}function c(e){const{s:t}=e;if(e.common.gteHardfork("homestead")&&t!==undefined&&t>n.SECP256K1_ORDER_DIV_2){const t=o(e,"Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(t)}}r.errorMsg=o,r.isSigned=function(e){const{v:t,r:r,s:n}=e;return t!==undefined&&r!==undefined&&n!==undefined},r.getDataFee=function(e,t){if(e.cache.dataFee&&e.cache.dataFee.hardfork===e.common.hardfork())return e.cache.dataFee.value;const r=i.BaseTransaction.prototype.getDataFee.bind(e)()+(t??0n);return Object.isFrozen(e)&&(e.cache.dataFee={value:r,hardfork:e.common.hardfork()}),r},r.hash=function(e){if(!e.isSigned()){const t=o(e,"Cannot call hash method if transaction is not signed");throw new Error(t)}const t=e.common.customCrypto.keccak256??s.keccak256;return Object.isFrozen(e)?(e.cache.hash||(e.cache.hash=t(e.serialize())),e.cache.hash):t(e.serialize())},r.validateHighS=c,r.getSenderPublicKey=function(e){if(e.cache.senderPubKey!==undefined)return e.cache.senderPubKey;const t=e.getMessageToVerifySignature(),{v:r,r:s,s:i}=e;c(e);try{const o=(e.common.customCrypto.ecrecover??n.ecrecover)(t,r,(0,n.bigIntToUnpaddedBytes)(s),(0,n.bigIntToUnpaddedBytes)(i),e.supports(a.Capability.EIP155ReplayProtection)?e.common.chainId():undefined);return Object.isFrozen(e)&&(e.cache.senderPubKey=o),o}catch(t){const r=o(e,"Invalid Signature");throw new Error(r)}},r.getEffectivePriorityFee=function(e,t){if(t!==undefined&&t>e)throw new Error("Tx cannot pay baseFee");return t===undefined?e:e-t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/legacy.js"}],[2093,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BYTES_PER_FIELD_ELEMENT=r.FIELD_ELEMENTS_PER_BLOB=r.MAX_TX_WRAP_KZG_COMMITMENTS=r.LIMIT_BLOBS_PER_TX=r.MAX_VERSIONED_HASHES_LIST_SIZE=r.MAX_ACCESS_LIST_SIZE=r.MAX_CALLDATA_SIZE=void 0,r.MAX_CALLDATA_SIZE=16777216,r.MAX_ACCESS_LIST_SIZE=16777216,r.MAX_VERSIONED_HASHES_LIST_SIZE=16777216,r.LIMIT_BLOBS_PER_TX=6,r.MAX_TX_WRAP_KZG_COMMITMENTS=16777216,r.FIELD_ELEMENTS_PER_BLOB=4096,r.BYTES_PER_FIELD_ELEMENT=32}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/constants.js"}],[2094,{"./baseTransaction.js":2087,"./capabilities/eip1559.js":2088,"./capabilities/eip2718.js":2089,"./capabilities/eip2930.js":2090,"./capabilities/legacy.js":2092,"./types.js":2102,"./util.js":2103,"@ethereumjs/rlp":2114,"@ethereumjs/util":2124},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FeeMarketEIP1559Transaction=void 0;const n=e("@ethereumjs/rlp"),s=e("@ethereumjs/util"),i=e("./baseTransaction.js"),a=e("./capabilities/eip1559.js"),o=e("./capabilities/eip2718.js"),c=e("./capabilities/eip2930.js"),l=e("./capabilities/legacy.js"),u=e("./types.js"),d=e("./util.js");class h extends i.BaseTransaction{constructor(e,t={}){super({...e,type:u.TransactionType.FeeMarketEIP1559},t);const{chainId:r,accessList:n,maxFeePerGas:a,maxPriorityFeePerGas:c}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const h=d.AccessLists.getAccessListData(n??[]);if(this.accessList=h.accessList,this.AccessListJSON=h.AccessListJSON,d.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=(0,s.bytesToBigInt)((0,s.toBytes)(a)),this.maxPriorityFeePerGas=(0,s.bytesToBigInt)((0,s.toBytes)(c)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),i.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>s.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}o.validateYParity(this),l.validateHighS(this);(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new h(e,t)}static fromSerializedTx(e,t={}){if(!1===(0,s.equalsBytes)(e.subarray(0,1),(0,d.txTypeBytes)(u.TransactionType.FeeMarketEIP1559)))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${u.TransactionType.FeeMarketEIP1559}, received: ${(0,s.bytesToHex)(e.subarray(0,1))}`);const r=n.RLP.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return h.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(9!==e.length&&12!==e.length)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,n,i,a,o,c,l,u,d,f,p,m]=e;return this._validateNotArray({chainId:r,v:f}),(0,s.validateNoLeadingZeroes)({nonce:n,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,value:l,v:f,r:p,s:m}),new h({chainId:(0,s.bytesToBigInt)(r),nonce:n,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,to:c,value:l,data:u,accessList:d??[],v:f!==undefined?(0,s.bytesToBigInt)(f):undefined,r:p,s:m},t)}getDataFee(){return c.getDataFee(this)}getEffectivePriorityFee(e){return a.getEffectivePriorityFee(this,e)}getUpfrontCost(e=s.BIGINT_0){return a.getUpfrontCost(this,e)}raw(){return[(0,s.bigIntToUnpaddedBytes)(this.chainId),(0,s.bigIntToUnpaddedBytes)(this.nonce),(0,s.bigIntToUnpaddedBytes)(this.maxPriorityFeePerGas),(0,s.bigIntToUnpaddedBytes)(this.maxFeePerGas),(0,s.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,s.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,this.v!==undefined?(0,s.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,s.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,s.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return o.serialize(this)}getMessageToSign(){return o.serialize(this,this.raw().slice(0,9))}getHashedMessageToSign(){return o.getHashedMessageToSign(this)}hash(){return l.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return l.getSenderPublicKey(this)}addSignature(e,t,r,n=!1){t=(0,s.toBytes)(t),r=(0,s.toBytes)(r);const i={...this.txOptions,common:this.common};return h.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:n?e-s.BIGINT_27:e,r:(0,s.bytesToBigInt)(t),s:(0,s.bytesToBigInt)(r)},i)}toJSON(){const e=d.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,s.bigIntToHex)(this.chainId),maxPriorityFeePerGas:(0,s.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,s.bigIntToHex)(this.maxFeePerGas),accessList:e}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return l.errorMsg(this,e)}}r.FeeMarketEIP1559Transaction=h}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip1559Transaction.js"}]],[],{});